YUI.add("hermes-template-getty-widget",(function(l,n){var t=l.Template.Handlebars.revive({1:function(l,n,t,e,a,o,i){var u,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(u=r(t,"if").call(null!=n?n:l.nullContext||{},null!=n?r(n,"apiFailed"):n,{name:"if",hash:{},fn:l.noop,inverse:l.program(2,a,0,o,i),data:a,loc:{start:{line:2,column:0},end:{line:36,column:7}}}))?u:""},2:function(l,n,t,e,a,o,i){var u,r,c=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,p="function",d=l.escapeExpression,m=l.lambda,h=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="main getty-'+d(typeof(r=null!=(r=h(t,"typeClass")||(null!=n?h(n,"typeClass"):n))?r:s)===p?r.call(c,{name:"typeClass",hash:{},data:a,loc:{start:{line:3,column:23},end:{line:3,column:36}}}):r)+'-widget" style="width: '+d(m(null!=(u=null!=n?h(n,"layout"):n)?h(u,"containerWidth"):u,n))+'px;">\n\t<div class="sponsor-title-container">\n\t\t<p class="sponsor-title">'+d((h(t,"intlHTMLMessage")||n&&h(n,"intlHTMLMessage")||s).call(c,{name:"intlHTMLMessage",hash:{iStockLogo:null!=n?h(n,"iStockLogo"):n,assetRoot:null!=n?h(n,"assetRoot"):n,intlName:"common.SPONSORED_BY_ISTOCK"},data:a,loc:{start:{line:5,column:27},end:{line:5,column:126}}}))+'</p>\n\t\t<p class="sponsor-discount-code"><a href="'+d(typeof(r=null!=(r=h(t,"gettyPromoLink")||(null!=n?h(n,"gettyPromoLink"):n))?r:s)===p?r.call(c,{name:"gettyPromoLink",hash:{},data:a,loc:{start:{line:6,column:44},end:{line:6,column:62}}}):r)+'" target="_blank">'+d(typeof(r=null!=(r=h(t,"gettyFlickrDiscountCode")||(null!=n?h(n,"gettyFlickrDiscountCode"):n))?r:s)===p?r.call(c,{name:"gettyFlickrDiscountCode",hash:{},data:a,loc:{start:{line:6,column:80},end:{line:6,column:107}}}):r)+'</a></p>\n\t</div>\n\t<div class="getty-main-container" style="height: '+d(m(null!=(u=null!=n?h(n,"layout"):n)?h(u,"containerHeight"):u,n))+'px;" '+(null!=(u=h(t,"if").call(c,null!=n?h(n,"widgetID"):n,{name:"if",hash:{},fn:l.program(3,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:8,column:81},end:{line:8,column:134}}}))?u:"")+">\n"+(null!=(u=(h(t,"isFlipped")||n&&h(n,"isFlipped")||s).call(c,null!=n?h(n,"viewMoreFlipper"):n,{name:"isFlipped",hash:{},fn:l.program(5,a,0,o,i),inverse:l.program(11,a,0,o,i),data:a,loc:{start:{line:9,column:2},end:{line:30,column:16}}}))?u:"")+'\t</div>\n\t<div class="upgrade-pro-container">\n\t\t<p class="upgrade-to-pro-cta"><a href="'+d(typeof(r=null!=(r=h(t,"upgradeProLink")||(null!=n?h(n,"upgradeProLink"):n))?r:s)===p?r.call(c,{name:"upgradeProLink",hash:{},data:a,loc:{start:{line:33,column:41},end:{line:33,column:59}}}):r)+'">'+d((h(t,"intlMessage")||n&&h(n,"intlMessage")||s).call(c,{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:a,loc:{start:{line:33,column:61},end:{line:33,column:115}}}))+"</a></p>\n\t</div>\n</div>\n"},3:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'data-g-position="'+l.escapeExpression("function"==typeof(o=null!=(o=i(t,"widgetID")||(null!=n?i(n,"widgetID"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"widgetID",hash:{},data:a,loc:{start:{line:8,column:114},end:{line:8,column:126}}}):o)+'"'},5:function(l,n,t,e,a,o,i){var u,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(u=r(t,"each").call(null!=n?n:l.nullContext||{},null!=(u=null!=n?r(n,"layout"):n)?r(u,"boxes"):u,{name:"each",hash:{},fn:l.program(6,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:10,column:3},end:{line:24,column:12}}}))?u:""},6:function(l,n,t,e,a,o,i){var u,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(u=r(t,"if").call(null!=n?n:l.nullContext||{},a&&r(a,"last"),{name:"if",hash:{},fn:l.program(7,a,0,o,i),inverse:l.program(9,a,0,o,i),data:a,loc:{start:{line:11,column:4},end:{line:23,column:11}}}))?u:""},7:function(l,n,t,e,a,o,i){var u,r=null!=n?n:l.nullContext||{},c=l.hooks.helperMissing,s="function",p=l.escapeExpression,d=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<div class="last-result-container" style="height:'+p(typeof(u=null!=(u=d(t,"height")||(null!=n?d(n,"height"):n))?u:c)===s?u.call(r,{name:"height",hash:{},data:a,loc:{start:{line:12,column:54},end:{line:12,column:64}}}):u)+"px; width:"+p(typeof(u=null!=(u=d(t,"width")||(null!=n?d(n,"width"):n))?u:c)===s?u.call(r,{name:"width",hash:{},data:a,loc:{start:{line:12,column:74},end:{line:12,column:83}}}):u)+"px; top: "+p(typeof(u=null!=(u=d(t,"top")||(null!=n?d(n,"top"):n))?u:c)===s?u.call(r,{name:"top",hash:{},data:a,loc:{start:{line:12,column:92},end:{line:12,column:99}}}):u)+"px; left: "+p(typeof(u=null!=(u=d(t,"left")||(null!=n?d(n,"left"):n))?u:c)===s?u.call(r,{name:"left",hash:{},data:a,loc:{start:{line:12,column:109},end:{line:12,column:117}}}):u)+'px;">\n\t\t\t\t\t\t<a href="'+p(typeof(u=null!=(u=d(t,"url")||(null!=n?d(n,"url"):n))?u:c)===s?u.call(r,{name:"url",hash:{},data:a,loc:{start:{line:13,column:15},end:{line:13,column:22}}}):u)+'" target="_blank" data-g-url="'+p(typeof(u=null!=(u=d(t,"gettyImageUrl")||(null!=n?d(n,"gettyImageUrl"):n))?u:c)===s?u.call(r,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:13,column:52},end:{line:13,column:69}}}):u)+'" data-g-index="'+p(typeof(u=null!=(u=d(t,"index")||a&&d(a,"index"))?u:c)===s?u.call(r,{name:"index",hash:{},data:a,loc:{start:{line:13,column:85},end:{line:13,column:95}}}):u)+'" class="getty-result last-result" style="position: absolute; background-image: url(\''+p(typeof(u=null!=(u=d(t,"displayUri")||(null!=n?d(n,"displayUri"):n))?u:c)===s?u.call(r,{name:"displayUri",hash:{},data:a,loc:{start:{line:13,column:180},end:{line:13,column:194}}}):u)+'\');background-size: cover; background-position: center;" title="'+p(typeof(u=null!=(u=d(t,"caption")||(null!=n?d(n,"caption"):n))?u:c)===s?u.call(r,{name:"caption",hash:{},data:a,loc:{start:{line:13,column:258},end:{line:13,column:269}}}):u)+'">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="view-more-overlay"></div>\n\t\t\t\t\t\t<a href="'+p(l.lambda(null!=i[1]?d(i[1],"viewMoreLink"):i[1],n))+'" target="_blank"  class="view-more-text">\n\t\t\t\t\t\t\t'+p((d(t,"intlMessage")||n&&d(n,"intlMessage")||c).call(r,{name:"intlMessage",hash:{intlName:"common.VIEW_MORE"},data:a,loc:{start:{line:17,column:7},end:{line:17,column:50}}}))+"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n"},9:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},u=l.hooks.helperMissing,r="function",c=l.escapeExpression,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<a href="'+c(typeof(o=null!=(o=s(t,"url")||(null!=n?s(n,"url"):n))?o:u)===r?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:21,column:14},end:{line:21,column:21}}}):o)+'" target="_blank" data-g-url="'+c(typeof(o=null!=(o=s(t,"gettyImageUrl")||(null!=n?s(n,"gettyImageUrl"):n))?o:u)===r?o.call(i,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:21,column:51},end:{line:21,column:68}}}):o)+'" data-g-index="'+c(typeof(o=null!=(o=s(t,"index")||a&&s(a,"index"))?o:u)===r?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:21,column:84},end:{line:21,column:94}}}):o)+'" class="getty-result" style="position: absolute; display:block; background-image: url(\''+c(typeof(o=null!=(o=s(t,"displayUri")||(null!=n?s(n,"displayUri"):n))?o:u)===r?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:21,column:182},end:{line:21,column:196}}}):o)+"');background-size: cover; background-position: center; height:"+c(typeof(o=null!=(o=s(t,"height")||(null!=n?s(n,"height"):n))?o:u)===r?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:21,column:259},end:{line:21,column:269}}}):o)+"px; width:"+c(typeof(o=null!=(o=s(t,"width")||(null!=n?s(n,"width"):n))?o:u)===r?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:21,column:279},end:{line:21,column:288}}}):o)+"px; top: "+c(typeof(o=null!=(o=s(t,"top")||(null!=n?s(n,"top"):n))?o:u)===r?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:21,column:297},end:{line:21,column:304}}}):o)+"px; left: "+c(typeof(o=null!=(o=s(t,"left")||(null!=n?s(n,"left"):n))?o:u)===r?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:21,column:314},end:{line:21,column:322}}}):o)+'px;" title="'+c(typeof(o=null!=(o=s(t,"caption")||(null!=n?s(n,"caption"):n))?o:u)===r?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:21,column:334},end:{line:21,column:345}}}):o)+'">\n\t\t\t\t\t</a>\n'},11:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(t,"each").call(null!=n?n:l.nullContext||{},null!=(o=null!=n?i(n,"layout"):n)?i(o,"boxes"):o,{name:"each",hash:{},fn:l.program(12,a,0),inverse:l.noop,data:a,loc:{start:{line:26,column:3},end:{line:29,column:12}}}))?o:""},12:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},u=l.hooks.helperMissing,r="function",c=l.escapeExpression,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<a href="'+c(typeof(o=null!=(o=s(t,"url")||(null!=n?s(n,"url"):n))?o:u)===r?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:27,column:13},end:{line:27,column:20}}}):o)+'" target="_blank" data-g-url="'+c(typeof(o=null!=(o=s(t,"gettyImageUrl")||(null!=n?s(n,"gettyImageUrl"):n))?o:u)===r?o.call(i,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:27,column:50},end:{line:27,column:67}}}):o)+'" data-g-index="'+c(typeof(o=null!=(o=s(t,"index")||a&&s(a,"index"))?o:u)===r?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:27,column:83},end:{line:27,column:93}}}):o)+'" class="getty-result" style="position: absolute; display:block; background-image: url(\''+c(typeof(o=null!=(o=s(t,"displayUri")||(null!=n?s(n,"displayUri"):n))?o:u)===r?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:27,column:181},end:{line:27,column:195}}}):o)+"');background-size: cover; background-position: center; height:"+c(typeof(o=null!=(o=s(t,"height")||(null!=n?s(n,"height"):n))?o:u)===r?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:27,column:258},end:{line:27,column:268}}}):o)+"px; width:"+c(typeof(o=null!=(o=s(t,"width")||(null!=n?s(n,"width"):n))?o:u)===r?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:27,column:278},end:{line:27,column:287}}}):o)+"px; top: "+c(typeof(o=null!=(o=s(t,"top")||(null!=n?s(n,"top"):n))?o:u)===r?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:27,column:296},end:{line:27,column:303}}}):o)+"px; left: "+c(typeof(o=null!=(o=s(t,"left")||(null!=n?s(n,"left"):n))?o:u)===r?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:27,column:313},end:{line:27,column:321}}}):o)+'px;" title="'+c(typeof(o=null!=(o=s(t,"caption")||(null!=n?s(n,"caption"):n))?o:u)===r?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:27,column:333},end:{line:27,column:344}}}):o)+'">\n\t\t\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,t,e,a,o,i){var u,r,c,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return r=null!=(r=s(t,"nestAndChangeHtmlTags")||(null!=n?s(n,"nestAndChangeHtmlTags"):n))?r:l.hooks.helperMissing,c={name:"nestAndChangeHtmlTags",hash:{},fn:l.program(1,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:1,column:0},end:{line:37,column:26}}},u="function"==typeof r?r.call(null!=n?n:l.nullContext||{},c):r,s(t,"nestAndChangeHtmlTags")||(u=l.hooks.blockHelperMissing.call(n,u,c)),null!=u?u:""},useData:!0,useDepths:!0}),e={};l.Array.each([],(function(n){var t=l.Template.get("hermes/"+n);t&&(e[n]=t)})),l.Template.register("hermes/getty-widget",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(e,a.partials):e,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-getty-search-fetcher",(function(e,r){"use strict";e.namespace("ModelFetchers")["flickr-getty-search"]={run:function(o,a){var t=this,s=this._processParams(o,a);return e.Promise.all([a.callAPI("flickr.getty.affiliate.search",s),a.getModelRegistry("getty-search-models")]).then((function(e){return t._processResponse(e,o,a)}),e.FetcherErrorLogger(r))},_processParams:function(e){var r={search_phrase:e.searchTerm,color:e.color,orientations:e.orientations,accept_language:e.language,gi_country_code:e.countryCode,page_size:e.pageSize};return e.photoId&&(r.photo_id=e.photoId),r},_processResponse:function(e,r){var o=e[0],a=e[1],t={images:o.images,searchTerm:r.searchTerm,color:r.color,orientations:r.orientations,language:r.language,countryCode:r.countryCode,photoId:r.photoId,searchPhrase:o.searchPhrase,pageSize:r.pageSize};return a.addOrUpdate(t),o}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:[]});YUI.add("getty-search-models",(function(e){function r(e){r.superclass.constructor.call(this,e)}e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(r){return e.ModelFetchers["flickr-getty-search"].run(r,this.appContext)}},attributes:{images:{},searchTerm:{},photoId:{},color:{},orientations:{},language:{},countryCode:{},searchPhrase:{},pageSize:{}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-getty-search-fetcher"]});YUI.add("getty-widget-view",(function(t,e){var i=new t.SubscriptionsHelper,s=require("justified-layout"),o=require("hermes-core/flog")(e);t.namespace("Views")["getty-widget-view"]=t.Base.create("getty-widget-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.justifiedLayout=s,this.params=e,this.widgetType=this.params.type,this.widgetInPhotoList=this.params.inList,this.searchTerm=this.getSearchTerm(),this.geo=this.params.geo,this.iStockLogoLocation=t.config.flickr.urls.assetRoot+"/images/getty/IStock_corporate_logo.svg",this.currentUrl=YUI.Env.isServer?this.appContext.request.url:t.url()+this.appContext.flapp.getPath(),this.countryCode=null,this.widgetIsInView=!1,this.widgetIsLoaded=!1,this.widgetLoadEventListener,this.bottom,this.apiFailed,this.randomClasses=YUI.Env.isServer?this.appContext.request.randomClasses:t.config.flickr.randomClasses,this.resizeThrottle=300,this.gettyWidgetId,this.gettyImages,this.gettyFlickrDiscountCode=this.intlHTMLMessage({intlName:"common.GETTY_FLICKR_20_DISCOUNT"}),this.params.photoId&&this.appContext.gettyHelper.setPreviousPhotoId(this.params.photoId),this.types={searchPage:{searchTerm:this.searchTerm,layoutSpacing:4,layoutRowHeight:140,layoutRowHeightTolerance:0,layoutMaxAr:2,snowPlowLabel:"getty-search",rowCount:1,typeClass:"search-page",viewMoreFlipper:"enable-getty-view-more-search",utmOptions:{promo:{campaign:this.widgetInPhotoList?`srp_photos_${this.getPositionalTag()}`:"srp_photos_top",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"srp_photos_viewmore",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:`?mediatype=photography&phrase=${this.searchTerm}`},imageAsset:{campaign:this.widgetInPhotoList?`srp_photos_${this.getPositionalTag()}`:"srp_photos_top",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:""}}},photoPage:{searchTerm:"adventure",layoutSpacing:4,layoutRowHeight:this.params.sidebar?100:120,layoutRowHeightTolerance:0,layoutMaxAr:2,snowPlowLabel:"getty-photopage",layoutContainerWidth:this.params.sidebar?300:500,rowCount:2,typeClass:"photo-page",viewMoreFlipper:"enable-getty-view-more-photo",utmOptions:{promo:{campaign:"adp_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"adp_photos_viewmore",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:""},imageAsset:{campaign:"adp_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:""}}},trendTagsPage:{searchTerm:"nature",layoutSpacing:4,layoutRowHeight:200,layoutRowHeightTolerance:0,layoutMaxAr:1,snowPlowLabel:"getty-trend-tags-page",rowCount:1,typeClass:"default-widget-page",viewMoreFlipper:"enable-getty-view-more-search",utmOptions:{promo:{campaign:"Trending_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"Trending_photos_viewmore",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:`?mediatype=photography&phrase=${this.searchTerm}`},imageAsset:{campaign:"Trending_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:""}}},explorePage:{searchTerm:"nature",layoutSpacing:4,layoutRowHeight:200,layoutRowHeightTolerance:0,layoutMaxAr:1,snowPlowLabel:"getty-explore-page",rowCount:1,typeClass:"default-widget-page",viewMoreFlipper:"enable-getty-view-more-search",utmOptions:{promo:{campaign:"Explore_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"Explore_photos_viewmore",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:`?mediatype=photography&phrase=${this.searchTerm}`},imageAsset:{campaign:"Explore_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:""}}},tagsPage:{searchTerm:this.searchTerm,layoutSpacing:4,layoutRowHeight:200,layoutRowHeightTolerance:0,layoutMaxAr:1,snowPlowLabel:"getty-tags-page",rowCount:1,typeClass:"default-widget-page",viewMoreFlipper:"enable-getty-view-more-search",utmOptions:{promo:{campaign:"Tags_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"Tags_photos_viewmore",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:`?mediatype=photography&phrase=${this.searchTerm}`},imageAsset:{campaign:"Tags_photos_sponsored",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:""}}},interstitial:{searchTerm:this.searchTerm,layoutSpacing:4,layoutRowHeight:140,layoutRowHeightTolerance:0,layoutMaxAr:2,snowPlowLabel:"getty-interstitial",rowCount:1,typeClass:"photo-page",viewMoreFlipper:"enable-getty-view-more-search",utmOptions:{promo:{campaign:this.widgetInPhotoList?`srp_photos_${this.getPositionalTag()}`:"srp_photos_top",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"srp_photos_viewmore",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:`?mediatype=photography&phrase=${this.searchTerm}`},imageAsset:{campaign:this.widgetInPhotoList?`srp_photos_${this.getPositionalTag()}`:"srp_photos_top",term:this.searchTerm,pageUrl:this.currentUrl,originalURL:""}}}},this.utmTrackingOptions=this.getUtmOptions(),this.params.geo&&this.params.geo.countryCode?this.countryCode=this.params.geo.countryCode:t.config.flickr.geo&&t.config.flickr.geo.countryCode&&(this.countryCode=t.config.flickr.geo.countryCode),this.params.sidebar&&this.appContext.adManager.userCanViewPhotoPageSidebar()&&(this.widgetIsInView=!0,this.widgetIsLoaded=!0)},getSearchTerm:function(){return"searchPage"===this.widgetType?this.params.searchTerm:"photoPage"===this.widgetType||"interstitial"===this.widgetType?this.appContext.gettyHelper.widgetDefaultSearchTerm:"trendTagsPage"===this.widgetType||"explorePage"===this.widgetType?"nature":"tagsPage"===this.widgetType?this.params.tag:void 0},getUtmOptions:function(){return this.types[this.widgetType].utmOptions},getPhotoPageState:function(){if(!YUI.Env.isServer&&this.widgetIsInView&&this.appContext.adManager.canShowAd(this.photoModel)){var e=this;let i={photoId:e.params.photoId,language:e.appContext.gettyHelper.getCorrectLangFormat(),countryCode:e.countryCode};return e.appContext.getModel("getty-search-models",i).then((e=>(this.gettyModel=e,this.apiFailed=!1,this.updateSearchTerm(),t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyResultsLoad",label:this.types[this.widgetType].snowPlowLabel}),{registryName:"getty-search-models",modelId:e.id}))).catch((i=>{e.apiFailed=!0,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:e.searchTerm,action:"gettyResultsFail",label:this.types[this.widgetType].snowPlowLabel}),o.error("Error with fetching getty-search-models",{err:i})}))}return t.Promise.resolve()},updateSearchTerm:function(){this.searchTerm=this.gettyModel.getValue("searchPhrase"),this.utmTrackingOptions.promo.term=this.searchTerm,this.utmTrackingOptions.imageAsset.term=this.searchTerm,this.utmTrackingOptions.viewMore.term=this.searchTerm,this.utmTrackingOptions.viewMore.extraParams=`?mediatype=photography&phrase=${this.searchTerm}`},getSearchState:function(){let e={searchTerm:this.searchTerm,color:this.appContext.gettyHelper.getSearchColorHex(this.params),orientations:this.appContext.gettyHelper.getSearchOrientation(this.params),language:this.appContext.gettyHelper.getCorrectLangFormat(),countryCode:this.countryCode,pageSize:50};return this.appContext.getModel("getty-search-models",e).then((e=>(this.gettyModel=e,this.apiFailed=!1,this.updateSearchTerm(),t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyResultsLoad",label:this.types[this.widgetType].snowPlowLabel}),{registryName:"getty-search-models",modelId:e.id}))).catch((e=>{this.apiFailed=!0,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyResultsFail",label:this.types[this.widgetType].snowPlowLabel}),o.error("Error with fetching getty-search-models",{err:e})}))},getDefaultWidgetState:function(){let e={searchTerm:this.searchTerm,language:this.appContext.gettyHelper.getCorrectLangFormat(),countryCode:this.countryCode};return this.appContext.getModel("getty-search-models",e).then((e=>(this.gettyModel=e,this.apiFailed=!1,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultsLoad",label:this.types[this.widgetType].snowPlowLabel}),{registryName:"getty-search-models",modelId:e.id}))).catch((e=>{this.apiFailed=!0,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultsFail",label:this.types[this.widgetType].snowPlowLabel}),o.error("Error with fetching getty-search-models",{err:e})}))},getInterstitialtWidgetState:function(){var e=this;let i={};return i=this.appContext.gettyHelper.previousPhotoId&&this.appContext.adManager.canShowAd(this.photoModel)?{photoId:e.appContext.gettyHelper.previousPhotoId,language:e.appContext.gettyHelper.getCorrectLangFormat(),countryCode:e.countryCode,pageSize:50}:{searchTerm:this.searchTerm,language:this.appContext.gettyHelper.getCorrectLangFormat(),countryCode:this.countryCode,pageSize:50},e.appContext.getModel("getty-search-models",i).then((e=>(this.gettyModel=e,this.apiFailed=!1,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultsLoad",label:this.types[this.widgetType].snowPlowLabel}),{registryName:"getty-search-models",modelId:e.id}))).catch((e=>{this.apiFailed=!0,t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultsFail",label:this.types[this.widgetType].snowPlowLabel}),o.error("Error with fetching getty-search-models",{err:e})}))},loadState:function(){let t,e,i=this,s=this.appContext.gettyHelper.previousPhotoId||this.params.photoId||null;return"searchPage"===this.widgetType?t=this.getSearchState:"photoPage"===this.widgetType?t=this.getPhotoPageState:"interstitial"===this.widgetType?t=this.getInterstitialtWidgetState:["trendTagsPage","explorePage","tagsPage"].includes(this.widgetType)&&(t=this.getDefaultWidgetState),e=s?this.appContext.getModel("photo-models",s).then((function(t){t&&(i.photoModel=t)})):Promise.resolve(),e.then((()=>t.bind(i).apply().then((t=>{t&&(i.gettyWidgetId=i.appContext.gettyHelper.cacheWidget(t.registryName,t.modelId,i.gettyModel.getValue("images"),i.params),i.gettyImages=i.appContext.gettyHelper.getWidgetById(i.gettyWidgetId).widgetImages)})))).catch((t=>{o.error("Error with fetching getty-search-models",{err:t})}))},buildLayout:function(){var t,e,i=this,s=this.gettyImages,o=0,a=0,r=0,h=this.types[this.widgetType].rowCount;if(s){if(e=this.types[this.widgetType].layoutContainerWidth?this.types[this.widgetType].layoutContainerWidth:80*this.appContext.viewportData.getWidth()/100,this.appContext.gettyHelper.isPhotopageInterstitialWidget()){let t=this.appContext.gettyHelper.getWidgetById(this.gettyWidgetId);t&&t.widgetImages&&t.widgetImages.length&&(s=this.gettyImages=this.appContext.gettyHelper.randomizeImages(t.widgetImages))}var n=s.map((function(t){return Math.min(Number(parseFloat(t.maxDimensions.width/t.maxDimensions.height).toFixed(2)),i.types[i.widgetType].layoutMaxAr)}));return"searchPage"===this.widgetType&&this.appContext.flipper.isFlipped("enable-search-sidebar")?this.appContext.viewportData.getWidth()>1080&&(e-=340):"interstitial"===this.widgetType&&(e=this.appContext.gettyHelper.getInterstitialWidget().rowWidth,i.types[i.widgetType].layoutRowHeight=this.appContext.gettyHelper.getInterstitialWidget().rowHeight,h=this.appContext.gettyHelper.getInterstitialWidget().rowCount),(t=this.getJustifiedLayout(n,e)).boxes.some((function(e,s){a<e.top&&(a=e.top,++o>=h&&(r=r||s,t.containerHeight=t.containerHeight-e.height-i.types[i.widgetType].layoutSpacing))})),r||(r=t.boxes.length),t.containerWidth=e,t.boxes=t.boxes.slice(0,r),t.boxes.forEach(((t,e)=>{var s=i.gettyImages[e],o=this.utmTrackingOptions.imageAsset;o.originalURL=s.referenceUri,t.displayUri=s.displayUri,t.url=this.appContext.gettyHelper.appendGettyTracking(o),t.gettyImageUrl=s.referenceUri,t.caption=s.caption})),t}},getJustifiedLayout:function(t,e){let i,s;return i=this.justifiedLayout(t,{containerWidth:e,containerPadding:0,forceAspectRatio:1,boxSpacing:{horizontal:this.types[this.widgetType].layoutSpacing,vertical:this.types[this.widgetType].layoutSpacing},targetRowHeight:this.types[this.widgetType].layoutRowHeight,targetRowHeightTolerance:this.types[this.widgetType].layoutRowHeightTolerance}),s=i.boxes.length*i.boxes[0].width,s<e&&e-s>this.types[this.widgetType].layoutSpacing?(this.appContext.gettyHelper.setImagesInWidget(this.gettyWidgetId,3),this.buildLayout()):i},buildContainer:function(){var t={apiFailed:this.apiFailed,iStockLogo:this.iStockLogoLocation,gettyPromoLink:this.appContext.gettyHelper.appendGettyTracking(this.utmTrackingOptions.promo),upgradeProLink:i.getProLandingPageUrl(i.UTM_HIDE_ADS_GETTY_SEARCH),typeClass:this.types[this.widgetType].typeClass,viewMoreFlipper:this.types[this.widgetType].viewMoreFlipper,randomClasses:this.randomClasses,widgetID:this.gettyWidgetId,gettyFlickrDiscountCode:this.gettyFlickrDiscountCode};return["searchPage","trendTagsPage","explorePage","tagsPage","interstitial"].includes(this.widgetType)?(t.layout=this.apiFailed||YUI.Env.isServer?[]:this.buildLayout(),t.viewMoreLink=this.appContext.flipper.isFlipped("enable-getty-view-more-search")?this.appContext.gettyHelper.appendGettyTracking(this.utmTrackingOptions.viewMore):""):(t.layout=this.apiFailed||YUI.Env.isServer||!this.widgetIsInView?[]:this.buildLayout(),t.viewMoreLink=this.appContext.flipper.isFlipped("enable-getty-view-more-photo")?this.appContext.gettyHelper.appendGettyTracking(this.utmTrackingOptions.viewMore):""),this.setContainerWithTemplate("getty-widget",t),this},activate:function(){var e=this.get("container"),i=e,s=null;if(e&&"photoPage"===this.widgetType&&!this.widgetIsLoaded){for(;i&&!s;){var o=i.previous();o?s=o:i=i.get("parentNode")}s&&(this.bottom=s.getDOMNode().getBoundingClientRect().bottom),this.widgetLoadEventListener=this.registerEventHandler(t.globalEvents.subscribe("window:scroll",this.checkIfWidgetInViewport.bind(this)))}return this.buildContainer(),this.registerEventHandler(this.get("container").delegate("click",this.onGettyResultClick.bind(this),`.${this.randomClasses["getty-result"]}`)),this.registerEventHandler(this.get("container").delegate("click",this.onDiscountCodeClick.bind(this),`.${this.randomClasses["sponsor-discount-code"]}`)),this.registerEventHandler(this.get("container").delegate("click",this.onViewMoreTileClick.bind(this),`.${this.randomClasses["last-result-container"]}`)),this.registerEventHandler(t.on("resize",t.betterThrottle(this.onResize.bind(this),this.resizeThrottle,this,!0))),this.registerEventHandler(this.appContext.flapp.before("activeViewChange",this.handleViewChange.bind(this))),this},handleViewChange:function(){this.appContext.gettyHelper.clearCache(this.widgetType)},getPositionalTag:function(){return this.params.layoutItem&&this.params.layoutItem.fullRowStatic&&"photo-list-getty-item-view"===this.params.layoutItem.name?this.params.layoutItem.siblingPosition:null},checkIfWidgetInViewport:function(){window.scrollY+window.innerHeight>=this.bottom+200&&(t.globalEvents.unsubscribe(this.widgetLoadEventListener),this.loadWidget())},loadWidget:function(){var t=this.get("container"),e=this;t&&(this.widgetIsInView=!0,this.widgetIsLoaded=!0,this.loadState().then((function(){e.buildContainer()})))},onResize:function(){this.buildContainer()},onGettyResultClick:function(e){let i=e.currentTarget;if(t.Snowplough&&i){let e=i.getAttribute("data-g-url"),s=parseInt(i.getAttribute("data-g-index"),10)+1;t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyResultClick",label:this.types[this.widgetType].snowPlowLabel,property:e,value:s})}},onDiscountCodeClick:function(){t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyDiscountCodeClick",label:this.types[this.widgetType].snowPlowLabel})},onViewMoreTileClick:function(){t.Snowplough&&t.Snowplough.sendStructuredEvent({category:this.searchTerm,action:"gettyViewMoreTileClick",label:this.types[this.widgetType].snowPlowLabel})}})}),"@VERSION@",{requires:["flickr-view","hermes-template-getty-widget","getty-helper","getty-search-models"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("hermes-template-photo-well-media-interstitial-getty",(function(e,t){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,a,l,r){var n=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((n(a,"outlet")||t&&n(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?n(t,"getty-widget-view"):t,{name:"outlet",hash:{},data:r,loc:{start:{line:1,column:0},end:{line:1,column:28}}}))},useData:!0}),l={};e.Array.each([],(function(t){var a=e.Template.get("hermes/"+t);a&&(l[t]=a)})),e.Template.register("hermes/photo-well-media-interstitial-getty",(function(t,r){return(r=r||{}).partials=r.partials?e.merge(l,r.partials):l,a(t,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-well-media-scrappy-view",(function(e,t){var i=require("hermes-core/flog")(t),n=new e.SubscriptionsHelper,a={photo:{render:function(){var e,t,i,n=this,a=this.get("photo"),o="";return n.preloadImage&&(n.preloadImage.onload=null),this.appContext.forceServerRender?t=e=this.getPhotoForDisplay({canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}):(e=this.getPhotoForDisplay(),t=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]})),a.getValue("owner")&&(o=""===a.getValue("title").trim()?this.intlMessage({intlName:"common.UNTITLED"}):a.getValue("title"),o+=" | "+this.intlMessage({intlName:"common.BY_USER",user:a.getValue("owner").getValue("username")})),(i=this.get("container").one(".main-photo"))&&parseInt(i.getAttribute("width"),10)===e.width&&parseInt(i.getAttribute("height"),10)===e.height||this.setContainerWithTemplate("photo-well-media-scrappy",{width:e.width,height:e.height,src:t.url,highResSrc:e.url,imgAltText:o,needsInterstitial:a.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,isMinor:this.appContext.getViewer().isMinor}),YUI.Env.isServer?(this.serverWidth=e.width,this.serverHeight=e.height):a.getValue("needsInterstitial")||(n.preloadImage=new Image,n.preloadImage.onload=function(){this.onloadFired||n.isActiveAndInDOM()&&(this.onloadFired=!0,n.get("container").one(".main-photo").removeClass("is-hidden").show())},n.preloadImage.src=e.url,n.preloadImage.complete&&n.preloadImage.onload()),this}},video:{render:function(){var t=this.get("photo"),i=this.getPhotoForDisplay({excludeSizes:[]}),n=i.url;if(this.appContext.flipper.isFlipped("disable-video-playback")&&(n="/images/en-us/video-unavailable/m.png"),YUI.Env.isServer){let t=i.width/i.height;i.width=i.width-e.config.flickr.photopage.sidebarWidth,i.height=i.width/t}return!this.player||t.getValue("isVideoPending")||t.getValue("isVideoFailed")?(this.setContainerWithTemplate("photo-well-media-scrappy",{width:i.width,height:i.height,src:n,needsInterstitial:t.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this):(t.getValue("isVideoPending")||t.getValue("isVideoFailed")||(this.player.dimension?(this.player.dimension("width",i.width),this.player.dimension("height",i.height)):this.player.resize(i.width,i.height)),this)}},ad:{render:function(){var t=e.config.flickr.moola.positions.interstitials[0],i={},a=this.appContext.viewportData.getWidth(),o=e.config.flickr.moola.ad_breakpoint_mobile_desktop;return this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(this.get("container"))),this.adId=e.guid(),i.signedOut=!this.appContext.getViewer().signedIn,i.adTimerStartCount=t.ad_timer_start_value,i.adUnit=t[a<o?"ad_unit_mobile":"ad_unit_desktop"],i.advertisingStitching=this.adEventStitch,i.upgradeProLink=n.getProLandingPageUrl(n.UTM_HIDE_ADS),this.adUnit=i.adUnit,this.setContainerWithTemplate("photo-well-media-interstitial-moola",i),this}},gettyWidget:{render:function(){this.setContainerWithTemplate("photo-well-media-interstitial-getty")}}};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"vr-overlay-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,destinationContainer:".photo-well-media-scrappy-view",disabled:function(){return!this.appContext.flipper.isFlipped("enable-vr")}},"getty-widget-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,type:"interstitial",searchTerm:"cat",disabled:function(){return!this.appContext.gettyHelper.canShowWidgetType()||!this.appContext.gettyHelper.isPhotopageInterstitialWidget()||!this.isAd}}},initializer:function(t){return this.photoId=t.photoId,this.isAd=!!t.ad,this.geo=t.geo,this.adSlots=[],this.photoPageSideBarWidth=e.config.flickr.photopage.sidebarWidth,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then((function(i){if(t.set("photo",i),i.getValue("isVideo"))return new e.Promise((function(t,i){e.use("flickr-video-player",(function(){t()}))}))}))},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?this.appContext.gettyHelper.isPhotopageInterstitialWidget()?a.gettyWidget.render.call(this):a.ad.render.call(this):this.get("photo").getValue("isVideo")?a.video.render.call(this):a.photo.render.call(this),!YUI.Env.isServer&&this.subviews["vr-overlay-view"]&&this.subviews["vr-overlay-view"].get("canVr")&&(this.canVR=!0,this.subviews["zoom-view"]&&this.subviews["zoom-view"].destroy({remove:!0})),this.get("photo").getValue("needsInterstitial")?this.get("container").addClass("has-interstitial"):this.get("container").removeClass("has-interstitial"),this},handleInterstitialDismissButtonClick:function(t){var n=this,a=this.get("personPreferences"),o=this.get("photo"),s=o.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),a.setValue("safeSearch",s),a.registry.remoteUpdate(n.appContext.auth.user.nsid).then((function(e){o.registry.attributeSearch({needsInterstitial:!0}).forEach((function(e){o.registry.getValue(e,"safetyLevel")<=a.getValue("safeSearch")&&o.registry.setValue(e,"needsInterstitial",!1)})),n.buildContainer(),n.fire("subviewViewEvent","photoWellResized")}),(function(e){i.error({err:e}),n.onError(n.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))}))},onParentViewEvent:function(e,t){t&&"photoWellResized"===t[0]&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t=this;return!this.get("photo").getValue("isVideo")||this.get("photo").getValue("isVideoPending")||this.get("photo").getValue("isVideoFailed")||(this.player=new e.FlickrVideoPlayer({container:t.get("container").one(".videoplayer"),model:t.get("photo"),appContext:t.appContext,videoNode:e.one("#video_1")?e.one("#video_1").getDOMNode():null,controlBar:{fullscreenToggle:!1}}),this.player.init(),this.on("destroy",(function(){t.player&&(t.player.destroy(),t.player=null)}))),this.get("photo").getValue("needsInterstitial")||this.registerEventHandler(e.on("flickr:photo-media-well-update",(function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()}))),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",this.appContext.auth.user.nsid).then((function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&t.get("container").one(".restricted-interstitial-message button")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))})),(this.appContext.flipper.isFlipped("enable-infolinks-new-unit-testing")||!this.appContext.getViewer().signedIn&&this.geo&&"US"===this.geo.countryCode)&&this.appContext.adManager.handleInfolinks(this.get("photo").getValue("owner").getValue("isPro"),this.isAd),this.isAd&&!this.appContext.gettyHelper.isPhotopageInterstitialWidget()&&(t.appContext.adManager.processAdsOnPage(),e.once("adPageChange",(function(){t.fire("subviewViewEvent","adPageTimeoutStart")}))),this},showUpsell:function(){var e=this.get("container"),t=e.one("#interstitial-photo-upsell"),i=e.one("iframe");t&&t.addClass("show-upsell"),i&&i.setStyle("display","none")},onError:function(t){new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,showCancelButton:!1,showCancelX:!0,title:this.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),htmlMessage:t}).show()},getPhotoForDisplay:function(e){var t,i,n,a=this.getCanvasSize(),o=this.getPixelRatio();return e&&e.canvasSize&&(a=e.canvasSize),t=this.get("photo").getSizeToFit(a,e),i=Math.min(a.height/o,t.height),n=Math.min(a.width/o,t.width/t.height*i),i=Math.min(i,t.height/t.width*n),{width:Math.round(n),height:Math.round(i),url:t.url,pixelRatio:t.width/n}},getCanvasSize:function(){var t,i,n,a,o=this.getPixelRatio(),s=this.get("container"),r={width:500,height:500};let h,l,d;return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(h=e.one(".navigate-target.navigate-prev")&&e.one(".navigate-target.navigate-prev").one(".hide-text")?e.one(".navigate-target.navigate-prev").one(".hide-text").get("offsetWidth"):0,l=e.one(".navigate-target.navigate-next")&&e.one(".navigate-target.navigate-next").one(".hide-text")?e.one(".navigate-target.navigate-next").one(".hide-text").get("offsetWidth"):0,d=0,this.appContext.adManager.userCanViewPhotoPageSidebar()&&this.appContext.viewportData.getWidthWithScrollbars()>=1081&&(d=h+l+this.photoPageSideBarWidth),i=this.get("container").ancestor(),n=s.getStyle("paddingTop")?parseInt(s.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,a=s.getStyle("paddingBottom")?parseInt(s.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,40,40,i&&((t=i.get("region")).height=parseInt(i.getStyle("height").match(/[0-9]+/)[0],10)-(n+a),t.width=this.appContext.viewportData.viewport.width-80-d)):t=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(r={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),t||(t={top:0,left:0,bottom:500,right:500,width:r.width,height:r.height}),t.height*=o,t.width*=o,t},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})}),"@VERSION@",{requires:["flickr-view","moment","vr-overlay-view","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-sub-photo-moola-view","hermes-template-photo-well-media-interstitial-moola","subscriptions-helper","getty-widget-view","hermes-template-photo-well-media-interstitial-getty"],optionalRequires:["hermes-core"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-context-slider-photo",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,a){return" currentImage"},3:function(n,l,e,t,a){return" previousImages"},5:function(n,l,e,t,a){return" nextImages"},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,a){var o,i,r=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,c="function",s=n.escapeExpression,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<a\n\tclass="context-thumb emptyImage\n\t\t'+(null!=(o=m(e,"if").call(r,null!=l?m(l,"currentPhoto"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:2},end:{line:3,column:42}}}))?o:"")+"\n\t\t"+(null!=(o=m(e,"if").call(r,null!=l?m(l,"previousBigPhotos"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:4,column:2},end:{line:4,column:49}}}))?o:"")+"\n\t\t"+(null!=(o=m(e,"if").call(r,null!=l?m(l,"nextBigPhotos"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:2},end:{line:5,column:41}}}))?o:"")+'"\n\thref="'+s(typeof(i=null!=(i=m(e,"url")||(null!=l?m(l,"url"):l))?i:u)===c?i.call(r,{name:"url",hash:{},data:a,loc:{start:{line:6,column:7},end:{line:6,column:14}}}):i)+'"\n\tstyle="left: '+s(typeof(i=null!=(i=m(e,"left")||(null!=l?m(l,"left"):l))?i:u)===c?i.call(r,{name:"left",hash:{},data:a,loc:{start:{line:7,column:14},end:{line:7,column:22}}}):i)+'px"\n\tdata-photo-id="'+s(typeof(i=null!=(i=m(e,"id")||(null!=l?m(l,"id"):l))?i:u)===c?i.call(r,{name:"id",hash:{},data:a,loc:{start:{line:8,column:16},end:{line:8,column:22}}}):i)+'"\n\tdata-position="'+s(typeof(i=null!=(i=m(e,"position")||(null!=l?m(l,"position"):l))?i:u)===c?i.call(r,{name:"position",hash:{},data:a,loc:{start:{line:9,column:16},end:{line:9,column:28}}}):i)+'"\n\ttitle="'+s(typeof(i=null!=(i=m(e,"title")||(null!=l?m(l,"title"):l))?i:u)===c?i.call(r,{name:"title",hash:{},data:a,loc:{start:{line:10,column:8},end:{line:10,column:17}}}):i)+'"\n\ttabindex="-1"\n>\n\t<img src="'+s(typeof(i=null!=(i=m(e,"background")||(null!=l?m(l,"background"):l))?i:u)===c?i.call(r,{name:"background",hash:{},data:a,loc:{start:{line:13,column:11},end:{line:13,column:25}}}):i)+'" loading="lazy">\n</a>\n'},useData:!0}),t={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)})),n.Template.register("hermes/context-slider-photo",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,e(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});