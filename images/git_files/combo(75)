YUI.add("map-theme",(function(e,o){let a;const i=[{id:"background",type:"background",paint:{"background-color":"#edf0f2"}},{id:"earth",type:"fill",source:"protomaps","source-layer":"earth",paint:{"fill-color":"#edf0f2"}},{id:"landuse_park",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"]],paint:{"fill-color":["interpolate",["linear"],["zoom"],0,"#ddecd6",12,"#ddecd6"]}},{id:"landuse_urban_green",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","allotments","village_green","playground"]],paint:{"fill-color":"#ddecd6","fill-opacity":.7}},{id:"landuse_hospital",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","hospital"]],paint:{"fill-color":"#e3e3e3"}},{id:"landuse_industrial",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","industrial"]],paint:{"fill-color":"#e3e3e3"}},{id:"landuse_school",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","school","university","college"]],paint:{"fill-color":"#e3e3e3"}},{id:"landuse_beach",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","beach"]],paint:{"fill-color":"#e8e4d0"}},{id:"landuse_zoo",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","zoo"]],paint:{"fill-color":"#bbe3a3"}},{id:"landuse_military",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","military","naval_base","airfield"]],paint:{"fill-color":"#bbe3a3"}},{id:"natural_wood",type:"fill",source:"protomaps","source-layer":"natural",filter:["any",["in","pmap:kind","wood","nature_reserve","forest"]],paint:{"fill-color":["interpolate",["linear"],["zoom"],0,"#c9e3bc",12,"#c9e3bc"]}},{id:"natural_scrub",type:"fill",source:"protomaps","source-layer":"natural",filter:["in","pmap:kind","scrub","grassland","grass"],paint:{"fill-color":["interpolate",["linear"],["zoom"],0,"#ddecd6",12,"#ddecd6"]}},{id:"natural_glacier",type:"fill",source:"protomaps","source-layer":"natural",filter:["==","pmap:kind","glacier"],paint:{"fill-color":"#edf0f2"}},{id:"natural_sand",type:"fill",source:"protomaps","source-layer":"natural",filter:["==","pmap:kind","sand"],paint:{"fill-color":"#e8e4d0"}},{id:"landuse_aerodrome",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","aerodrome"]],paint:{"fill-color":"#e3e3e3"}},{id:"transit_runway",type:"line",source:"protomaps","source-layer":"transit",filter:["any",["in","pmap:kind_detail","runway"]],paint:{"line-color":"#cccccc","line-width":["interpolate",["exponential",1.6],["zoom"],10,0,12,4,18,30]}},{id:"transit_taxiway",type:"line",source:"protomaps","source-layer":"transit",minzoom:13,filter:["any",["in","pmap:kind_detail","taxiway"]],paint:{"line-color":"#cccccc","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,15,6]}},{id:"water",type:"fill",source:"protomaps","source-layer":"water",paint:{"fill-color":"#87c6ed"}},{id:"physical_line_stream",type:"line",source:"protomaps","source-layer":"physical_line",minzoom:14,filter:["all",["in","pmap:kind","stream"]],paint:{"line-color":"#87c6ed","line-width":.5}},{id:"physical_line_river",type:"line",source:"protomaps","source-layer":"physical_line",minzoom:9,filter:["all",["in","pmap:kind","river"]],paint:{"line-color":"#87c6ed","line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1,18,12]}},{id:"landuse_pedestrian",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","pedestrian"]],paint:{"fill-color":"#ececec"}},{id:"landuse_pier",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","pier"]],paint:{"fill-color":"#e0e0e0"}},{id:"roads_tunnels_other_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#e0e0e0","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_link_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_medium_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#e0e0e0","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]}},{id:"roads_tunnels_major_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e0e0e0","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_tunnels_highway_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-dasharray":[6,.5],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_tunnels_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#d5d5d5","line-dasharray":[4.5,.5],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#d5d5d5","line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_tunnels_link",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#d5d5d5","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_tunnels_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#d5d5d5","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_tunnels_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#d5d5d5","line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_tunnels_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#d5d5d5","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"buildings",type:"fill",source:"protomaps","source-layer":"buildings",paint:{"fill-color":"#cccccc","fill-opacity":.5}},{id:"transit_pier",type:"line",source:"protomaps","source-layer":"transit",filter:["any",["==","pmap:kind","pier"]],paint:{"line-color":"#e0e0e0","line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,16]}},{id:"roads_minor_service_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:13,filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["==","pmap:kind_detail","service"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,18,8],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_minor_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["!=","pmap:kind_detail","service"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_link_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:13,filter:["all",["==","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1.5]}},{id:"roads_medium_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1.5]}},{id:"roads_major_casing_late",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_highway_casing_late",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#ebebeb","line-dasharray":[3,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_link",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:link",1]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_minor_service",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["==","pmap:kind_detail","service"]],paint:{"line-color":"#ebebeb","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,18,8]}},{id:"roads_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["!=","pmap:kind_detail","service"]],paint:{"line-color":["interpolate",["exponential",1.6],["zoom"],11,"#ebebeb",16,"#ffffff"],"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#f5f5f5","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_major_casing_early",type:"line",source:"protomaps","source-layer":"roads",maxzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_highway_casing_early",type:"line",source:"protomaps","source-layer":"roads",maxzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]}},{id:"roads_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"transit_railway",type:"line",source:"protomaps","source-layer":"transit",filter:["all",["==","pmap:kind","rail"]],paint:{"line-dasharray":[.3,.75],"line-opacity":.5,"line-color":"#a7b1b3","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,.15,18,9]}},{id:"boundaries_country",type:"line",source:"protomaps","source-layer":"boundaries",filter:["<=","pmap:min_admin_level",2],paint:{"line-color":"#aaaaaa","line-width":1,"line-dasharray":[3,2]}},{id:"boundaries",type:"line",source:"protomaps","source-layer":"boundaries",filter:[">","pmap:min_admin_level",2],paint:{"line-color":"#aaaaaa","line-width":.5,"line-dasharray":[3,2]}},{id:"roads_bridges_other_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_link_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1.5]}},{id:"roads_bridges_minor_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_bridges_medium_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1.5]}},{id:"roads_bridges_major_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,10],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1.5]}},{id:"roads_bridges_other",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#ebebeb","line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_minor",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_bridges_link",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_bridges_medium",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#f0eded","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_bridges_major",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#f5f5f5","line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_bridges_highway_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#e0e0e0","line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_bridges_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"physical_line_waterway_label",type:"symbol",source:"protomaps","source-layer":"physical_line",minzoom:13,filter:["all",["in","pmap:kind","river","stream"]],layout:{"symbol-placement":"line","text-font":["Noto Sans Regular"],"text-field":["get","name"],"text-size":12,"text-letter-spacing":.3},paint:{"text-color":"#107fd1"}},{id:"physical_point_peak",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["==","pmap:kind","peak"]],layout:{"text-font":["Noto Sans Italic"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],10,8,16,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":"#7e9aa0","text-halo-width":1.5}},{id:"roads_labels_minor",type:"symbol",source:"protomaps","source-layer":"roads",minzoom:15,filter:["any",["in","pmap:kind","minor_road","other","path"]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"symbol-placement":"line","text-font":["Noto Sans Regular"],"text-field":["get","name"],"text-size":12},paint:{"text-color":"#91888b","text-halo-color":"#ffffff","text-halo-width":2}},{id:"physical_point_ocean",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["in","pmap:kind","sea","ocean","lake","water","bay","strait","fjord"]],layout:{"text-font":["Noto Sans Medium"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],3,10,10,12],"text-letter-spacing":.1,"text-max-width":9,"text-transform":"uppercase"},paint:{"text-color":"#107fd1"}},{id:"physical_point_lakes",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["in","pmap:kind","lake","water"]],layout:{"text-font":["Noto Sans Medium"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],3,0,6,12,10,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":"#107fd1"}},{id:"roads_labels_major",type:"symbol",source:"protomaps","source-layer":"roads",minzoom:11,filter:["any",["in","pmap:kind","highway","major_road","medium_road"]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"symbol-placement":"line","text-font":["Noto Sans Regular"],"text-field":["get","name"],"text-size":12},paint:{"text-color":"#938a8d","text-halo-color":"#ffffff","text-halo-width":2}},{id:"places_subplace",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","neighbourhood"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":"{name}","text-font":["Noto Sans Regular"],"text-max-width":7,"text-letter-spacing":.1,"text-padding":["interpolate",["linear"],["zoom"],5,2,8,4,12,18,15,20],"text-size":["interpolate",["exponential",1.2],["zoom"],11,8,14,14,18,24],"text-transform":"uppercase"},paint:{"text-color":"#8f8f8f","text-halo-color":"#e0e0e0","text-halo-width":2}},{id:"pois_important",type:"symbol",source:"protomaps","source-layer":"pois",filter:["any",["<",["get","pmap:min_zoom"],13]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-font":["Noto Sans Regular"],"text-field":["get","name"],"text-size":11,"text-max-width":9,"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2]},paint:{"text-color":"#8f8f8f","text-halo-color":"#e0e0e0","text-halo-width":1.5}},{id:"places_locality_circle",type:"circle",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","locality"],paint:{"circle-radius":2,"circle-stroke-width":1.5,"circle-stroke-color":"#ffffff","circle-color":"#000000","circle-translate":[-6,0]},maxzoom:8},{id:"places_locality",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","locality"],layout:{"text-field":"{name}","text-font":["case",["<=",["get","pmap:min_zoom"],5],["literal",["Noto Sans Medium"]],["literal",["Noto Sans Regular"]]],"text-padding":["interpolate",["linear"],["zoom"],5,3,8,7,12,11],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","pmap:population_rank"],13],8,[">=",["get","pmap:population_rank"],13],13,0],4,["case",["<",["get","pmap:population_rank"],13],10,[">=",["get","pmap:population_rank"],13],15,0],6,["case",["<",["get","pmap:population_rank"],12],11,[">=",["get","pmap:population_rank"],12],17,0],8,["case",["<",["get","pmap:population_rank"],11],11,[">=",["get","pmap:population_rank"],11],18,0],10,["case",["<",["get","pmap:population_rank"],9],12,[">=",["get","pmap:population_rank"],9],20,0],15,["case",["<",["get","pmap:population_rank"],8],12,[">=",["get","pmap:population_rank"],8],22,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,2,8,4,10,8,12,6,22,2],"text-anchor":["step",["zoom"],"left",8,"center"],"text-radial-offset":.2},paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1}},{id:"places_region",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","region"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":["step",["zoom"],["get","name:short"],6,["get","name"]],"text-font":["Noto Sans Regular"],"text-size":["interpolate",["linear"],["zoom"],3,11,7,16],"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":2}},{id:"places_country",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","country"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":"{name}","text-font":["Noto Sans Medium"],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","pmap:population_rank"],10],8,[">=",["get","pmap:population_rank"],10],12,0],6,["case",["<",["get","pmap:population_rank"],8],10,[">=",["get","pmap:population_rank"],8],18,0],8,["case",["<",["get","pmap:population_rank"],7],11,[">=",["get","pmap:population_rank"],7],20,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2],"text-transform":"uppercase"},paint:{"text-color":"#000000"}}];e.MapTheme=function(e){return a="string"==typeof e?e.slice(0,2):"en",(function(e){let o,l;return o=JSON.stringify(i),o=o.replace(/"(\{?)name(\}?)"/g,`"$1name:${a}$2"`),o=o.replace(/Noto Sans/g,"Metropolis"),l=JSON.parse(o),window.phil=l,l})()}}),"@VERSION@",{requires:[]});YUI.add("photo-charm-exif-scrappy-view",(function(e,t){var o=require("hermes-core/flog")(t),i=!1;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,this.isMobileExif=e.isMobileExif||!1,this.parentViewName=e.parentViewName||!1,this.modalTemplateData,this.appContext.flipper.isFlipped("enable-protomaps")&&(i=!0),""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this,i=[];return i.push(t.appContext.getModel("person-relationship-models",t.nsid).then((function(e){t.set("ownerRelationship",e)}))),this.appContext.getViewer().signedIn&&i.push(t.appContext.getModel("person-models",t.appContext.getViewer().nsid).then((function(e){t.set("person",e)}))),i.push(new e.FlickrPromise({location:t.appContext.getModel("photo-location-models",t.photoId),photo:t.appContext.getModel("photo-models",t.photoId),relationship:t.appContext.getModel("person-relationship-models",t.nsid),stats:t.appContext.getModel("photo-stats-models",t.photoId)}).then((function(e){t.set("location",e.location),t.set("photo",e.photo),t.set("relationship",e.relationship),t.set("stats",e.stats)}))),i.push(t.appContext.getModel("photo-exif-models",t.photoId).then((function(o){var i=o.getValue("camera");t.set("exif",o),t.set("extendedExif",t.getExtendedExif()),t.set("cameraData",e.ExifCameraMap.getCameraImageURL(i,o.getValue("cameraType"),t.appContext))}),(function(e){o.warn("Exif failed to load for this photo",{err:e})}))),e.Promise.all(i)},buildContainer:function(){var t,o,a,n,s=this.get("photo"),l=this.get("location"),r=!!this.get("relationship")&&this.get("relationship").getValue("isMe"),p=this.get("exif")?this.get("exif").toJSON():null,h=!1,d=!1,c=!1,g="",u=!1,m="",f="",x=this.get("stats");return void 0!==this.getViewDataFromHistory("showExpanded")&&!0===this.getViewDataFromHistory("showExpanded")&&(u=!0),p&&(p.metering||p.exposureProgram||p.flash||p.iso||p.exposureTime||p.focalLength||p.fNumber)&&(h=!0),l&&(l.getValue("levels").venue?(d="foursquare"===l.getValue("levels").venue.source,o=l.getValue("levels").venue.venueId,a=e.url("/map/?fLat="+l.getValue("levels").venue.venueLat+"&fLon="+l.getValue("levels").venue.venueLong+"&zl=13&everyone_nearby=1&photo="+s.getValue("id"))):l.getValue("latitude")&&(a=e.url("/map/?fLat="+l.getValue("latitude")+"&fLon="+l.getValue("longitude")+"&zl=13&everyone_nearby=1&photo="+s.getValue("id"))),n=e.url("/search/?lat="+l.getValue("latitude")+"&lon="+l.getValue("longitude")+"&radius=0.25&has_geo=1&view_all=1"),m=l.getValue("text")?l.getValue("text").replace(/<\/?[^>]+>/g,"").replace(/&(?:#\d+|[a-zA-Z]+);/g,""):this.intlMessage({intlName:"common.MYSTERIOUS_PLACE"}),this.set("linkToMap",a)),r&&!this.isMobileExif&&(c=!0),this.get("cameraData")&&(g=this.get("cameraData").url),p&&(this.isMobileExif?f=p.flashFired||"Fired"===p.flash?this.intlMessage({intlName:"photo-page-scrappy.FLASH_SIMPLE_ON"}):this.intlMessage({intlName:"photo-page-scrappy.FLASH_SIMPLE_OFF"}):(p.flashModeAuto&&(f=p.flashFired?this.intlMessage({intlName:"photo-page-scrappy.FLASH_AUTO_FIRED"}):this.intlMessage({intlName:"photo-page-scrappy.FLASH_AUTO_NO_FIRE"})),p.flashModeOn&&(f=p.flashFired?this.intlMessage({intlName:"photo-page-scrappy.FLASH_ON_FIRED"}):this.intlMessage({intlName:"photo-page-scrappy.FLASH_ON_NO_FIRE"})),p.flashModeOff&&(f=this.intlMessage({intlName:"photo-page-scrappy.FLASH_OFF"})),"Fired"===p.flash&&(f=this.intlMessage({intlName:"photo-page-scrappy.FLASH_ON_FIRED"})))),t={exif:p,cameraData:g,location:l?l.toJSON():{},locationText:m,isFoursquare:d,fourSquarePlaceId:o,isOwner:r,isVideo:!!s&&s.getValue("isVideo"),exifInfoIsPresent:h,stats:this.get("stats")?this.get("stats").toJSON():{},showEditLocation:c,linkToMap:this.get("linkToMap"),linkToSearch:n,showExpanded:u,extendedExif:this.get("extendedExif"),flashString:f,isMobileExif:this.isMobileExif,dateTaken:x.getDateObj("dateTaken"),datePosted:x.getDateObj("datePosted"),takenGranularity:x.getValue("takenGranularity"),isDateTakenUnknown:x.getValue("isDateTakenUnknown"),parentViewName:this.parentViewName,shouldSeeSidebar:this.appContext.adManager.userCanViewPhotoPageSidebar()&&!this.isMobileExif,useProtomaps:i},this.appContext.adManager.userCanViewPhotoPageSidebar()&&(this.modalTemplateData=t),this.setContainerWithTemplate("photo-charm-exif-scrappy",t),this},activate:function(){var t,o=this,a=this.get("stats"),n=this.get("container");a&&this.registerEventHandler(a.on("valuesChanged",(function(e){(e.dateTaken||e.datePosted||e.isCirca||e.isSometime||e.takenGranularity)&&o.buildContainer()}))),this.registerEventHandler(n.on("click",this.handleContainerClick.bind(this))),window.scrollY>=20||n.one(".map-container")&&n.one(".map-container").getY()<window.innerHeight?i?this.setupProtomaps():this.setupMapHandlers():(t=e.globalEvents.subscribe("window:scroll",(function(a){window.scrollY>=20&&(i?o.setupProtomaps():o.setupMapHandlers(),e.globalEvents.unsubscribe(t))})),this.registerEventHandler(t)),0===n.one(".exif-column-1").get("children").size()&&0===n.one(".exif-column-2").get("children").size()&&(n.setStyle("display","none"),e.one(".sub-photo-right-row1").setStyle("borderBottom","none"));var s=this.get("exif")&&this.get("exif").getValue("camera")?{make:this.get("exif").getValue("cameraMake")||"",model:this.get("exif").getValue("cameraModel")||"",name:this.get("exif").getValue("camera")||"",type:this.get("exif").getValue("cameraType")||""}:null,l=this.get("location").getValue("levels"),r=!1;return this.get("location")&&this.get("location").getValue("hasGeo")&&l&&(r={},l.country&&(r.country=l.country.name),l.region&&(r.region=l.region.name),l.locality&&(r.city=l.locality.name),this.registerEventHandler(n.delegate("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"mapContainerClick"},e.Snowplough.getPhotoContextFromModel(this.get("photo")))}),".map-container")),this.registerEventHandler(n.delegate("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"locationNameClick"},e.Snowplough.getPhotoContextFromModel(this.get("photo")))}),".location-name-link"))),this.fire("subviewViewEvent","exifLoaded",{camera:s,geo:r}),s&&this.registerEventHandler(n.delegate("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"cameraNameClick"},e.Snowplough.getPhotoContextFromModel(this.get("photo")))}),".exif-camera-name")),this},setupProtomaps:function(){let t=this,o=this.get("container").one(".map-container");if(!o)return;let i=150,a=3,n=6,s=14,l=this.get("location"),r=this.get("linkToMap"),p=new e.PMTilesProtocol;e.MapLibre.addProtocol("pmtiles",p.tile);let h=new e.MapLibre.Map({container:o.getDOMNode(),style:{version:8,layers:e.MapTheme(this.appContext.lang),glyphs:`${e.config.flickr.maps.tile_providers.protomaps.font_path}/{fontstack}/{range}.pbf`,sources:{protomaps:{type:"vector",url:`${e.config.flickr.maps.tile_providers.protomaps.host}/${e.config.flickr.maps.tile_providers.protomaps.build}.json`}}},center:[l.getValue("longitude"),l.getValue("latitude")],zoom:a,attributionControl:!1,doubleClickZoom:!1,dragPan:!1,dragRotate:!1,keyboard:!1,scrollZoom:!1,touchPitch:!1,touchZoomRotate:!1,trackResize:!1}),d=o.get("clientWidth"),c=o.get("clientHeight");h.on("mouseover",(function(e){o.addClass("zoom-hovered"),o.removeClass("zoom-tightest"),h.zoomTo(n,{duration:i})})),h.on("mouseout",(function(e){o.removeClass("zoom-hovered"),o.removeClass("zoom-tightest"),h.zoomTo(a,{duration:i})})),h.on("mousemove",(function(e){let t=d/2-20,a=c/2-20,l=d/2+20,r=c/2+20;e.point.x>=t&&e.point.x<=l&&e.point.y>=a&&e.point.y<=r?h.getZoom()!==s&&(o.addClass("zoom-tightest"),o.removeClass("zoom-hovered"),h.zoomTo(s,{duration:i})):h.getZoom()!==n&&(o.addClass("zoom-hovered"),o.removeClass("zoom-tightest"),h.zoomTo(n,{duration:i}))})),r&&h.on("click",(function(e){t.appContext.flapp.navigate(r)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",h.resize.bind(h)))},setupMapHandlers:function(){var e,t,o,i,a=this.get("container"),n=this.get("location"),s={},l=window.devicePixelRatio>1;let r;n&&(e=n.getValue("staticMaps"))&&Object.keys(e).length&&(s={level1:e.zoom3[l?"retinaSrc":"src"],level2:e.zoom6[l?"retinaSrc":"src"],level3:e.zoom14[l?"retinaSrc":"src"]},e&&e.zoom3&&e.zoom3.width?(i=e.zoom3.width.toString(),i+="px"):i=this.appContext.adManager.userCanViewPhotoPageSidebar()?"304px":"245px",e&&e.zoom3&&(t=a.one(".zoom-level-2"),o=a.one(".zoom-level-3"),r=this.appContext.adManager.userCanViewPhotoPageSidebar()?`${i} 128px`:`${i} 100px`,a.one(".static-maps").setStyles({backgroundImage:"url("+s.level1+")",width:i,backgroundSize:r}).on("hover",(function(e){t.setStyles({backgroundImage:"url("+s.level2+")",opacity:1})}),(function(e){t.setStyle("opacity",0)})),a.one(".bullseye").on("hover",(function(e){o.setStyles({backgroundImage:"url("+s.level3+")",opacity:1})}),(function(e){o.setStyle("opacity",0)})),t.setStyles({width:i,backgroundSize:r}),o.setStyles({width:i,backgroundSize:r})))},getExtendedExif:function(){var t=this.get("exif")?this.get("exif").toJSON():{},o=e.clone(t.data),i=[];return o&&o.forEach((function(e){if(null!==e.value){if("Resolution Unit"===e.label||"Aperture"===e.label||"Exposure"===e.label||"Lens"===e.label||"Camera URL"===e.label||"Focal Length"===e.label||"ISOSetting"===e.label||"Flash"===e.label||"Exposure Program"===e.label||"Model"===e.label)return;"X-Resolution"!==e.label&&"Y-Resolution"!==e.label||(e.value=e.value+" dpi"),"Exposure Bias"===e.label&&(e.value=e.value+" EV"),i.push({label:e.label,value:e.value})}})),i},showMoreExif:function(){var t=this.get("container");t.one(".show-extended-exif").setHTML(this.intlMessage({intlName:"photo-page-scrappy.HIDE_EXIF"})),t.one(".show-extended-exif").addClass("hide-moreExif"),t.all(".extended-exif-item").show(),this.setViewDataOnHistory("showExpanded",!0),e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"expandExif"},e.Snowplough.getPhotoContextFromModel(this.get("photo")))},hideMoreExif:function(){var t=this.get("container");t.one(".show-extended-exif").setHTML(this.intlMessage({intlName:"photo-page-scrappy.SHOW_EXIF"})),t.one(".show-extended-exif").removeClass("hide-moreExif"),t.all(".extended-exif-item").hide(),this.setViewDataOnHistory("showExpanded",!1),e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"hideExif"},e.Snowplough.getPhotoContextFromModel(this.get("photo")))},handleLocationClick:function(){if(this.appContext.flipper.isFlipped("geotag-on-photo-page"))e.use(["fluid-modal-view","photo-geotag-modal-view"],function(){var t=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,dismissOnActionClick:!0,showCancelButton:!0,showCancelX:!1,title:"",actionButtonLabel:this.intlMessage({intlName:"photo-page-scrappy.SAVE_LOCATION"}),width:640,height:340,fullWindow:!0,subview:new e.Views["photo-geotag-modal-view"]({appContext:this.appContext,photoId:this.get("photo").getValue("id"),locationId:this.get("location").getValue("id")})}),o=this,i=o.get("container").one(".map-container")||o.get("container").one(".empty-map");t.show(),this.registerEventHandler(t.on("actionClick",(function(e){var t=this.templates("flickr-balls")({});i.append(t),o.appContext.getModelRegistry("photo-location-models").then((function(e){return e.remove(o.photoId),o.appContext.getModel("photo-location-models",o.photoId)})).then((function(e){o.set("location",e),o.buildContainer()})).catch((function(e){i.remove(t)}))})))}.bind(this));else{var t=this.get("photo"),o=t.getValue("id"),i="/photos/organize/?batch_geotag=1&ids="+o+"&from_geo_ids="+o;e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"locationEditClick"},e.Snowplough.getPhotoContextFromModel(t)),e.config.win.location=i}},handleError:function(e){return function(e){}},handleContainerClick:function(e){e.target.ancestor(".show-extended-exif",!0)?(e.preventDefault(),e.target.hasClass("hide-moreExif")?this.hideMoreExif():this.showMoreExif()):e.target.ancestor(".c-charm-item-location .add-location, .c-charm-item-location .edit-location",!0)?(e.preventDefault(),this.handleLocationClick()):e.target.ancestor(".show-settings",!0)&&(e.preventDefault(),this.openSettingsModal())},openSettingsModal:function(){let t;this.modalTemplateData.parentViewName="photo-page-sidebar-modal",t=this.templates("photo-charm-exif-scrappy")(this.modalTemplateData),this.exifSettingsModal=new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"search.CAMERA_SETTINGS"}),subview:new e.Views["photo-charm-exif-scrappy-view"]({appContext:this.appContext,photoId:this.photoId,nsid:this.nsid,isMobileExif:this.isMobileExif}),showFooter:!1,dismissOnOverlayClick:!0,showBodyLines:!0,classList:"photopage-sidebar-settings-modal"}).show()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-modal-view","querystring-parse-simple","exif-camera-map","hermes-template-photo-charm-exif-scrappy","hermes-template-flickr-balls","url","fluid-modal-view","map-theme"],optionalRequires:["hermes-core","maplibre-gl"],optional:["photo-stats-models"],langBundles:["common","photo-page-scrappy","search"]});YUI.add("hermes-template-sub-photo-right-stats",(function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,e,a){return" small-text"},3:function(n,l,t,e,a){return" super-small-text"},5:function(n,l,t,e,a){return'\t\t\t<span class="view-count-label">-</span>\n'},7:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(t,"if").call(null!=l?l:n.nullContext||{},null!=(o=null!=l?r(l,"engagement"):l)?r(o,"viewCount"):o,{name:"if",hash:{},fn:n.program(8,a,0),inverse:n.program(10,a,0),data:a,loc:{start:{line:7,column:3},end:{line:16,column:10}}}))?o:""},8:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<span class="view-count-label">\n\t\t\t\t\t'+n.escapeExpression((r(t,"intlNumber")||l&&r(l,"intlNumber")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=(o=null!=l?r(l,"engagement"):l)?r(o,"viewCount"):o,{name:"intlNumber",hash:{},data:a,loc:{start:{line:9,column:5},end:{line:9,column:40}}}))+"</span>\n"},10:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<span class="view-count-label">\n'+(null!=(o=r(t,"if").call(null!=l?l:n.nullContext||{},null!=l?r(l,"isMobileStats"):l,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:5},end:{line:14,column:12}}}))?o:"")+"\t\t\t\t0</span>\n"},11:function(n,l,t,e,a){return'\t\t\t\t\t\t<svg class="icon icon-view"><use xlink:href="#icon-view"></use></svg>\n'},13:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SINGULAR_VIEW"},data:a,loc:{start:{line:18,column:68},end:{line:18,column:127}}}))},15:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PLURAL_VIEW"},data:a,loc:{start:{line:18,column:178},end:{line:18,column:235}}}))},17:function(n,l,t,e,a){var o,r=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t<div class="stat-item like-count'+(null!=(o=s(t,"if").call(r,null!=l?s(l,"smallText"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:22,column:34},end:{line:22,column:69}}}))?o:"")+(null!=(o=s(t,"if").call(r,null!=l?s(l,"superSmallText"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:22,column:69},end:{line:22,column:115}}}))?o:"")+'">\n'+(null!=(o=s(t,"if").call(r,null!=l?s(l,"loadingView"):l,{name:"if",hash:{},fn:n.program(18,a,0),inverse:n.program(20,a,0),data:a,loc:{start:{line:23,column:3},end:{line:41,column:10}}}))?o:"")+"\t\t</div>\n"},18:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<span class="like-count-label">-</span>\n\t\t\t\t<span class="stats-label">\n\t\t\t\t\t'+n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{count:0,intlName:"likes.LIKES_LABEL"},data:a,loc:{start:{line:26,column:5},end:{line:26,column:57}}}))+"\n\t\t\t\t</span>\n"},20:function(n,l,t,e,a){var o,r=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return(null!=(o=s(t,"if").call(r,null!=(o=null!=(o=null!=(o=null!=l?s(l,"engagement"):l)?s(o,"reactions"):o)?s(o,"like"):o)?s(o,"count"):o,{name:"if",hash:{},fn:n.program(21,a,0),inverse:n.program(23,a,0),data:a,loc:{start:{line:29,column:4},end:{line:37,column:11}}}))?o:"")+'\t\t\t\t<span class="stats-label">\n\t\t\t\t\t'+n.escapeExpression((s(t,"intlMessage")||l&&s(l,"intlMessage")||n.hooks.helperMissing).call(r,{name:"intlMessage",hash:{count:null!=(o=null!=(o=null!=(o=null!=l?s(l,"engagement"):l)?s(o,"reactions"):o)?s(o,"like"):o)?s(o,"count"):o,intlName:"likes.LIKES_LABEL"},data:a,loc:{start:{line:39,column:5},end:{line:39,column:87}}}))+"\n\t\t\t\t</span>\n"},21:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\t<span class="like-count-label">\n\t\t\t\t\t\t'+n.escapeExpression((r(t,"intlNumber")||l&&r(l,"intlNumber")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=(o=null!=(o=null!=(o=null!=l?r(l,"engagement"):l)?r(o,"reactions"):o)?r(o,"like"):o)?r(o,"count"):o,{name:"intlNumber",hash:{},data:a,loc:{start:{line:31,column:6},end:{line:31,column:52}}}))+"\n\t\t\t\t\t</span>\n"},23:function(n,l,t,e,a){return'\t\t\t\t\t<span class="like-count-label">\n\t\t\t\t\t\t0\n\t\t\t\t\t</span>\n'},25:function(n,l,t,e,a){var o,r=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t<div class="stat-item fave-count'+(null!=(o=i(t,"if").call(r,null!=l?i(l,"smallText"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:44,column:34},end:{line:44,column:69}}}))?o:"")+(null!=(o=i(t,"if").call(r,null!=l?i(l,"superSmallText"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:44,column:69},end:{line:44,column:115}}}))?o:"")+'">\n'+(null!=(o=i(t,"if").call(r,null!=l?i(l,"loadingView"):l,{name:"if",hash:{},fn:n.program(26,a,0),inverse:n.program(28,a,0),data:a,loc:{start:{line:45,column:3},end:{line:57,column:10}}}))?o:"")+'\t\t\t<span class="stats-label">'+(null!=(o=(i(t,"ifCond")||l&&i(l,"ifCond")||s).call(r,null!=(o=null!=l?i(l,"engagement"):l)?i(o,"faveCount"):o,"===",1,{name:"ifCond",hash:{},fn:n.program(33,a,0),inverse:n.noop,data:a,loc:{start:{line:58,column:29},end:{line:58,column:139}}}))?o:"")+(null!=(o=(i(t,"ifCond")||l&&i(l,"ifCond")||s).call(r,null!=(o=null!=l?i(l,"engagement"):l)?i(o,"faveCount"):o,"!==",1,{name:"ifCond",hash:{},fn:n.program(35,a,0),inverse:n.noop,data:a,loc:{start:{line:58,column:139},end:{line:58,column:247}}}))?o:"")+"</span>\n\t\t</div>\n"},26:function(n,l,t,e,a){return'\t\t\t\t<span class="fave-count-label">-</span>\n'},28:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(t,"if").call(null!=l?l:n.nullContext||{},null!=(o=null!=l?r(l,"engagement"):l)?r(o,"faveCount"):o,{name:"if",hash:{},fn:n.program(29,a,0),inverse:n.program(31,a,0),data:a,loc:{start:{line:48,column:4},end:{line:56,column:11}}}))?o:""},29:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\t<span class="fave-count-label">\n\t\t\t\t\t\t'+n.escapeExpression((r(t,"intlNumber")||l&&r(l,"intlNumber")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=(o=null!=l?r(l,"engagement"):l)?r(o,"faveCount"):o,{name:"intlNumber",hash:{},data:a,loc:{start:{line:50,column:6},end:{line:50,column:41}}}))+"\n\t\t\t\t\t</span>\n"},31:function(n,l,t,e,a){return'\t\t\t\t\t<span class="fave-count-label">\n\t\t\t\t\t\t0\n\t\t\t\t\t</span>\n'},33:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SINGULAR_FAVE"},data:a,loc:{start:{line:58,column:69},end:{line:58,column:128}}}))},35:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PLURAL_FAVE"},data:a,loc:{start:{line:58,column:179},end:{line:58,column:236}}}))},37:function(n,l,t,e,a){return'\t\t\t<span class="comment-count-label">-</span>\n'},39:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(t,"if").call(null!=l?l:n.nullContext||{},null!=(o=null!=l?r(l,"engagement"):l)?r(o,"commentCount"):o,{name:"if",hash:{},fn:n.program(40,a,0),inverse:n.program(42,a,0),data:a,loc:{start:{line:66,column:3},end:{line:72,column:10}}}))?o:""},40:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<span class="comment-count-label">\n\t\t\t\t'+n.escapeExpression((r(t,"intlNumber")||l&&r(l,"intlNumber")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=(o=null!=l?r(l,"engagement"):l)?r(o,"commentCount"):o,{name:"intlNumber",hash:{},data:a,loc:{start:{line:68,column:4},end:{line:68,column:42}}}))+"</span>\n"},42:function(n,l,t,e,a){return'\t\t\t\t<span class="comment-count-label">\n\t\t\t\t0</span>\n'},44:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SINGULAR_COMMENT"},data:a,loc:{start:{line:74,column:71},end:{line:74,column:133}}}))},46:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PLURAL_COMMENT"},data:a,loc:{start:{line:74,column:187},end:{line:74,column:247}}}))},48:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t<div class="show-more-stats">'+n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_MORE_STATS"},data:a,loc:{start:{line:79,column:30},end:{line:79,column:91}}}))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,a){var o,r,s,i=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]},p='\n<div class="right-stats-details-container">\n\t<div class="stat-item view-count'+(null!=(o=c(t,"if").call(i,null!=l?c(l,"smallText"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:33},end:{line:3,column:68}}}))?o:"")+(null!=(o=c(t,"if").call(i,null!=l?c(l,"superSmallText"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:68},end:{line:3,column:114}}}))?o:"")+'">\n'+(null!=(o=c(t,"if").call(i,null!=l?c(l,"loadingView"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.program(7,a,0),data:a,loc:{start:{line:4,column:2},end:{line:17,column:9}}}))?o:"")+'\t\t<span class="stats-label">'+(null!=(o=(c(t,"ifCond")||l&&c(l,"ifCond")||u).call(i,null!=(o=null!=l?c(l,"engagement"):l)?c(o,"viewCount"):o,"===",1,{name:"ifCond",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:18,column:28},end:{line:18,column:138}}}))?o:"")+(null!=(o=(c(t,"ifCond")||l&&c(l,"ifCond")||u).call(i,null!=(o=null!=l?c(l,"engagement"):l)?c(o,"viewCount"):o,"!==",1,{name:"ifCond",hash:{},fn:n.program(15,a,0),inverse:n.noop,data:a,loc:{start:{line:18,column:138},end:{line:18,column:246}}}))?o:"")+"</span>\n\t</div>\n\n"+(null!=(o=(c(t,"isFlipped")||l&&c(l,"isFlipped")||u).call(i,"enable-likes",{name:"isFlipped",hash:{},fn:n.program(17,a,0),inverse:n.program(25,a,0),data:a,loc:{start:{line:21,column:1},end:{line:60,column:15}}}))?o:"")+'\n\t<div class="stat-item comment-count'+(null!=(o=c(t,"if").call(i,null!=l?c(l,"smallText"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:62,column:36},end:{line:62,column:71}}}))?o:"")+(null!=(o=c(t,"if").call(i,null!=l?c(l,"superSmallText"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:62,column:71},end:{line:62,column:117}}}))?o:"")+'">\n'+(null!=(o=c(t,"if").call(i,null!=l?c(l,"loadingView"):l,{name:"if",hash:{},fn:n.program(37,a,0),inverse:n.program(39,a,0),data:a,loc:{start:{line:63,column:2},end:{line:73,column:9}}}))?o:"")+'\t\t<span class="stats-label">'+(null!=(o=(c(t,"ifCond")||l&&c(l,"ifCond")||u).call(i,null!=(o=null!=l?c(l,"engagement"):l)?c(o,"commentCount"):o,"===",1,{name:"ifCond",hash:{},fn:n.program(44,a,0),inverse:n.noop,data:a,loc:{start:{line:74,column:28},end:{line:74,column:144}}}))?o:"")+(null!=(o=(c(t,"ifCond")||l&&c(l,"ifCond")||u).call(i,null!=(o=null!=l?c(l,"engagement"):l)?c(o,"commentCount"):o,"!==",1,{name:"ifCond",hash:{},fn:n.program(46,a,0),inverse:n.noop,data:a,loc:{start:{line:74,column:144},end:{line:74,column:258}}}))?o:"")+"</span>\n\t</div>\n</div>\n\n";return r=null!=(r=c(t,"showMoreStatsLink")||(null!=l?c(l,"showMoreStatsLink"):l))?r:u,s={name:"showMoreStatsLink",hash:{},fn:n.program(48,a,0),inverse:n.noop,data:a,loc:{start:{line:78,column:0},end:{line:80,column:22}}},o="function"==typeof r?r.call(i,s):r,c(t,"showMoreStatsLink")||(o=n.hooks.blockHelperMissing.call(l,o,s)),null!=o&&(p+=o),p},useData:!0}),e={};n.Array.each([],(function(l){var t=n.Template.get("hermes/"+l);t&&(e[l]=t)})),n.Template.register("hermes/sub-photo-right-stats",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,t(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-stats-photo",(function(t,n){var l=t.Template.Handlebars.revive({1:function(t,n,l,a,e){var s,i,o=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,c="function",u=t.escapeExpression,d=t.lambda,p=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\n\t<div class="photo-stats-basics">\n\t\t<div class="photo-stats-basics-left">\n\t\t\t<a href="'+u(typeof(i=null!=(i=p(l,"url")||(null!=n?p(n,"url"):n))?i:r)===c?i.call(o,{name:"url",hash:{},data:e,loc:{start:{line:5,column:12},end:{line:5,column:19}}}):i)+'" class="photo-thumbnail" style="background-image: url('+u(typeof(i=null!=(i=p(l,"photoUrl")||(null!=n?p(n,"photoUrl"):n))?i:r)===c?i.call(o,{name:"photoUrl",hash:{},data:e,loc:{start:{line:5,column:74},end:{line:5,column:86}}}):i)+');"></a>\n\t\t\t<div class="photo-info">\n\t\t\t\t<a href="'+u(typeof(i=null!=(i=p(l,"url")||(null!=n?p(n,"url"):n))?i:r)===c?i.call(o,{name:"url",hash:{},data:e,loc:{start:{line:7,column:13},end:{line:7,column:20}}}):i)+'" class="photo-title truncate">'+u(typeof(i=null!=(i=p(l,"title")||(null!=n?p(n,"title"):n))?i:r)===c?i.call(o,{name:"title",hash:{},data:e,loc:{start:{line:7,column:51},end:{line:7,column:60}}}):i)+'</a>\n\t\t\t\t<div class="photo-posted-date">\n'+(null!=(s=(p(l,"friendlyDateScrappySubphoto")||n&&p(n,"friendlyDateScrappySubphoto")||r).call(o,null!=n?p(n,"datePosted"):n,!1,!1,{name:"friendlyDateScrappySubphoto",hash:{},fn:t.program(2,e,0),inverse:t.noop,data:e,loc:{start:{line:9,column:5},end:{line:11,column:37}}}))?s:"")+'\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="photo-stats-basics-right">\n\t\t\t<div class="view-count"><i></i> '+u(d(null!=(s=null!=n?p(n,"basicStats"):n)?p(s,"viewCount"):s,n))+'</div>\n\t\t\t<div class="fave-count"><i></i> '+u(d(null!=(s=null!=n?p(n,"basicStats"):n)?p(s,"faveCount"):s,n))+'</div>\n\t\t\t<div class="comment-count"><i></i> '+u(d(null!=(s=null!=n?p(n,"basicStats"):n)?p(s,"commentCount"):s,n))+'</div>\n\t\t</div>\n\t</div>\n\n\t<div class="photo-stats-nav">\n\t\t<div class="nav-links">\n\t\t\t<div class="photo-stats-nav-link selected" data-link="views">'+u((p(l,"intlMessage")||n&&p(n,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"stats.RECENT_VIEWS"},data:e,loc:{start:{line:24,column:64},end:{line:24,column:109}}}))+'</div>\n\t\t\t<div class="photo-stats-nav-link" data-link="sources">'+u((p(l,"intlMessage")||n&&p(n,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"stats.SOURCES"},data:e,loc:{start:{line:25,column:57},end:{line:25,column:97}}}))+'</div>\n\t\t</div>\n\t\t<div class="photo-stats-nav-extras">\n\t\t\t<div class="date-picker">'+u(typeof(i=null!=(i=p(l,"prettyDateString")||(null!=n?p(n,"prettyDateString"):n))?i:r)===c?i.call(o,{name:"prettyDateString",hash:{},data:e,loc:{start:{line:28,column:28},end:{line:28,column:48}}}):i)+' <span></span></div>\n\t\t\t<div class="date-holder"></div>\n\t\t</div>\n\t</div>\n\n\t<div class="photo-stats-sections" data-showing="views">\n\n\t\t<div class="photo-stats-section" data-section="views">\n\t\t\t<div class="daily-views-graph">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="photo-stats-section" data-section="sources">\n\n\t\t\t<div class="source-breakdown-left'+(null!=(s=p(l,"unless").call(o,null!=n?p(n,"hasReferrers"):n,{name:"unless",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e,loc:{start:{line:42,column:36},end:{line:42,column:82}}}))?s:"")+'">\n\t\t\t\t<div class="no-sources">\n\t\t\t\t\t'+u((p(l,"intlMessage")||n&&p(n,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"stats.NO_SOURCES_TODAY"},data:e,loc:{start:{line:44,column:5},end:{line:44,column:54}}}))+'\n\t\t\t\t</div>\n\n\t\t\t\t<div class="sources-pie-chart pie-chart"></div>\n\t\t\t</div>\n\n\t\t\t<div class="source-breakdown-right'+(null!=(s=p(l,"unless").call(o,null!=n?p(n,"hasReferrers"):n,{name:"unless",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e,loc:{start:{line:50,column:37},end:{line:50,column:83}}}))?s:"")+'">\n\t\t\t\t<div class="sources-breakdown">\n\t\t\t\t\t<div class="sources-breakdown-header">\n\t\t\t\t\t\t<div>'+u((p(l,"intlMessage")||n&&p(n,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"stats.SOURCES"},data:e,loc:{start:{line:53,column:11},end:{line:53,column:51}}}))+"</div>\n\t\t\t\t\t\t<div>"+u((p(l,"intlMessage")||n&&p(n,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"stats.VISITS"},data:e,loc:{start:{line:54,column:11},end:{line:54,column:50}}}))+'</div>\n\t\t\t\t\t\t<div>%</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sources-breakdown-list"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n\n'},2:function(t,n,l,a,e){var s=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\t\t\t\t\t\t"+t.escapeExpression((s(l,"intlMessage")||n&&s(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlDate:null!=n?s(n,"intlDate"):n,intlName:null!=n?s(n,"intlName"):n},data:e,loc:{start:{line:10,column:6},end:{line:10,column:57}}}))+"\n"},4:function(t,n,l,a,e){return" no-results"},6:function(t,n,l,a,e){var s=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\n\t<div class="no-stats-available">\n\t\t'+t.escapeExpression((s(l,"intlMessage")||n&&s(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"stats.NO_RECENT_PHOTO_STATS_AVAILABLE"},data:e,loc:{start:{line:68,column:2},end:{line:68,column:66}}}))+"\n\t</div>\n\n"},compiler:[8,">= 4.3.0"],main:function(t,n,l,a,e){var s,i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return null!=(s=i(l,"if").call(null!=n?n:t.nullContext||{},null!=n?i(n,"actuallyHasSomeStats"):n,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.program(6,e,0),data:e,loc:{start:{line:1,column:0},end:{line:71,column:7}}}))?s:""},useData:!0}),a={};t.Array.each([],(function(n){var l=t.Template.get("hermes/"+n);l&&(a[n]=l)})),t.Template.register("hermes/stats-photo",(function(n,e){return(e=e||{}).partials=e.partials?t.merge(a,e.partials):a,l(n,e)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("stats-helper",(function(e){"use strict";var t;t=YUI.Env.isServer?require("querystring").stringify:function(e){var t,r,a,o=[];for(t in e)if(e.hasOwnProperty(t))if(Array.isArray(e[t]))for(r=0,a=e[t].length;r<a;r++)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t][r]));else o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&")},e.StatsHelper=function(){},e.StatsHelper.prototype.moveToFrontOfArray=function(e,t){var r=-1;return e.forEach((function(e,a){e===t&&(r=a)})),r>-1&&e.unshift(e.splice(r,1)[0]),e},e.StatsHelper.prototype.moveToEndOfArray=function(e,t){var r=-1;return e.forEach((function(e,a){e===t&&(r=a)})),r>-1&&(e.push(e[r]),e.splice(r,1)),e},e.StatsHelper.prototype.whichChild=function(e){for(var t=0;null!==(e=e.previousElementSibling);)++t;return t},e.StatsHelper.prototype.getRoundedRectanglePath=function(e,t,r,a,o,n,s){var c,i=e[0],p=e[1],u=t[0],f=t[1];return c="M"+(i+r)+","+p,c+="h"+(u-2*r),o?c+="a"+r+","+r+" 0 0 1 "+r+","+r:(c+="h"+r,c+="v"+r),c+="v"+(f-2*r),s?c+="a"+r+","+r+" 0 0 1 "+-r+","+r:(c+="v"+r,c+="h"+-r),c+="h"+(2*r-u),n?c+="a"+r+","+r+" 0 0 1 "+-r+","+-r:(c+="h"+-r,c+="v"+-r),c+="v"+(2*r-f),a?c+="a"+r+","+r+" 0 0 1 "+r+","+-r:(c+="v"+-r,c+="h"+r),c+="z"},e.StatsHelper.prototype.getIdFromParams=function(e){var r=t(e);return""===r&&(r=1),r},e.StatsHelper.prototype.convertStorageTotalToRealNumber=function(e){var t=e;return-1===e&&(t=-1),t},e.StatsHelper.prototype.convertStorageAmountToRealNumber=function(e){var t,r,a;return e=parseInt(e,10)||1,t=Math.ceil(Math.log(e)/Math.LN10),r=Math.floor(t/3),a=e/Math.pow(10,3*r),a=Math.floor(100*a)/100},e.StatsHelper.prototype.convertNaturalLanguageDateToRealDateTimestamp=function(t,r){var a,o="";switch(a=e.moment(),r){case"today":o=a;break;case"yesterday":o=a.subtract(1,"days");break;case"thisweek":case"week":o=a.startOf("week");break;case"lastweek":o=a.subtract(1,"weeks").startOf("week");break;case"twoweeksago":case"theweekbeforethat":o=a.subtract(2,"weeks").startOf("week");break;case"threeweeksago":case"theweekbeforetheweekbeforethat":o=a.subtract(3,"weeks").startOf("week")}return""!==o&&(o=new e.TimezoneHelper(t,o.format("X"),"+00:00").toFormat("YYYY-MM-DD")),o}}),"@VERSION@",{affinity:"",requires:["flickr-promise","event-custom","moment","timezone-helper"],optional:[]});YUI.add("flickr-stats-photo-daily-views-fetcher",(function(e,s){"use strict";e.namespace("ModelFetchers")["flickr-stats-photo-daily-views"]={run:function(t,a){var o=this;return new e.FlickrPromise({apiResponse:a.callAPI("flickr.stats.photo.getGraphData",this._processParams(t)),modelRegistry:a.getModelRegistry("stats-photo-daily-views-models")}).then((function(e){return o._processResponse(e,t)}),e.FetcherErrorLogger(s))},_processResponse:function(s,t){var a,o,i,r,n,d,l=s.apiResponse.stats.graphdata,c=s.modelRegistry,p={},m={};return d={views:0,favs:0,comments:0},a={id:t.id},l&&(p=l,Object.keys(l).forEach((function(e,s){p[e].burp||p[e].nodot?delete p[e]:(i?(i>e&&(i=e),n<e&&(n=e)):(i=e,n=e),p[e].views||(p[e].views=0),p[e].comments||(p[e].comments=0),p[e].favs||(p[e].favs=0),p[e].views=parseInt(p[e].views,10),p[e].favs=parseInt(p[e].favs,10),p[e].comments=parseInt(p[e].comments,10),d.views+=p[e].views,d.favs+=p[e].favs,d.comments+=p[e].comments)}))),a.days=p,a.oldestDate=i,a.newestDate=n,a.totals=d,c.exists(a.id)?(m=c.getValue("days"),a.days=e.merge(a.days,m),o=c.getValue("oldestDate"),i>o&&(a.oldestDate=o),r=c.getValue("newestDate"),n>r&&(a.newestDate=r),a.totals+=e.merge(a.totals,c.getValue("totals")),c.setValues(a.id,a)):c.add(a),a},_processParams:function(e){return{id:e.id,photo_id:e.photoId}}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["stats-photo-daily-views-models"]});YUI.add("stats-photo-daily-views-models",(function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ModelFetchers["flickr-stats-photo-daily-views"].run(e,this.appContext)}},attributes:{days:{},oldestDate:{},newestDate:{},totals:{}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-stats-photo-daily-views-fetcher"]});