YUI.add("history-helper",(function(t,e){var r=require("hermes-core/flog")(e);t.HistoryHelper={setData:function(t,e,i){var o={};if("undefined"!=typeof history&&history.replaceState){void 0!==history.state&&null!==history.state&&void 0!==history.state.flickr&&(o=history.state.flickr),void 0===o[t]&&(o[t]={}),o[t][e]=i;try{history.replaceState({flickr:o},"")}catch(t){}return!0}return r.warn("Failed attempt to store history data",{namespace:t,key:e}),!1},getData:function(t,e){var r;if("undefined"!=typeof history&&void 0!==history.state&&null!==history.state&&void 0!==history.state.flickr&&void 0!==(r=history.state.flickr[t])&&void 0!==r[e])return r[e]}}}),"@VERSION@",{requires:[],optionalRequires:["hermes-core"]});YUI.add("flickr-view",(function(e,t){var i=require("hermes-core/flog")(t);e.FlickrView=e.Base.create("flickrView",e.Base,[],{viewState:null,subviews:{},subviewConfig:null,_eventHandles:null,initializer:function(e){return this.appContext=e.appContext,delete e.appContext,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.set("headContainer",""),this.isBuilt=!1,this.isActivated=!1,this.isErrorBuilt=!1,this.subviewsWithLoadingError={},this._params=e||{},this.isMobile=e.isMobile,this.subviews={},this._eventHandles=[],this.appContext&&!this.appContext.viewTiming&&(this.appContext.viewTiming={}),this.appContext&&(this.appContext.viewTiming[this.name]={initialize:0,loadState:0,buildContainer:0,buildHeadContainer:0,activate:0}),this},initialize:function(t){var r=this;return this.initializeStartTime=Date.now(),this.isErrorBuilt=!1,this.serverRendered=!(!t||!t.serverRendered)&&t.serverRendered,r.beforeDestroy&&(r.beforeDestroyHandler=r.before("destroy",r.beforeDestroy)),YUI.Env.isServer||this.registerEventHandler(this.appContext.flapp.after("activeViewChange",(function(e){r.normalizedActivate()}))),this.on("parentViewEvent",this.handleParentViewEvent.bind(this,this.name)),this.setupSubviews().then((function(){var e,t;if(r.isErrorBuilt){if(r.error.is404)throw r.error;throw t=new Error("Subview of "+r.name+" causing loadState error"),r.error&&(t.message+=": "+r.error.message,r.error.method&&(t.message+=", method="+r.error.method),t.message+=" | subview failure: "+r.error.fatal,r.error.wasDealbreaker&&(t.message+=" dealbreaker failed "),r.error.wasMultipleSubviews&&(t.message+=" multiple subviews failed "),t.fatal=r.error.fatal),t}if(r.loadStateTimingStart=Date.now(),!(e=r.loadState()))throw new Error("View "+r.name+" loadState function does not return a promise");return e})).then((function(){if(r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].loadState=Date.now()-r.loadStateTimingStart),YUI.Env.isServer||!r.get("container").hasClass("requiredToShowOnServer")||t&&t.wasDeferred){var e=Date.now();try{r.buildContainer()}catch(e){throw i.error("Error building",{topic:r.name,err:e}),r.fire("loadingError",{message:e.message,fatal:!0,wasDealbreaker:!0}),r.buildErrorContainer(),r.isErrorBuilt=!0,e}if(r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].buildContainer=Date.now()-e),r.get("isRootView")){r._buildFullRootViewAdditionalViewClasses();var n=r.get("rootViewAdditionalViewClasses");n&&n.length>0&&r.get("container").addClass(n.join(" "))}}r.isBuilt=!0,r.isErrorBuilt=!1,r.fire("loadingSuccess")}),(function(e){throw r.fire("loadingError",{message:e.message,fatal:e.fatal,is404:e.is404,wasMultipleSubviews:e.wasMultipleSubviews,wasDealbreaker:e.wasDealbreaker}),r.buildErrorContainer(),r.isErrorBuilt=!0,i.error("Error loading state",{topic:r.name,err:e}),e})).then((function(){var e,t;return r.isErrorBuilt||r.get("isActiveViewAgnostic")||(e=Date.now(),r._buildFullHeadMeta(),r.buildHeadContainer=Date.now()-e),YUI.Env.isServer||(r.shouldDeferSubviews&&r._setupDeferredSubviewsInitialization(),t=Date.now(),r.normalizedActivate(),r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].activate=Date.now()-t)),r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].initialize=Date.now()-r.initializeStartTime),r}),(function(e){throw YUI.Env.isServer||(r.shouldDeferSubviews&&r._setupDeferredSubviewsInitialization(),r.normalizedActivate()),e})).catch(e.PromiseCatcher(this.name))},render:function(){return this},buildHeadContainer:function(){return this.set("headContainer",""),this},_buildSubviewHeadContainers:function(){var e=[],t=this,i="<script";return Object.keys(this.subviews).forEach((function(i){-1===e.indexOf(t.subviews[i].get("headContainer"))&&e.push(t.subviews[i].get("headContainer"))})),e.sort((function(e,t){var r=e.toLowerCase().indexOf(i)>-1,n=t.toLowerCase().indexOf(i)>-1;return r&&!n?1:!r&&n?-1:0})).join("")},_buildFullHeadMeta:function(){var e;return this.buildHeadContainer(),e=(e=this.get("headContainer")).concat(this._buildSubviewHeadContainers()),this.set("headContainer",e.concat("")),this},setRootViewAdditionalViewClasses:function(){return this.set("rootViewAdditionalViewClasses",[]),this},_buildFullRootViewAdditionalViewClasses:function(){var e=[];return e=e.concat(this._buildSubviewRootViewAdditionalViewClasses()),this.set("rootViewAdditionalViewClasses",e),this},_buildSubviewRootViewAdditionalViewClasses:function(){this.setRootViewAdditionalViewClasses();var e=this.get("rootViewAdditionalViewClasses")||[],t=this;return Object.keys(this.subviews).forEach((function(i){var r=t.subviews[i]._buildSubviewRootViewAdditionalViewClasses();e=e.concat(r)})),e},_setupDeferredSubviewsInitialization:function(){setTimeout(function(){var t=e.config.win.document.body;t.scrollTop>0||t.clientHeight-50<=t.scrollHeight?this._loadDeferredSubviews():(this.deferredViewScrollListener=e.globalEvents.subscribe("window:scroll",this._loadDeferredSubviews.bind(this)),this.registerEventHandler(this.deferredViewScrollListener))}.bind(this),10)},_loadDeferredSubviews:function(){this.loadingDeferred||(this.loadingDeferred=!0,this._removeDeferredViewScrollListener(),this._recursivelyLoadDeferredSubview(0,!1))},_removeDeferredViewScrollListener:function(){this.deferredViewScrollListener&&(this.deferredViewScrollListener.detach(),this.deferredViewScrollListener=null)},_recursivelyLoadDeferredSubview:function(t,r){var n=Object.keys(this.subviewConfig||[]).filter(function(e){var t=this.subviewConfig[e];return!0!==t.disabled&&(("function"!=typeof t.disabled||!t.disabled.call(this,this._params))&&this.subviewConfig[e].canDefer)}.bind(this)),a=this;if(t<=n.length-1){var s,o=n[t],u=e.merge(this._params,this.subviewConfig[o]);u.container=null,u.wasDeferred=!0,i.log("Loading deferred view",{topic:a.name,view:o});try{s=this.appContext.getView(o,u)}catch(e){return void this._onDeferredViewLoadingError(t,r,e)}s.then((function(e){if(!e)return i.error("An error occured trying to load the deferred view.",{topic:a.name}),r?(t++,r=!1):r=!0,void a._recursivelyLoadDeferredSubview(t,r);e.initialize(u).then((function(){e.on("subviewViewEvent",(function(t){t&&t.details&&t.details.length&&a.onSubviewEvent.call(a,e.name,t.details)})),u&&u.additionalViewClasses&&u.additionalViewClasses.forEach((function(t){e.get("container").addClass(t)})),a._addDeferredViewToDOM(e),e.normalizedActivate(),t++,a._recursivelyLoadDeferredSubview(t,!1)})).catch(a._onDeferredViewLoadingError.bind(this,t,r))}))}},_onDeferredViewLoadingError:function(e,t,r){i.error("An error occured trying to initialize the deferred view",{topic:this.name,err:r}),t?(e++,t=!1):t=!0,this._recursivelyLoadDeferredSubview(e,t)},_addDeferredViewToDOM:function(e){if(e){var t=this.get("container").one("."+e.name),r=e.get("container");t&&r?t.replace(r):i.error("Could not add view to DOM in _addDeferredViewToDOM",{topic:this.name,view:e.name})}else i.error("Non-view passed to _addDeferredViewToDOM.",{topic:this.name})},attachKeyEvent:function(e,t,i){return this.registerEventHandler(this.appContext.getKeyboardManager().on(e,i||this._params.keyEventScope||"*",t.bind(this)))},setContainerHTML:function(e){var t=this;return this.get("container").setHTML(e),YUI.Env.isServer||(this.get("container").generateID(),Object.keys(this.subviews||{}).forEach((function(e,i,r){var n=t.subviews[e],a=n.get("container"),s=n.getId?n.getId():a._yuid,o=t.get("container").one("#"+s);o&&o.replace(a)}))),this},setupSubviews:function(){var t,r=this,n=[],a=[],s=[],o=this.appContext.flipper.isFlipped("enable-non-blocking-on-non-required-views"),u={};return this.subviewConfig?(Object.keys(this.subviewConfig).forEach((function(e){!0!==r.subviewConfig[e].disabled&&("function"==typeof r.subviewConfig[e].disabled&&r.subviewConfig[e].disabled.call(r,r._params)||(u[e]=r.subviewConfig[e]))})),Object.keys(u).map((function(l){t=YUI.Env.isServer?u[l].requiredToShowOnServer||u[l].requiredToShow||r.appContext.forceServerRender&&!u[l].neverShowOnServer:u[l].requiredToShowOnClient||u[l].requiredToShow;var c=e.merge(r._params,u[l]);if(!r.shouldDeferSubviews&&c.canDefer&&delete c.canDefer,r.shouldDeferSubviews&&c.canDefer)i.log("Deferring subview.",{topic:r.name,view:l}),(o?s:n).push(r.instantiateSubview(l,c).then((function(e){return e.setContainerHTML(""),e.get("container").addClass("deferred-view"),e})));else if(t){(o?a:n).push(r.instantiateSubview(l,c).then((function(e){return e.wasRequiredToShow=!0,r.setupSubview(l,c,e)})))}else{(o?s:n).push(r.instantiateSubview(l,c).then((function(t){t.wasRequiredToShow=!1,YUI.Env.isServer||e.soon((function(){r.setupSubview(l,c,t)}))})))}})).filter((function(e){return!!e})),o?(a.length?e.Promise.all(a):e.Promise.resolve()).then((function(){s.length&&!YUI.Env.isServer&&e.Promise.all(s).then((function(){r.buildContainer(),r.normalizedActivate()}))})):n.length?e.Promise.all(n):e.Promise.resolve()):e.Promise.resolve()},registerSubview:function(e,t){t||(t=e.name),this.subviews[t]=e},instantiateSubview:function(t,r){var n=this;return r.container=this.getContainer({isSubview:!0,subviewName:t,subviewParams:r}),this.appContext.getView(t,r).then(null,(function(){return i.log("getView failed to load view, retrying once more."),n.appContext.getView(t,r)})).then((function(e){return e.on("loadingError",n.handleSubviewLoadingError.bind(n)),e.on("loadingSuccess",n.handleSubviewLoadingSuccess.bind(n)),e.on("subviewViewEvent",n.handleSubviewEvent.bind(n,e.name)),n.registerSubview(e,t),e._params&&(e._params.keyEventScope=n._params.keyEventScope),e})).catch(e.PromiseCatcher(this.name))},onSubviewEvent:function(e,t){return!0},onParentViewEvent:function(e,t){return!0},handleSubviewEvent:function(e,t){var i=t&&t.details||[];!1!==this.onSubviewEvent(e,i)&&this.fire.apply(this,["subviewViewEvent"].concat(i))},handleParentViewEvent:function(e,t){var i,r=t&&t.details||[];if(!1!==this.onParentViewEvent(e,r))for(i in this.subviews)this.subviews[i].fire.apply(this.subviews[i],["parentViewEvent"].concat(r))},handleSubviewLoadingSuccess:function(e){this.subviewsWithLoadingError[e.target.name]&&delete this.subviewsWithLoadingError[e.target.name]},handleSubviewLoadingError:function(e){var t;this.subviewConfig[e.target.name].dealbreaker&&(this.hasDealbreakerSubviewLoadingError=!0),this.subviewsWithLoadingError[e.target.name]=e.details[0],this.isErrorBuilt||(t=Object.keys(this.subviewsWithLoadingError),(this.hasDealbreakerSubviewLoadingError||t.length>=2)&&(this.error={message:"",fatal:!0},t.forEach(function(e,i){var r=this.subviewsWithLoadingError[e];i!==t.length-1?this.error.message+="["+e+"] "+r.message+" | ":this.error.message+="["+e+"] "+r.message,r.is404&&(this.error.is404=!0),r.method&&(this.error.method+=r.method),r.fatal||(this.error.fatal=!1)}.bind(this)),this.fire("loadingError",{message:this.error.message,fatal:this.error.fatal,is404:this.error.is404,wasDealbreaker:this.hasDealbreakerSubviewLoadingError,wasMultipleSubviews:t&&t.length>=2}),this.buildErrorContainer(),this.isErrorBuilt=!0,i.error("subview forced the error loading state",{topic:this.name,view:e.target.name})))},setupSubview:function(t,r,n){var a=this;return(r=e.merge(r||{})).alreadyRendered=a.alreadyRendered,n.set("isActiveViewAgnostic",a.get("isActiveViewAgnostic")),n.initialize(r).then((function(){return a.subviews[t]}),(function(e){i.error("Error getting/initializing view",{topic:a.name,err:e,view:t})})).catch(e.PromiseCatcher(this.name))},attachEvents:function(t){if(t){var i={},r=this;Object.keys(t).forEach((function(n){var a,s;a={selector:(n.match(/([\w-_#\.\[\]~|$^*= ]+) /i)||[])[1]||"[data-action]",type:(n.match(/([\w]+):/i)||[])[1]||"click",action:(n.match(/:([\w]+)/i)||[])[1]||"_default_"},i[s=a.selector+"/"+a.type]||(i[s]={},r.registerEventHandler(r.get("container").delegate(a.type,(function(t){var n,o,u,l;if(n=t.target.ancestor(a.selector,!0),"click"===a.type&&(o=t.target.ancestor(".server-only-link",!0)))return!0===t.metaKey||!0===t.ctrlKey?void 0:void(e.config.win.location=o.get("href"));if(n&&(l=(u=n.getData()||{}).action||"_default_",i[s].hasOwnProperty(l))){if(!i[s][l])throw new Error('Handler for "'+l+'" UI event is undefined');i[s][l].call(r,t,u)}}),a.selector))),i[s][a.action]=t[n]}))}},registerEventHandler:function(t){if(e.Lang.isFunction(t.detach))return this._eventHandles.push(t),t},detachRegisteredEvent:function(t){var i=this._eventHandles.indexOf(t);-1!==i&&e.Lang.isFunction(t.detach)&&(t.detach(),this._eventHandles.splice(i,1))},detachRegisteredEvents:function(){this._eventHandles.length&&(this._eventHandles.forEach((function(e){e.detach()})),this._eventHandles=[])},generateSignature:function(t,i){var r={},n=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t};return e.Object.each(i,(function(e,t){"container"!==t&&"appContext"!==t&&"context"!==t&&"cspNonce"!==t&&"parentView"!==t&&"keyEventScope"!==t&&void 0!==e&&"function"!=typeof e&&(r[t]="object"==typeof e?1:e)})),t+"__"+Object.keys(r).sort().map((function(e){var t,i;try{t=encodeURIComponent(e)}catch(i){t=encodeURIComponent(n(e))}try{i=encodeURIComponent(r[e])}catch(i){t=encodeURIComponent(n(r[e]))}return t+"_"+i})).join("__")},getContainer:function(t){(t=t||{}).subviewParams=t.subviewParams||{};var i,r,n,a,s=["view",t.subviewName||t.viewName||this.name],o=t.subviewName?t.subviewParams.additionalViewClasses:this.additionalViewClasses,u=t.subviewParams.preferredViewTag||"div",l={},c=[];return YUI.Env.isServer?this.appContext.request&&this.appContext.request.randomClasses&&(l=this.appContext.request.randomClasses):e.config.flickr&&e.config.flickr.randomClasses&&(l=e.config.flickr.randomClasses),c=Object.keys(l),(!t.isSubview||t.subviewParams.requiredToShowOnServer||t.subviewParams.requiredToShow)&&YUI.Env.isServer&&s.push("requiredToShowOnServer"),this.theme&&s.push(this.theme),e.Lang.isArray(o)&&o.length?s=s.concat(o):e.Lang.isFunction(o)&&(a=o.call(this),e.Lang.isArray(a)&&a.length&&(s=s.concat(a))),t.subviewName||s.push(e.FlickrView.ROOT_VIEW_CLASS_NAME),c.includes(t.subviewName)&&(s.push(l[t.subviewName]),s=s.filter((e=>e!==t.subviewName))),s=' class="'+s.join(" ")+'"',t.subview?i=t.subview.getId():t.subviewName&&t.subviewParams&&(i=this.generateSignature(t.subviewName,t.subviewParams)),YUI.Env.isServer?r={html:"",setHTML:function(e){this.html=e},getHTML:function(e){return this.html},get:function(e){switch(e){case"innerHTML":return this.html;case"outerHTML":return"<"+u+" "+s+(n?' style="'+Object.keys(n).reduce((function(e,t,i,r){return e+t+": "+n[t]+(i<r.length-1?"; ":"")}),"")+'"':"")+(i?' data-view-signature="'+i+'"':"")+">"+this.html+"</"+u+">"}return null},hasChildNodes:function(){return!1},addClass:function(e){""!==(e=e.trim())&&(s=s.slice(0,-1)+" "+e+'"')},hasClass:function(e){return s.split('"')[1].split(" ").indexOf(e)>-1},removeClass:function(e){var t=s.split('"')[1].split(" "),i=t.indexOf(e);-1!==i&&(t.splice(i,1),s=' class="'+t.join(" ")+'"')},setStyle:function(e,t){n||(n={}),n[e]=t},setStyles:function(e){n||(n={}),Object.keys(e).forEach((function(t){n[t]=e[t]}))},appendChild:function(e){this.html+=e.html},all:function(){return{each:function(){}}},one:function(){return null}}:(i&&(r=this.get("container").one('[data-view-signature="'+i+'"]')),r?r.removeAttribute("data-view-signature"):r=e.Node.create("<"+u+" "+s+"></"+u+">")),r},renderSubviews:function(){var e=this;return Object.keys(this.subviews).forEach((function(t,r,n){try{e.subviews[t].render()}catch(r){i.error("Error rendering view",{topic:e.name,err:r,view:t})}})),{}},templates:function(t){var r,n,a=e.Template.get("hermes/"+t),s=this.getLangBundles(),o=this;if(s.locales=this.appContext.lang||this.defaultLang,"function"!=typeof a)throw i.error("Template not found",{topic:this.name,template:t}),new Error("Template not found: "+t);return this.appContext.flipper&&(r=this.appContext.flipper),this.appContext.segments&&(n=this.appContext.segments.segments),function(e){return!(e=e||{}).flippers&&r&&(e.flippers=r.toJSON()),!e.segments&&n&&(e.segments=n),e.isMobile=o._params.isMobile,e.cspNonce=o._params.cspNonce,o.appContext.forceServerRender&&(e.isServerRendered=!0),Object.keys(o.subviewConfig||{}).forEach((function(t){e[t]||(e[t]=o.subviews[t]?o.subviews[t].get("container"):"")})),a(e,{data:{intl:s,flippers:e.flippers,segments:e.segments}})}},loadState:function(){return e.Promise.resolve()},updateHead:function(){null!==this.get("headContainer")&&(e.one("head").all('[data-dynamic="true"]').remove(!0),e.one("head").append(this.get("headContainer")))},canActivate:function(){var e=!1;return(this.isBuilt||this.isErrorBuilt)&&(this.isActivated||this.isErrorActivated||this.isActiveAndInDOM()&&(e=!0)),e},isActiveAndInDOM:function(){var e=this.get("container");return e&&(this.get("isActiveViewAgnostic")||this.appContext.flapp.get("activeView").get("container").contains(e))&&e.inDoc()},activate:function(){return this},activateSubviews:function(){var e,t;for(e in this.subviews){t=this.subviews[e];try{t.normalizedActivate(),t.recursivelyActivateSubviews()}catch(t){i.error("Error activating view",{topic:this.name,err:t,view:e})}}return this},recursivelyActivateSubviews:function(e){var t,r,n=e||this.subviews;for(t in n)if((r=n[t]).canActivate()){r.normalizedActivate();try{r.normalizedActivate(),this.recursivelyActivateSubviews(r.subviews)}catch(e){i.error("Error activating view",{topic:this.name,err:e,view:r})}}return this},normalizedActivate:function(){this.canActivate()&&(this.isErrorBuilt?(this.isErrorActivated=!0,this.activateErrorContainer()):(this.activate(),this.isActivated=!0,this.activateSubviews()))},onCSSLoaded:function(t){var i=this;this.appContext.isCSSLoaded?t.call(i):this.registerEventHandler(e.on("css-loaded",(function(){t.call(i)})))},buildErrorContainer:function(){this.setContainerHTML("")},activateErrorContainer:function(){var e=this,t=this.get("container").one(".retry");t&&t.on("click",(function(t){t.preventDefault(),e.isErrorActivated=!1,e.initialize()}))},setViewDataOnHistory:function(t,i){return e.HistoryHelper.setData(this.name,t,i)},getViewDataFromHistory:function(t){return e.HistoryHelper.getData(this.name,t)},getTrackingSegments:function(){return{}},updateDataLayer:function(){},reload:function(t,i){var r=this,n=[];if(!t.length)return e.Promise.resolve();for(var a=0;a<t.length;a++)n.push(this.appContext.getModelRegistry(t[a]));return e.Promise.all(n).then((function(e){for(var t=0;t<e.length;t++)Array.isArray(i)?e[t].remove(i[t]):e[t].remove(i);YUI.Env.isServer||r.appContext.flapp.navigate(r.appContext.getLocation().href)})).catch(e.PromiseCatcher(this.name))},destroy:function(t){this.set("destroyed",!0);var i,r=this.get("container");if(this.detachRegisteredEvents(),!YUI.Env.isServer&&this.isActiveAndInDOM()){this.setRootViewAdditionalViewClasses();var n=this.get("rootViewAdditionalViewClasses")||[],a=e.one("."+e.FlickrView.ROOT_VIEW_CLASS_NAME);n&&a&&n.forEach((function(e){a.removeClass(e)}))}return this._removeDeferredViewScrollListener(),e.Node&&r&&(r.detach&&r.detach(),t&&(t.remove||t.delete)&&r.remove&&r.remove(!0),this.set("container",null)),this.destroySubviews(),i=e.FlickrView.superclass.destroy.call(this),this.beforeDestroyHandler&&this.beforeDestroyHandler.detach(),i},destroySubviews:function(){var e=this;Object.keys(this.subviews||{}).forEach((function(t,i,r){e.subviews[t].destroy()}))},bringIntoFocus:function(){var e=this.get("container"),t=e.getAttribute("tabindex")||null;e.setAttribute("tabindex","-1"),e.focus(),e.blur(),t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")},setContainerWithTemplate:function(e,t){this.setContainerHTML(this.templates(e)(t))},getAdditionalSpContexts:function(){return[]},godMessage:e.godMessage},{ATTRS:{container:{value:"",setter:function(e){return e||this.getContainer()}},trackedElementIDs:{value:[],validator:function(t){return e.Lang.isArray(t)}},rapidConf:{value:{},validator:function(t){return e.Lang.isObject(t)}},isActiveViewAgnostic:{value:!1},isRootView:{value:!1},rootViewAdditionalViewClasses:{value:[],validator:function(t){return e.Lang.isArray(t)}},isCSSLoaded:{getter:function(){return!!this.appContext.isCSSLoaded}}},create:function(t,r,n,a,s){e.namespace("Views"),e.Views[t]&&i.warn("A view with this name already exists. Did you mean to redefine it?",{view:t}),a.destroy&&a.destroy!==e.FlickrView.prototype.destroy&&i.warn("`destroy` method was overridden. Did you mean `destructor`?",{view:t}),a.initialize&&a.initialize!==e.FlickrView.prototype.initialize&&i.warn("`initialize` method was overridden. Did you mean `initializer`?",{view:t});try{e.Views[t]=e.Base.create(t,r,n,a,s)}catch(r){throw i.warn("`Base.create` method failed, maybe because of Chrome 51?",{view:t}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("`Base.create` method failed, maybe because of Chrome 51?",e.config.win.location.href,r),r}if(r&&r!==e.FlickrView&&r.prototype&&r.prototype.langBundles){var o,u=(e.Views[t].prototype.langBundles||[]).concat(r.prototype.langBundles);o=e.Array.dedupe(u),e.Views[t].prototype.langBundles=o}return e.Views[t]},ROOT_VIEW_CLASS_NAME:"flickr-view-root-view"}),e.mix(e.FlickrView.prototype,e.Localizable)}),"@VERSION@",{requires:["base","template-base","flickr-promise","handlebars-base","handlebars-helpers","localizable","history-helper","god-message"],optionalRequires:["hermes-core"]});YUI.add("banner-view",(function(i,e){require("hermes-core/flog")(e);i.FlickrView.create(this.name,i.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){this.params=i,this.subview=this.params.subview},loadState:function(){return i.Promise.resolve()},buildContainer:function(){},activate:function(){var e=this,t=this.get("container");return this.subviewParent=t,this.subview?(this.subview.on("dismiss",(function(t){if(i.Snowplough){var s={category:"banner",action:"dismiss",label:e.subview.name};t.property&&(s.property=t.property),t.value&&(s.value=t.value),i.Snowplough.sendStructuredEvent(s)}e.dismiss()})),this.subview.initialize().then((function(){return e.setupSubview()}))):this},setupSubview:function(){var i=this,e=i.subview.get("container");return i.subviewParent.empty(),i.subviewParent.appendChild(e),i.subview.on("activated",(function(){i.fire("subviewActivated")})),i.subview.activate(),i.subview.activateSubviews(),this},dismiss:function(){this.fire("dismissed")},handleContainerClose:function(){this.subview&&this.subview.close&&this.subview.close()}})}),"@VERSION@",{requires:["flickr-view"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("hermes-lang-common",(function(e,t){e.Intl.add("hermes/common","en-US",{SIGN_UP:[{type:0,value:"Sign Up"}],YOU:[{type:0,value:"You"}],PHOTOSTREAM:[{type:0,value:"Photostream"}],SETS:[{type:0,value:"Sets"}],ALBUMS:[{type:0,value:"Albums"}],MAP:[{type:0,value:"Map"}],FAVORITES:[{type:0,value:"Favorites"}],GALLERIES:[{type:0,value:"Galleries"}],COLLECTIONS:[{type:0,value:"Collections"}],ARCHIVES:[{type:0,value:"Archives"}],TAGS:[{type:0,value:"Tags"}],PHOTOS_OF:[{type:0,value:"Photos of"}],PROFILE:[{type:0,value:"Profile"}],POPULAR:[{type:0,value:"Popular"}],EXPLORE:[{type:0,value:"Explore"}],ACTIVITY:[{type:0,value:"Recent activity"}],STATS:[{type:0,value:"Stats"}],ORGANIZE:[{type:0,value:"Organize"}],HELP:[{type:0,value:"Help"}],SETTINGS:[{type:0,value:"Settings"}],SIGN_OUT:[{type:0,value:"Sign Out"}],FLICKRMAIL:[{type:0,value:"FlickrMail"}],ERROR:[{type:0,value:"Error"}],OK:[{type:0,value:"OK"}],OOPS:[{type:0,value:"Oops!"}],SIGN_IN:[{type:0,value:"Sign in"}],FORGET_IT:[{type:0,value:"Forget it"}],WARNING:[{type:0,value:"Warning"}],DONE:[{type:0,value:"Done"}],ZOINKS:[{type:0,value:"Zoinks!"}],CANCEL:[{type:0,value:"Cancel"}],ON:[{type:0,value:"On"}],OFF:[{type:0,value:"Off"}],ABOUT:[{type:0,value:"About"}],JOBS:[{type:0,value:"Jobs"}],BLOG:[{type:0,value:"Blog"}],APPS:[{type:0,value:"Apps"}],BRAND:[{type:0,value:"Brand"}],DEVELOPERS:[{type:0,value:"Developers"}],STATUS:[{type:0,value:"Status"}],COMMUNITY_GUIDELINES:[{type:0,value:"Community guidelines"}],REPORT_ABUSE:[{type:0,value:"Report abuse"}],PRIVACY:[{type:0,value:"Privacy"}],TERMS:[{type:0,value:"Terms"}],YAHOO_SAFELY:[{type:0,value:"Yahoo Safely"}],FEEDBACK:[{type:0,value:"Feedback"}],MOBILE:[{type:0,value:"Mobile"}],APP_GARDEN:[{type:0,value:"App Garden"}],COMMUNITY:[{type:0,value:"Community"}],API_DOC:[{type:0,value:"API Doc"}],DEVELOPER_GUIDE:[{type:0,value:"Developer Guide"}],DEVELOPER_BLOG:[{type:0,value:"Developer Blog"}],HELP_FORUM:[{type:0,value:"Help forum"}],GUIDELINES:[{type:0,value:"Guidelines"}],NUMBER:[{type:2,value:"num",style:null}],RETRY:[{type:0,value:"Retry"}],EDIT:[{type:0,value:"Edit"}],MORE:[{type:0,value:"More"}],DELETE:[{type:0,value:"Delete"}],LOADING:[{type:0,value:"Loading"}],FOLLOW:[{type:0,value:"Follow"}],FOLLOWING:[{type:0,value:"Following"}],UNFOLLOW:[{type:0,value:"Unfollow"}],FRIEND:[{type:0,value:"Friend"}],FRIENDS:[{type:0,value:"Friends"}],FAMILY:[{type:0,value:"Family"}],PUBLIC:[{type:0,value:"Public"}],FRIENDS_AND_FAMILY:[{type:0,value:"Friends & Family"}],FRIEND_AND_FAMILY:[{type:0,value:"Friend & Family"}],ALL:[{type:0,value:"All"}],A_YAHOO_COMPANY:[{type:0,value:"Flickr, a Yahoo company"}],A_YAHOO_COMPANY_WITH_LINK:[{type:0,value:'Flickr, <a href="https://info.yahoo.com">a Yahoo company</a>'}],A_YAHOO_COMPANY_WITH_TRACKED_LINK:[{type:0,value:'Flickr, <a href="https://info.yahoo.com" data-track="footer-yahoo">a Yahoo company</a>'}],CONFIRMATION:[{type:0,value:"Confirmation"}],FAVORITE:[{type:0,value:"Favorite"}],SEARCH:[{type:0,value:"Search"}],CONFIRM:[{type:0,value:"Confirm"}],SELECT:[{type:0,value:"Select"}],NEW:[{type:0,value:"New"}],LOADING_WITH_ELLIPSES:[{type:0,value:"Loading..."}],NONE:[{type:0,value:"None"}],TITLE:[{type:0,value:"Title"}],DESCRIPTION:[{type:0,value:"Description"}],DECLINE:[{type:0,value:"Decline"}],ACCEPT:[{type:0,value:"Accept"}],CIRCA:[{type:0,value:"Circa"}],SOMETIME_IN:[{type:0,value:"Sometime in..."}],JANUARY:[{type:0,value:"January"}],FEBRUARY:[{type:0,value:"February"}],MARCH:[{type:0,value:"March"}],APRIL:[{type:0,value:"April"}],MAY:[{type:0,value:"May"}],JUNE:[{type:0,value:"June"}],JULY:[{type:0,value:"July"}],AUGUST:[{type:0,value:"August"}],SEPTEMBER:[{type:0,value:"September"}],OCTOBER:[{type:0,value:"October"}],NOVEMBER:[{type:0,value:"November"}],DECEMBER:[{type:0,value:"December"}],SAVE:[{type:0,value:"Save"}],PLEASE_TRY_AGAIN:[{type:0,value:"Please try again"}],YES:[{type:0,value:"Yes"}],SQUARE:[{type:0,value:"Square"}],THUMBNAIL:[{type:0,value:"Thumbnail"}],SMALL:[{type:0,value:"Small"}],MEDIUM:[{type:0,value:"Medium"}],LARGE:[{type:0,value:"Large"}],XLARGE:[{type:0,value:"X-Large"}],ORIGINAL:[{type:0,value:"Original"}],REPLACE:[{type:0,value:"Replace"}],SAVING:[{type:0,value:"Saving"}],REPLACING:[{type:0,value:"Replacing"}],JOIN:[{type:0,value:"Join"}],SELECTED:[{type:6,value:"count",options:{one:{value:[{type:7},{type:0,value:" selected"}]},other:{value:[{type:7},{type:0,value:" selected"}]}},offset:0,pluralType:"cardinal"}],PREVIEW:[{type:0,value:"Preview"}],DATE_TAKEN:[{type:0,value:"Date Taken"}],DATE_POSTED:[{type:0,value:"Date Posted"}],DATE_UPLOADED:[{type:0,value:"Date Uploaded"}],PEOPLE:[{type:0,value:"People"}],BETA:[{type:0,value:"Beta"}],INVALID_DATE:[{type:0,value:"Invalid Date."}],INVALID_DATE_TAKEN:[{type:0,value:"Invalid Date Taken."}],INVALID_DATE_POSTED:[{type:0,value:"Invalid Date Posted."}],INVALID_DATE_UPLOADED:[{type:0,value:"Invalid Date Uploaded."}],FUTURE_DATE_POSTED:[{type:0,value:"Date Posted is set to the future."}],FUTURE_DATE_UPLOADED:[{type:0,value:"Date Uploaded is set to the future."}],INVALID_DATE_VALUE:[{type:0,value:"One or more of the dates you entered was invalid."}],INVALID_DATE_TAKEN_VALUE:[{type:0,value:"Date Taken value is invalid."}],INVALID_DATE_POSTED_VALUE:[{type:0,value:"Date Posted value is invalid."}],INVALID_DATE_UPLOADED_VALUE:[{type:0,value:"Date Uploaded value is invalid."}],JOIN_FLICKR:[{type:0,value:"Join Flickr"}],GET_PRO:[{type:0,value:"Get Pro"}],GET_PRO_SHORT:[{type:0,value:"Get Pro"}],DATE_UPLOADED_BEFORE_ACCOUNT:[{type:0,value:"Date Uploaded must be after your account creation date of "},{type:3,value:"intlDate",style:"long"},{type:0,value:"."}],DOWNLOAD:[{type:0,value:"Download"}],CHOOSE_VALID_DATE:[{type:0,value:"Please choose a valid date."}],CHANGE:[{type:0,value:"Change"}],FUTURE_DATE_TAKEN:[{type:0,value:"Date Taken is set to the future."}],BY_USER:[{type:0,value:"by "},{type:1,value:"user"}],BY_YOU:[{type:0,value:"by YOU!"}],PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC:[{type:0,value:"There was a problem uploading your photo. Please try again."}],PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE:[{type:0,value:"Looks like this photo has an invalid file type. Upload a photo that is either a PNG or JPG."}],PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE:[{type:0,value:"Looks like this photo is too large to upload. The largest photo size we can upload is 250 MB."}],PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT:[{type:0,value:"Select only one photo to upload."}],PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY:[{type:0,value:'Looks like this photo doesn’t meet the minimum requirements to get printed. Please choose a photo that’s at least 975 &times; 825 pixels. Learn more about <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567" target="_blank">requirements</a> for print products.'}],PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE:[{type:0,value:'Sorry, we cannot print photos with a CMYK or ProPhoto RGB colorspace. We recommend photos with an sRGB color space. <a href="https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33" target="_blank">Learn more</a>.'}],PHOTO_SELECTOR_BACK_TO_ALBUM_LIST:[{type:0,value:"Back to album list"}],PHOTO_SELECTOR_BACK_TO_CATEGORY_LIST:[{type:0,value:"Back to category list"}],PHOTO_SELECTOR_BACK_TO_SEARCH_LIST:[{type:0,value:"Back to search list"}],PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS:[{type:0,value:"No public photos."}],PHOTO_SELECTOR_EMPTY_PHOTOS:[{type:0,value:"No photos."}],PHOTO_SELECTOR_NO_ALBUMS:[{type:0,value:"No albums."}],MARKETPLACE:[{type:0,value:"Marketplace"}],USERS_FAVES:[{type:1,value:"who"},{type:0,value:"’s favorites"}],USERS_ALBUMS:[{type:1,value:"who"},{type:0,value:"’s albums"}],USERS_GALLERIES:[{type:1,value:"who"},{type:0,value:"’s galleries"}],USERS_GROUPS:[{type:1,value:"who"},{type:0,value:"’s groups"}],LOAD_MORE_RESULTS:[{type:0,value:"Load more results"}],CREATE_AN_ACCOUNT:[{type:0,value:"Create an account"}],SIGN_IN_MESSAGE:[{type:0,value:"Sign in to Flickr using your Yahoo account to get started."}],MISMATCHED_NSID_ERROR:[{type:0,value:'Something went wrong. Click "OK" to reload the page, or "Cancel" if you want to continue to browse the page (you won’t be able to perform any actions, however).'}],NETWORK_CONNECTIVITY_ISSUE:[{type:0,value:'Something went wrong reading data from our server.  Please verify your network settings and browser plugin/extension configurations.<br><br>Click "OK" to reload the page, or "Cancel" if you want to continue to browse the page (you may not be able to perform any actions, however).'}],IE_STORAGE_ISSUE:[{type:0,value:"Something went wrong displaying images in your browser.  Please verify your browser settings at <b>Tools > Internet Options > General tab, Browsing history, “Settings” button > caches and databases</b>.<br><br>Click “OK” to reload the page, or “Cancel” if you want to continue to browse the page (you may not be able to perform any actions, however)."}],PHOTO_REMOVE_ERROR:[{type:0,value:"Something went wrong removing the photo...please try again."}],LEARN_MORE:[{type:0,value:"Learn more"}],LEARN_MORE_ABOUT_PRO:[{type:0,value:"Learn more about Pro"}],EVERYTHING:[{type:0,value:"Everything"}],ALPHA:[{type:0,value:"Alpha"}],BACK:[{type:0,value:"Back"}],UNTITLED:[{type:0,value:"Untitled"}],HIDE_PHOTOS_FROM_PERSON:[{type:0,value:"Temporarily hide all photos from this person"}],SHOW_MORE:[{type:0,value:"Show more"}],CHOOSE_FILE:[{type:0,value:"Choose file"}],PHOTO_BOOKS:[{type:0,value:"Photo books"}],WALL_ART:[{type:0,value:"Wall art"}],UPLOADING:[{type:0,value:"Uploading"}],NUMERIC_PROGRESS_COUNT:[{type:1,value:"progress"},{type:0,value:" of "},{type:1,value:"total"}],UPLOAD_DROP_TARGET:[{type:0,value:"Let go! We’ll take it from here."}],DRAG_AND_DROP:[{type:0,value:"You can drag and drop photos anywhere on this page"}],OR:[{type:0,value:"or"}],SELECT_FILES_TO_UPLOAD:[{type:0,value:"Select files to upload"}],INSTALL:[{type:0,value:"Install"}],INSTALL_FLICKR_UPLOADER_FOR_MAC:[{type:0,value:"Install Flickr Uploadr for Mac to quickly and safely backup your entire photo collection."}],INSTALL_FLICKR_UPLOADER_FOR_WINDOWS:[{type:0,value:"Install Flickr Uploadr for Windows to quickly and safely backup your entire photo collection."}],FLICKR_IS_ALMOST_CERTAINLY:[{type:0,value:"Flickr is almost certainly the best online photo management and sharing application in the world. Show off your favorite photos and videos to the world, securely and privately show content to your friends and family, or blog the photos and videos you take with a cameraphone."}],TOGGLE_SLIDESHOW:[{type:0,value:"Toggle slideshow"}],UPLOAD_MORE_INFO:[{type:0,value:'For details about our supported file formats, <a href="https://flickrhelp.com/hc/en-us/articles/4404079649300-Flickr-upload-requirements" target="_blank">click here</a>.'}],UPLOAD_MORE_INFO_WITH_LINK:[{type:0,value:'For details about our supported file formats, <a href="'},{type:1,value:"supportURL"},{type:0,value:'" target="_blank">click here</a>.'}],UPLOAD_ERROR_TITLE:[{type:0,value:"Uh oh..."}],UPLOAD_ERROR_CATEGORY_INVALID:[{type:0,value:'Either we don’t support these file types, or the files are damaged. <a href="https://flickrhelp.com/hc/en-us/articles/4404079649300-Flickr-upload-requirements" target="_blank">Click here</a> for more info.'}],UPLOAD_ERROR_CATEGORY_INVALID_WITH_LINK:[{type:0,value:'Either we don’t support these file types, or the files are damaged. <a href="'},{type:1,value:"supportURL"},{type:0,value:'" target="_blank">Click here</a> for more info.'}],UPLOAD_ERROR_CATEGORY_GENERIC:[{type:0,value:'These files failed to upload. You might try uploading them again. <a href="https://flickrhelp.com/hc/en-us/articles/4404079649300-Flickr-upload-requirements" target="_blank">Click here</a> for more info.'}],UPLOAD_ERROR_CATEGORY_GENERIC_WITH_LINK:[{type:0,value:'These files failed to upload. You might try uploading them again. <a href="'},{type:1,value:"supportURL"},{type:0,value:'" target="_blank">Click here</a> for more info.'}],TRY_MDOT:[{type:0,value:"Try Flickr optimized for your mobile device"}],VIDEO_NOT_SUPPORTED:[{type:0,value:"I’m sorry. Your browser doesn’t support HTML5 video."}],UNBLOCK:[{type:0,value:"Unblock"}],START_SLIDESHOW:[{type:0,value:"Start slideshow"}],EACH_FLICKR_ACCOUNT_HAS_STORAGE:[{type:0,value:"Each Flickr account comes with 1,000GB of free photo storage."}],BUY_LICENSE:[{type:0,value:"License"}],BUY_PHOTO:[{type:0,value:"Buy photo"}],BUY:[{type:0,value:"Buy"}],LICENSE_PHOTO:[{type:0,value:"License photo"}],HAVE_YAHOO_ACCOUNT:[{type:0,value:"Have a Yahoo account?"}],SIGN_UP_WITH_YAHOO:[{type:0,value:"Sign up with Yahoo"}],SIGN_INTO_FLICKR:[{type:0,value:"Sign into Flickr"}],NEVER_DELETE_WITH_ONE_TB:[{type:0,value:"Never delete a photo again with one terabyte of free storage."}],CLICK_BUTTON_THIRD_PARTY:[{type:0,value:"Clicking this button will take you to a third party website."}],LICENSE_TITLE_0:[{type:0,value:"All rights reserved"}],LICENSE_DESC_0:[{type:0,value:"You must request permission from the creator to use this work."}],LICENSE_TITLE_1:[{type:0,value:"Attribution-NonCommercial-ShareAlike (CC BY-NC-SA 2.0)"}],LICENSE_DESC_1:[{type:0,value:"You can use this work, but only in a non-commercial way, so long as credit is given to the creator. You must then allow your work to be used under the same terms."}],LICENSE_TITLE_2:[{type:0,value:"Attribution-NonCommercial (CC BY-NC 2.0)"}],LICENSE_DESC_2:[{type:0,value:"You can use this work, but only in a non-commercial way, so long as credit is given to the creator."}],LICENSE_TITLE_3:[{type:0,value:"Attribution-NonCommercial-NoDerivs (CC BY-NC-ND 2.0)"}],LICENSE_DESC_3:[{type:0,value:"You can use this work, in its original form without any modifications and only in a non-commercial way, so long as credit is given to the creator."}],LICENSE_TITLE_4:[{type:0,value:"Attribution (CC BY 2.0)"}],LICENSE_DESC_4:[{type:0,value:"You can use this work so long as credit is given to the creator."}],LICENSE_TITLE_5:[{type:0,value:"Attribution-ShareAlike (CC BY-SA 2.0)"}],LICENSE_DESC_5:[{type:0,value:"You can use this work so long as credit is given to the creator. You must then allow your work to be used under the same terms."}],LICENSE_TITLE_6:[{type:0,value:"Attribution-NoDerivs (CC BY-ND 2.0)"}],LICENSE_DESC_6:[{type:0,value:"You can use this work, in its original form without any modifications, so long as credit is given to the creator."}],LICENSE_TITLE_7:[{type:0,value:"No known restrictions"}],LICENSE_DESC_7:[{type:0,value:"The individual or organization posting the work is unaware of any restrictions. You should review the work prior to proceeding with use."}],LICENSE_TITLE_8:[{type:0,value:"U.S. government works"}],LICENSE_DESC_8:[{type:0,value:"Copyright protection is not available for any work of the United States Government."}],LICENSE_TITLE_9:[{type:0,value:"Public Domain Dedication (CC0)"}],LICENSE_DESC_9:[{type:0,value:"You can use this work since the copyright is no longer enforced."}],LICENSE_TITLE_10:[{type:0,value:"Public Domain Work"}],LICENSE_DESC_10:[{type:0,value:"You can use this work since the copyright has expired."}],TRENDING:[{type:0,value:"Trending"}],GROUP_YOUR_BEST_SHOT:[{type:0,value:"Your Best Shot 2015"}],GROUP_YOUR_BEST_SHOT_2016:[{type:0,value:"Your Best Shot 2016"}],DELETED_USER:[{type:0,value:"deleted"}],EXPLORE_SLOW:[{type:0,value:"We’re having some trouble displaying Explore at the moment. Please try again."}],MODULES_BLOCKED:[{type:0,value:'Something went wrong loading required modules to display this page.  Please disable any browser extensions that may be blocking the page resources.<br><br>After disabling extensions, click "OK" to reload the page, or "Cancel" if you want to continue to browse the page (you may not be able to perform any actions, however).'}],HOME:[{type:0,value:"Home"}],MAIN:[{type:0,value:"Main"}],SECONDARY:[{type:0,value:"Secondary"}],FILTER:[{type:0,value:"Filter"}],CLOSE:[{type:0,value:"Close"}],USER_ICON:[{type:0,value:"user icon"}],GROUP_ICON:[{type:0,value:"group icon"}],AD_ICON:[{type:0,value:"ad icon"}],ADD_TO_FAVORITES:[{type:0,value:"Add to Favorites"}],LEFT_ARROW:[{type:0,value:"Left arrow"}],RIGHT_ARROW:[{type:0,value:"Right arrow"}],DONT_SHOW_IN_FEED:[{type:0,value:"Don’t show in my feed"}],SHOW_IN_FEED:[{type:0,value:"Show in my feed"}],SEARCH_FOR_SIMILAR_PHOTOS:[{type:0,value:"Search for similar photos"}],SEARCH_FOR_SIMILAR_PHOTOS_WITH_TERM:[{type:0,value:"Search for similar photos with original search term"}],FAVES_SHORT:[{type:0,value:"Faves"}],GROUP_BAN_USER:[{type:0,value:"Ban user from the group"}],GROUP_BAN_USER_REMOVE_PHOTOS:[{type:0,value:"Ban user and remove their photos from the group"}],GROUP_REMOVE_USER:[{type:0,value:"Remove user from the group"}],GROUP_REMOVE_USER_REMOVE_PHOTOS:[{type:0,value:"Remove user and their photos from the group"}],REFRESH:[{type:0,value:"Refresh"}],ALMOST_DONE:[{type:0,value:"Almost done..."}],GROUPS:[{type:0,value:"Groups"}],"404_PHOTOSTREAM_DELETED":[{type:0,value:"It appears the photostream you seek no longer exists."}],"404_PHOTOSTREAM_NONEXISTENT":[{type:0,value:"It appears the photostream you seek doesn’t exist."}],"404_PROFILE_DELETED":[{type:0,value:"It appears the profile you seek no longer exists."}],"404_PROFILE_NONEXISTENT":[{type:0,value:"It appears the profile you seek doesn’t exist."}],"404_PHOTO_VIDEO_NONEXISTENT":[{type:0,value:"It appears the photo or video you seek no longer exists."}],"404_PHOTO_VIDEO_PRIVATE":[{type:0,value:"It appears you don’t have permission to view this photo or video."}],"404_ALBUM_NONEXISTENT":[{type:0,value:"It appears the album you seek doesn’t exist."}],"404_ALBUM_PRIVATE":[{type:0,value:"It appears you don’t have permission to view this album."}],"404_GROUP_NONEXISTENT":[{type:0,value:"It appears the group you seek doesn’t exist."}],"404_GROUP_PRIVATE":[{type:0,value:"It appears you don’t have permission to view this group."}],"404_GROUP_TOPIC_NONEXISTENT":[{type:0,value:"It appears the discussion topic you seek doesn’t exist."}],"404_GROUP_REPLY_NONEXISTENT":[{type:0,value:"It appears the discussion reply you seek doesn’t exist."}],"404_EXPLORE_NONEXISTENT":[{type:0,value:"It appears there are no photos for the requested date."}],"404_PERSON_NONEXISTENT":[{type:0,value:"It appears the account you seek doesn’t exist."}],"404_DOWNLOAD_NONEXISTENT":[{type:0,value:"It appears the download you seek doesn’t exist."}],"404_GALLERY_NONEXISTENT":[{type:0,value:"It appears the gallery you seek doesn’t exist."}],DISMISS:[{type:0,value:"Dismiss"}],BLURB:[{type:0,value:"Blurb"}],ALPHA_GROUP_SHARE_FEEDBACK:[{type:0,value:'This new Flickr feature is only visible to Alpha Group members. Please share your feedback <a href="'},{type:1,value:"url"},{type:0,value:'" target="_blank">here</a>.'}],JUSTIFIED_VIEW:[{type:0,value:"Justified view"}],THUMBNAIL_VIEW:[{type:0,value:"Thumbnail view"}],TILE_VIEW:[{type:0,value:"Tile view"}],LARGE_VIEW:[{type:0,value:"Large view"}],ITEM_COUNT_FORMATTED:[{type:6,value:"itemCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" item"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" items"}]}},offset:0,pluralType:"cardinal"}],PHOTO_COUNT_FORMATTED:[{type:6,value:"photoCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" photo"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" photos"}]}},offset:0,pluralType:"cardinal"}],VIDEO_COUNT_FORMATTED:[{type:6,value:"videoCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" video"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"}],VIEW_COUNT_FORMATTED:[{type:6,value:"viewCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" view"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" views"}]}},offset:0,pluralType:"cardinal"}],COMMENT_COUNT_FORMATTED:[{type:6,value:"commentCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" comment"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" comments"}]}},offset:0,pluralType:"cardinal"}],FAVE_COUNT_FORMATTED:[{type:6,value:"faveCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" fave"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" faves"}]}},offset:0,pluralType:"cardinal"}],ALBUM_LABEL:[{type:0,value:"Album"}],GALLERY_LABEL:[{type:0,value:"Gallery"}],BY_USER_WITH_URL:[{type:0,value:'by <a href="'},{type:1,value:"userUrl"},{type:0,value:'">'},{type:1,value:"username"},{type:0,value:"</a>"}],BY_USER_WITH_URL_TARGET_BLANK:[{type:0,value:'by <a href="'},{type:1,value:"userUrl"},{type:0,value:'" target="_blank">'},{type:1,value:"username"},{type:0,value:"</a>"}],ADD_ALL_CAPS:[{type:0,value:"ADD"}],ADD:[{type:0,value:"Add"}],ITEMS:[{type:0,value:"Items"}],FLICKR_LOVES_OLD_SCHOOL_PROS:[{type:0,value:"Flickr ♥ our Old School Pros"}],MODIFIED_FROM_WITH_LICENSE:[{type:0,value:'Modified from <a href="'},{type:1,value:"userUrl"},{type:0,value:'">'},{type:1,value:"user"},{type:0,value:'</a>, <a href="'},{type:1,value:"licenseUrl"},{type:0,value:'">'},{type:1,value:"licenseName"},{type:0,value:"</a>"}],PHOTO_BY_WITH_LICENSE:[{type:0,value:'Photo by <a href="'},{type:1,value:"userUrl"},{type:0,value:'">'},{type:1,value:"user"},{type:0,value:'</a>, <a href="'},{type:1,value:"licenseUrl"},{type:0,value:'">'},{type:1,value:"licenseName"},{type:0,value:"</a>"}],PHOTOS_BY_MULTIPLE_WITH_LICENSE:[{type:0,value:'Photos by <a href="'},{type:1,value:"user1Url"},{type:0,value:'">'},{type:1,value:"user1"},{type:0,value:'</a>, <a href="'},{type:1,value:"user2Url"},{type:0,value:'">'},{type:1,value:"user2"},{type:0,value:'</a>, and <a href="'},{type:1,value:"user3Url"},{type:0,value:'">'},{type:1,value:"user3"},{type:0,value:'</a>, <a href="'},{type:1,value:"licenseUrl"},{type:0,value:'">'},{type:1,value:"licenseName"},{type:0,value:"</a>"}],PHOTOS_BY:[{type:0,value:"Photos by:"}],LOG_OUT:[{type:0,value:"Log out"}],REMIND_ME_LATER:[{type:0,value:"Remind me later"}],GET_FLICKR_PRO:[{type:0,value:"Get Flickr Pro"}],ERROR_UH_OH:[{type:0,value:"Uh oh!"}],DR_SOMETHING_WENT_WRONG_ERROR_MESSAGE:[{type:0,value:'Please check your browser extensions and ad blockers and try again. If the problem persists, please reach out to us at <a href="https://flickrhelp.com" target="_blank">https://flickrhelp.com</a>.'}],SUPPORT:[{type:0,value:"Support"}],GOT_IT:[{type:0,value:"Got it"}],VIDEO_STREAMING_OFF:[{type:0,value:'Video streaming is currently unavailable. More info: <a href="'},{type:1,value:"url"},{type:0,value:'">link</a>'}],VIDEO_STILL_PROCESSING:[{type:0,value:'This video is being processed. Processing may take a while. More info: <a href="'},{type:1,value:"url"},{type:0,value:'">link</a>'}],HAVE_A_FLICKR_ACCOUNT:[{type:0,value:"Have a Flickr account?"}],HI_MESSAGE_GREETING:[{type:0,value:"Hi "},{type:1,value:"username"},{type:0,value:","}],MYSTERIOUS_PLACE:[{type:0,value:"A mysterious place with no name"}],NEW_TITLE:[{type:0,value:"New!"}],GO_BACK_BUTTON:[{type:0,value:"Go back"}],EVENTS:[{type:0,value:"Events"}],SMUG_FLICKR_FOOTER_ATTRIBUTION:[{type:0,value:'<a class="smug-link" href="'},{type:1,value:"smugUrl"},{type:0,value:'">SmugMug</a>+<a class="flickr-link" href="'},{type:1,value:"flickrUrl"},{type:0,value:'">Flickr</a>.'}],CONNECTING_PEOPLE_THROUGH_PHOTOGRAPHY:[{type:0,value:"Connecting people through photography."}],UPGRADE_PRO_HIDE_ADS:[{type:0,value:"Upgrade to Flickr Pro to hide these ads"}],LOAD_MORE:[{type:0,value:"Load more"}],VIEW_MORE_LOWER:[{type:0,value:"view more"}],VIEW_LESS_LOWER:[{type:0,value:"view less"}],AD_INTERSTITIAL_TIMER:[{type:0,value:"Continue in "},{type:1,value:"adTimerStartCount"},{type:0,value:"s"}],WHATS_NEW:[{type:0,value:"What’s new?"}],VIEW_MORE:[{type:0,value:"View more"}],SMALL_PORTRAIT:[{type:0,value:"Small Portrait"}],MEDIUM_PORTRAIT:[{type:0,value:"Medium Portrait"}],LARGE_PORTRAIT:[{type:0,value:"Large Portrait"}],PLEASE_WAIT:[{type:0,value:"Please wait"}],FLICKR_PRO:[{type:0,value:"Flickr Pro"}],SEND:[{type:0,value:"Send"}],REPORT_QUESTION:[{type:0,value:"What would you like to report?"}],REPORT_ISSUES:[{type:0,value:"Which of the following issues does this content have?"}],REPORT_SPAM:[{type:0,value:"Spam, scam, or fraud"}],REPORT_EXPLICIT:[{type:0,value:"Explicit or disturbing content"}],REPORT_IMAGE_OF_ME:[{type:0,value:"There’s an image of me I want removed"}],REPORT_COPYRIGHT:[{type:0,value:"Intellectual property violation (DMCA)"}],REPORT_OTHER:[{type:0,value:"Other concern"}],REPORT_MODERATION:[{type:0,value:"Improperly moderated"}],REPORT_CHILDREN:[{type:0,value:"Harmful content involving children"}],REPORT_HATE:[{type:0,value:"Hate speech"}],REPORT_SELF_HARM:[{type:0,value:"Suicide or self-harm"}],REPORT_DANGEROUS:[{type:0,value:"Dangerous organization or individual"}],REPORT_INTIMATE:[{type:0,value:"Intimate content posted without my consent"}],REPORT_SUBJECT:[{type:0,value:"Request to remove an image where I am a subject"}],REPORT_BULLYING:[{type:0,value:"Bullying or harassment"}],REPORT_ILLEGAL:[{type:0,value:"Prohibited or illegal content"}],REPORT_COMMERCIAL:[{type:0,value:"Commercial activity on a free account"}],REPORT_BULLYING_PHOTO:[{type:0,value:"Bullying or harassment in a photo"}],REPORT_BULLYING_COMMENT:[{type:0,value:"Bullying or harassment in a comment"}],REPORT_NON_SAFE_CONTENT:[{type:0,value:"Non-safe content in a free account"}],CONTINUE_POLICY_PAGE:[{type:0,value:"Continue to policy page"}],CONTINUE_ARTICLE:[{type:0,value:"Continue to article"}],MORE_ABUSE_INFO:[{type:0,value:"Please share any additional information about the issues you are concerned with on this page. (Optional)"}],DMCA_MESSAGE:[{type:0,value:"Issues of infringement are handled for us by specialists within the Flickr Trust & Safety team."}],DMCA_MESSAGE_INFO:[{type:0,value:'For information on how to file a Notice of Infringement, consult <a href="'},{type:1,value:"helpUrl"},{type:0,value:'">this help article</a>.'}],INTIMATE_REPORT_MESSAGE:[{type:0,value:"Finding out that someone put your private images or videos online without your consent can be devastating."}],INTIMATE_REPORT_MORE:[{type:0,value:'Please visit <a href="'},{type:1,value:"helpUrl"},{type:0,value:'">here</a> and provide all pertinent details, and while we review your report, <a href="'},{type:1,value:"orgUrl"},{type:0,value:'">here are some organizations</a> that can offer help should you need it.'}],SUBJECT_REPORT_MESSAGE:[{type:0,value:'Image removal requests are handled by specialists within our Trust & Safety team. For information about your options consult <a href="'},{type:1,value:"helpUrl"},{type:0,value:'">this help article</a>.'}],CHILDREN_REPORT_MESSAGE:[{type:0,value:"Flickr has a zero-tolerance policy towards abusive, exploitive, or harmful images, videos, comments, and communications involving minors."}],CHILDREN_REPORT_MORE:[{type:0,value:"Please provide all pertinent details about what the concern is and where it is occurring. (e.g. a comment, photo, group discussion, fave, etc.)"}],BULLYING_REPORT_MESSAGE:[{type:0,value:"Flickr is not a venue to harass, abuse, or intimidate others."}],BULLYING_REPORT_MORE:[{type:0,value:'Please provide all pertinent details about what the concern is and where it is occurring (e.g. a comment, photo, group discussion, fave, etc.), then Block the user. The complete list of features of our Block tool can be found <a href="'},{type:1,value:"helpUrl"},{type:0,value:'">here</a>.'}],REPORT_ADDITIONAL_INFO:[{type:0,value:"Please share any additional information about your report. (Optional)"}],SELF_HARM_REPORT_MESSAGE:[{type:0,value:'If you or someone you know is contemplating suicide, you can get help to get you through tough times. Talk to a trusted friend or relative, or check out the resources we’ve compiled <a href="'},{type:1,value:"helpUrl"},{type:0,value:'">here</a>.'}],HATE_SPEECH_REPORT_MESSAGE:[{type:0,value:"Please provide context for where the hate speech occurs. (e.g. a comment, group discussion, photo title, etc)"}],CONTINUE_FORM:[{type:0,value:"Continue to contact form"}],SELECT_OPTION:[{type:0,value:"Please select an option."}],REPORT_NOT_SUPPORTED:[{type:0,value:'Issues related to our Community Guidelines are handled by our Trust & Safety team. For information on how to report an issue or to get in touch with the team, please visit <a class="help-url" href="'},{type:1,value:"helpUrl"},{type:0,value:'">this article</a>.'}],REPORT_GROUP:[{type:0,value:"Issues among group members or violations of a group’s rules are best handled by the group admins. Please contact them directly for assistance. If you’re looking to report a group for violating our community guidelines, click continue to contact our support team."}],TYPE:[{type:0,value:"Type"}],FLICKR_META_DESCRIPTION:[{type:0,value:"The safest and most inclusive global community of photography enthusiasts. The best place for inspiration, connection, and sharing!"}],PHOTO:[{type:0,value:"Photo"}],VIDEO:[{type:0,value:"Video"}],SCREENSHOT:[{type:0,value:"Screenshot"}],SCREENCAST:[{type:0,value:"Screencast"}],ILLUSTRATION_ART:[{type:0,value:"Illustration/Art"}],ANIMATION_CGI:[{type:0,value:"Animation/CGI"}],VIRTUAL_PHOTOGRAPHY:[{type:0,value:"Virtual Photography"}],MACHINIMA:[{type:0,value:"Machinima"}],SPONSORED_BY_ISTOCK:[{type:0,value:'Sponsored images from <img class="getty-istock-logo" src="'},{type:1,value:"assetRoot"},{type:1,value:"iStockLogo"},{type:0,value:'" loading="lazy"/>'}],GETTY_FLICKR_10_FREE:[{type:0,value:"10 free downloads. Any monthly plan. Use code: FLICKR10"}],GETTY_FLICKR_20_DISCOUNT:[{type:0,value:"LIMITED DEAL: 20% off with code FLICKR20"}],FROM:[{type:0,value:"From"}],SAFETY_PRIV_UPSELL_TITLE:[{type:0,value:"Safe photos"}],SAFETY_PRIV_UPSELL_MSG:[{type:0,value:"Upgrade to Flickr Pro to upload or set your photos as moderate or restricted. As a free member your account is set to safe uploads only."
}],UPGRADE_TO_PRO_BTN:[{type:0,value:"Upgrade to Pro"}],SAFETY_PRIV_SAFE_ERR_TITLE:[{type:0,value:"This photo’s safety level is locked"}],SAFETY_PRIV_SAFE_ERR_MSG:[{type:0,value:'Free accounts are limited to posting Safe content only. <a href="'},{type:1,value:"upgradeURL"},{type:0,value:'" target="_blank">Upgrade to Pro</a> to unlock the safety level on your moderate or restricted photos. <a href="'},{type:1,value:"helpCenterURL"},{type:0,value:'" target="_blank">Visit the Help Center</a> to learn more about safety levels or contact our Support Heroes to change safety levels.'}],HAVE_FLICKR_SIGN_IN:[{type:0,value:'Have a Flickr account? <a href="/signin">Sign in</a>'}],ADVERTISE:[{type:0,value:"Advertise"}],DESCRIPTION_READ_MORE:[{type:0,value:"read more"}],DESCRIPTION_READ_LESS:[{type:0,value:"read less"}],BY_YOU_WITH_URL:[{type:0,value:'by <a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">YOU!</a>'}],ADD_A_TITLE:[{type:0,value:"Add a title"}],ADD_A_DESCRIPTION:[{type:0,value:"Add a description"}],COVER_PHOTO:[{type:0,value:"Cover photo"}],CHOOSE_A_COVER_PHOTO:[{type:0,value:"Choose a cover photo"}],CHANGE_COVER_PHOTO:[{type:0,value:"Change cover photo"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("model-proxy",(function(e,r){var t=require("hermes-core/flog")(r);e.getModelProxyConstructor=function(r){var o;return(o=function(e){this.id=e,this.registry=r,this.isModel=!0}).prototype={},e.getModelProxyConstructor.skipList.forEach((function(e){o.prototype[e]=function(){var r=new Error("Registry methods are not exposed on models.");throw t.error({err:r,method:e}),r}})),e.Object.each(r,(function(t,i){var n;o.prototype[i]||0!==i.indexOf("_")&&e.Lang.isFunction(t)&&(Object.keys(t.prototype).length>0||(o.prototype[i]=(n=i,function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e.unshift(this.id),r[n].apply(r,e)})))}),this,!0),o},e.getModelProxyConstructor.skipList=["add","get","load","proxy","remoteRead","remoteCreate","attributeSearch","removeAll","getCount","serialize","deserialize"]}),"@VERSION@",{requires:[],optionalRequires:["hermes-core"]});YUI.add("flickr-collection",(function(t){var i,e={},n=Number.MAX_VALUE;(i=t.FlickrCollection=function(t,i,e){this.registry=t,this.id=i,this.attrName=e,this._data=[],this.totalItems=n,this.fetchedStart=!1,this.fetchedEnd=!1}).prototype={constructor:i,push:function(t){var i=this._data.concat();i.push(t),this.totalItems!==n&&this.totalItems++,this.registry.setValue(this.id,this.attrName,i)},unshift:function(t){var i=this._data.concat();i.unshift(t),this.totalItems!==n&&this.totalItems++,this.registry.setValue(this.id,this.attrName,i)},concat:function(t){var i=this._data.concat(t);this.totalItems!==n&&(this.totalItems+=t.length),this.registry.setValue(this.id,this.attrName,i)},remove:function(t){"string"==typeof t&&(t={id:t});var i,e=this.find(t,!0);return e&&((i=this._data.concat()).splice(e.index,1),this.totalItems!==n&&this.totalItems--,this.registry.setValue(this.id,this.attrName,i)),e&&e.value},find:function(t,i){if(!t)return null;var e=null,n=Object.keys(t);return this._data.some((function(i,r){if(i)return n.every((function(e){return i[e]===t[e]}))?(e={value:i,index:r},!0):void 0})),i?e:e?e.value:null},getFirstItem:function(){var t,i;for(t=0;t<this._data.length;t++)if(i=this._data[t])return{item:i,index:t};return null},getLastItem:function(){var t,i;for(t=this._data.length-1;t>=0;t--)if(i=this._data[t])return{item:i,index:t};return null},getList:function(){return this._data.concat()},size:function(){return this._data.length},toJSON:function(){var i=[];return t.Array.each(this.getList(),(function(t){t&&i.push(t.toJSON())})),i},toString:function(){return this.registry.name+'["'+this.attrName+'"]'},appendToListMulti:function(t){this.concat(t)},appendToList:function(t){this.push(t)},prependToList:function(t){this.unshift(t)},getFromListByID:function(t,i){var e={};return e[i||"id"]=t,this.find(e)||void 0},removeFromList:function(t,i){var e={};return e[i||"id"]=t,this.remove(e)},hasMinBoundary:function(){return this.fetchedStart},hasMaxBoundary:function(){return this.fetchedEnd},_setValue:function(t){this._data=t}},t.FlickrCollection.executeFetch=function(i,n,r,s){var a;return s&&t.Lang.isFunction(s.run)?(a=JSON.stringify(i),e[a]||(e[a]=s.run.call(s,i,n.appContext).then((function(t){return delete e[a],t}),(function(t){throw delete e[a],t})),e[a])):t.Promise.reject("(flickr-collection::executeFetch) invalid fetcher for "+n.name+"["+r+"]")},t.FlickrCollection.trimArray=function(t){for(var i=0,e=t.length-1;i<t.length&&!t[i];)i++;for(;e>i&&!t[e];)e--;return t.slice(i,e+1)}}),"@VERSION@",{requires:[]});YUI.add("paged-collection",(function(t,e){var a=require("hermes-core/flog")(e);t.PagedCollection=function(t,e,a,s){this.constructor.superclass.constructor.call(this,t,e,a),s&&(s instanceof Array&&(s={pageContent:s,page:1,perPage:s.length}),s.totalPages&&(this.totalPages=s.totalPages),void 0===s.totalItems||isNaN(parseFloat(s.totalItems))||(this.totalItems=parseFloat(s.totalItems)),this.fetchedStart=!!s.fetchedStart,this.fetchedEnd=!!s.fetchedEnd,this.addPage(s))},t.extend(t.PagedCollection,t.FlickrCollection,{getPage:function(e){var a,s,i,o,r,n,h;if(e&&e.page&&e.perPage&&!e.forceAPICall){if(n=this.totalPages&&e.page>=this.totalPages,h=this.totalItems&&s>=this.totalItems,a=e.perPage*(e.page-1),s=Math.min(e.perPage*e.page,this.totalItems),!n&&!h||!this.fetchedEnd)for(i=a;i<s;i++)if(void 0===this._data[i]||!this._data[i].exists()){o=!0;break}}else e||(e={}),o=!0;return o?(e.pathAlias||(e.id=this.id),e.isCollection=!0,(r=this.registry.attributes[this.attrName].pageFetch).fetchParams&&(e=t.merge(e,r.fetchParams)),t.FlickrCollection.executeFetch(e,this.registry,this.attrName,r.listFetcher)):t.Promise.resolve(this._data.slice(a,s))},addPage:function(t){var e,a,s=t.perPage*(t.page-1),i=s+Math.min(t.pageContent.length,t.perPage),o=0;if(t.forceAppend)this._data=this._data.concat(t.pageContent);else if(this._data.length<=s)this._data.length=s,this._data=this._data.concat(t.pageContent);else for(this._data.length<i&&(this._data.length=i),e=s;e<i;e++)this._data[e]=t.pageContent[o],o++;t.totalPages&&(this.totalPages=t.totalPages,t.page>=this.totalPages&&(this.fetchedEnd=!0)),void 0===t.totalItems||isNaN(parseFloat(t.totalItems))||(a=parseFloat(t.totalItems),this.totalItems=a,(this._data.length>=a||s+parseInt(t.perPage,10)>a&&this._data.length<a)&&(this.fetchedEnd=!0)),this.fetchedStart=this._data&&void 0!==this._data[0]},removePage:function(t){},getPageOf:function(t,e){e||(a.warn("`perPage` must be specified; defaulting to 50."),e=50);var s=this.find(t,!0);return s?Math.floor(s.index/e)+1:-1},getNextIncompletePage:function(t){for(var e=t.page*(t.perPage-1),a=Math.floor(this._data.length/t.perPage)+1;e<this._data.length;e++)if(void 0===this._data[e]||!this._data[e].exists()){a=Math.floor(e/t.perPage)+1;break}return a},_setValue:function(e){if(e instanceof Array)this.constructor.superclass._setValue.call(this,e);else{if(!(e=(function(e){var s={page:1,perPage:0,pageContent:[]};if(!e)return a.warn("No pageData sent to PagedCollection; aborting."),null;e instanceof Array&&(e={pageContent:e});return e=t.merge(s,e)})(e)))return;e.remove?this.removePage(e):this.addPage(e)}},reset:function(){this._data=[],this.fetchedStart=!1,this.fetchedEnd=!1}})}),"@VERSION@",{requires:["flickr-collection"],optionalRequires:["hermes-core"]});YUI.add("flickr-model-registry",(function(e,t){var i=require("hermes-core/flog")(t);e.Models={};var s=e.FlickrModelRegistry=function(t){this.appContext=t,this.attributes=this.attributes||{},this.attributes.id={writeOnce:"initOnly",setter:function(t){return e.Lang.isString(t)||(e.Lang.isNumber(t)?t+="":(i.info("`id` falling back to a Y.guid",{topic:this.name,val:t}),t=e.guid())),t}},this._setDefaultRemoteMethods(),this._validateAttributes(),this._data={},this._dataSize=0,this._subscribers=[],this.hasWeakSubscribers=!1,this._chainedEvents={},this._derivedCache=void 0,this._unsavedModels={}};function a(t,i,s){return!1===s&&"string"==typeof t&&"string"==typeof i&&(t=t.toLowerCase(),i=i.toLowerCase()),t===i||(e.moment.isMoment(t)&&e.moment.isMoment(i)?0===t.diff(i):!!(e.Lang.isArray(t)&&e.Lang.isArray(i)&&(function(t,i){var s=!0;t.length!==i.length&&(s=!1);s&&e.Array.some(t,(function(e,t){if(!a(i[t],e))return s=!1,!0}));return s})(t,i))||!!(e.Lang.isObject(t,!0)&&e.Lang.isObject(i,!0)&&(function(t,i){var s=!0;e.Object.size(t)!==e.Object.size(i)&&(s=!1);s&&e.Object.some(t,(function(e,t){if(!i.hasOwnProperty(t)||!a(i[t],e))return s=!1,!0}));s&&e.Object.some(i,(function(e,i){if(!t.hasOwnProperty(i)||!a(t[i],e))return s=!1,!0}));return s})(t,i)))}function r(t){var i=t;return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Array.prototype?(i=t.slice(),void 0!==t.hasMinBoundary&&(i.hasMinBoundary=t.hasMinBoundary),void 0!==t.hasMaxBoundary&&(i.hasMaxBoundary=t.hasMaxBoundary)):Object.getPrototypeOf(t)===Object.prototype&&(i={},e.Object.each(t,(function(e,t){i[t]=e}),this))),i}s.prototype={attributeSearch:function(t,i){var s=[];return t.id?s.push(t.id):e.Object.each(this._data,(function(r,n){var o=!0;e.Object.some(t,(function(e,t){if(!a(e,r[t],!1)){if(!0!==i)return o=!1,!0;if(!a(e,this.getDefaultValue(r.id,t),!1))return o=!1,!0}}),this),o&&s.push(n)}),this),s},load:function(t,i){var s,a,r=this;return i||(i={}),e.Lang.isObject(t,!0)?(s=this.attributeSearch(t).sort()[0],i=e.merge(t,i||{})):(s=t,i=e.merge({id:s},i)),s&&this.exists(s)?e.Promise.resolve(s):(this._fetchPromises||(this._fetchPromises={}),a=s||JSON.stringify(i),this._fetchPromises[a]||(this._fetchPromises[a]=this.remoteRead(i).then((function(){var e,i,n=s;if(s||(e=r.attributeSearch(t)).length>0&&(n=e[0]),delete r._fetchPromises[a],n&&r.exists(n))return n;throw(i=new Error("["+r.name+"] Model ID is missing after fetching.")).getModelFailure=!0,i}))),this._fetchPromises[a])},get:function(e,t){return this.load(e,t).then(this.proxy.bind(this))},add:function(t,s,a){var r;if(e.Lang.isObject(t,!0)&&!e.Lang.isArray(t))return void 0===s&&(s=!1),r=this.attributes.id.setter.apply(this,[t.id,void 0]),this._data[r]?i.warn("Attempt to add a model that is already in the registry.",{topic:this.name,id:r}):(this._data[r]={},this._dataSize++,this._queueEvent("modelsAdded",{id:r}),s?this._data[r]=t:Object.keys(this.attributes).forEach((function(e){var i=this.attributes[e],s=t[e];i.readOnly||this.setValue(r,e,s,!0,a)}),this),this.appContext.markAsNewlyFetched(this.name,r)),this.proxy(r);i.warn("`add` requires an object",{topic:this.name,data:t})},remove:function(e){this.exists(e)&&(delete this._data[e],this._dataSize--,this._removeChainedEvents(e),this._removeEventSubscribers(e),this._queueEvent("modelsRemoved",{id:e}))},removeAll:function(){e.Object.each(this._data,(function(e,t){this.remove(t)}),this)},removeAllExcept:function(t){var i=t.reduce((function(e,t){return e[t]=!0,e}),{});e.Object.each(this._data,(function(e,t){i[t]||this.remove(t)}),this)},_removeChainedEvents:function(t){var i;this._chainedEvents[t]&&(e.Object.each(this._chainedEvents[t],(function(t,s){(i=this.attributes[s])&&(i.isModel?t.detach():(i.isListProxy||i.isCollection)&&e.Array.each(t,(function(e){e.detach&&e.detach()})))}),this),delete this._chainedEvents[t])},_removeEventSubscribers:function(t){var i=[];this._subscribers.length&&(e.Array.each(this._subscribers,(function(e,s){e.id===t&&i.push(s)}),this),e.Array.each(i,(function(e){this._subscribers.splice(e,1)}),this))},proxy:function(t){return this._ModelProxy||(this._ModelProxy=e.getModelProxyConstructor(this)),new this._ModelProxy(t)},getValue:function(t,s,a){var n,o,h;if(t&&s)if(this.exists(t)){if(o=this.attributes[s])return o.isListProxy?n=new e.ListProxy(this,t,s):(void 0===(n=this._data[t][s])&&(n=this.getDefaultValue(t,s)),h=o.getter,!a&&h&&(n=h.apply(this,[n,t])),n=r(n)),n;i.warn("`getValue` called for an attribute that isn't defined",{topic:this.name,id:t,attr:s})}else i.warn("`getValue` called for an id that doesn't exist in the registry.",{topic:this.name,id:t,attr:s});else i.warn("`getValue` requires two arguments.",{topic:this.name,id:t,attr:s})},setValue:function(t,s,n,o,h){var d,u,l,c,f,v,g;if(!t||!s||arguments.length<3)i.warn("`setValue` requires three arguments.",{topic:this.name,id:t});else if(this.exists(t))if(d=this.attributes[s])if(d.readOnly)i.warn("Attribute is readOnly.",{topic:this.name,id:t,attr:s});else if("initOnly"!==d.writeOnce||o)if(!0===d.writeOnce&&this._data[t][s])i.warn("Attribute can only be set once.",{topic:this.name,id:t,attr:s});else{if(l=this.getValue(t,s),c=this._data[t][s],d.isListProxy&&(l=c),!h&&d.validator){if(v=d.validator,!e.Lang.isFunction(v))return void i.warn("Attribute has an invalid validator.",{topic:this.name,validator:d.validator,attr:s});if(!v.apply(this,[n,t]))return void i.info("Attribute validation failed.",{topic:this.name,id:t,val:n,attr:s})}n=r(n),!h&&d.setter&&(n=d.setter.apply(this,[n,t])),d.isListProxy&&!e.Lang.isArray(n)&&(n=[]),d.isCollection&&(n?"object"==typeof n&&n instanceof e.PagedCollection||(l?(c=l.getList(),l._setValue(n),n=l):(c=null,n=new e.PagedCollection(this,t,s,n))):n=new e.PagedCollection(this,t,s)),this._isDifferentValue(t,s,n,l)&&(!d.isModel||e.Lang.isObject(n)&&n.isModel?(o||(u=this._getAttributeValuesDerivedBy(t,s)),this._data[t][s]=n,d.isListProxy&&n&&(n.hasMinBoundary&&this.getValue(t,s).setMinBoundary(),n.hasMaxBoundary&&this.getValue(t,s).setMaxBoundary()),(d.isModel||d.isListProxy||d.isCollection)&&this._chainEvents(t,s),o||(f=this.getValue(t,s),d.isListProxy||d.isCollection||this._setUnsaved(t,s,f,l,c),g={id:t,attrName:s,prevVal:l,newVal:f},d.isListProxy?g.listDiff=this._calcListDiff(f,l):d.isCollection&&(g.listDiff=this._calcListDiff(f,c)),this._queueEvent("valuesChanged",g),e.Object.size(u)&&e.Object.each(u,(function(e,i){var r=this.getValue(t,i);a(r,e)||(g={id:t,attrName:i,prevVal:e,newVal:r,derivedBy:[s]},(this.attributes[i].isListProxy||this.attributes[i].isCollection)&&(g.listDiff=this._calcListDiff(r,e)),this._queueEvent("valuesChanged",g))}),this))):i.warn("Attribute must be a ModelProxy instance.",{topic:this.name,id:t,attr:s}))}else i.warn("Attribute can only be set during initialization.",{topic:this.name,id:t,attr:s});else i.warn("Attribute is not present in the attributes list.",{topic:this.name,id:t,attr:s});else i.warn("`setValue called for an id that is not in the registry.",{topic:this.name,id:t})},setValues:function(t,i){var s={};e.Object.each(i,(function(e,i){"id"!==i&&(s[i]=this.setValue(t,i,e))}),this)},revertValue:function(e,t){this._unsavedModels[e]&&void 0!==this._unsavedModels[e][t]&&this.setValue(e,t,this._unsavedModels[e][t].lastSavedValRaw)},exists:function(t){var i;return i=e.Lang.isArray(t)?t[0]:e.Lang.isObject(t,!0)?this.attributeSearch(t)[0]:t,!!this._data[i]},addOrUpdate:function(e){var t,i;this.exists(e.id)?Object.keys(e).forEach((function(s){t=this.attributes[s],i=e[s],t&&!t.readOnly&&"initOnly"!==t.writeOnce&&this.setValue(e.id,s,i)}),this):this.add(e);return this.appContext.markAsNewlyFetched(this.name,e.id),this.markChildModelsAsNewlyFetched(e.id),this.proxy(e.id)},markChildModelsAsNewlyFetched:function(e){var t=this.getOwnedModels(e),i=this;t.forEach((function(e){e&&(i.appContext.markAsNewlyFetched(e.registry.name,e.id),e.markChildModelsAsNewlyFetched(e.id))}))},getOwnedModels:function(t){var s,a,r,n=[];if(!t)return i.warn("`getOwnedModels` requires a model id.",{topic:this.name,id:t}),n;if(!this.exists(t))return n;for(s in this._ModelProxy||(this._ModelProxy=e.getModelProxyConstructor(this)),this.attributes)(a=this.attributes[s]).isModel?(r=this.getValue(t,s))&&r.exists()&&n.push(r):(a.isListProxy||a.isCollection)&&(n=n.concat(this.getValue(t,s).getList().filter((function(e){return e&&e.isModel&&e.exists()}))));return n},hasAttribute:function(e){return!!this.attributes[e]},toJSON:function(e){var t,i,s={};if(e)for(t in this.attributes)s[t]=this.getValue(e,t),s[t]&&(this.attributes[t].isModel||this.attributes[t].isListProxy||this.attributes[t].isCollection)&&(s[t]=s[t].toJSON());else for(i in this._data)s[i]=this.toJSON(i);return s},on:function(t,i,s,a){var r;return t||(t=null),r={eventName:i,fn:s,id:t,weak:a},this._subscribers.push(r),a&&(this.hasWeakSubscribers=!0),{detach:function(){var t=e.Array.indexOf(this._subscribers,r);t>-1&&this._subscribers.splice(t,1)}.bind(this)}},removeWeakSubscribers:function(){var e=this._subscribers.length;if(e)for(;e--;)this._subscribers[e].weak&&this._subscribers.splice(e,1);this.hasWeakSubscribers=!1},getCount:function(){return this._dataSize},getDefaultValue:function(e,t){var i,s;return"function"==typeof(i=this.attributes[t]).defaultFn&&(s=i.defaultFn.call(this,e)),void 0===s&&void 0!==i.defaultValue&&(s=i.defaultValue),s},_isDifferentValue:function(e,t,i,s){var r=this.attributes[t],n=r.getter;if(n&&(i=n.apply(this,[i,e])),void 0!==r.isListProxy&&r.isListProxy&&void 0!==s){if(i.hasMaxBoundary!==(void 0!==s.hasMaxBoundary&&s.hasMaxBoundary)||i.hasMinBoundary!==(void 0!==s.hasMinBoundary&&s.hasMinBoundary))return!0}else if(r.isCollection)return!0;return!a(i,s)},_calcListDiff:function(t,i){var s,a,r,n,o={added:null,removed:null};return s=t instanceof e.ListProxy||t instanceof e.PagedCollection?t.getList():t,a=i instanceof e.ListProxy||i instanceof e.PagedCollection?i.getList():i,r=a.reduce((function(e,t){return t&&t.id&&(e[t.id]=!0),e}),{}),n=s.reduce((function(e,t){return t&&t.id&&(e[t.id]=!0),e}),{}),o.added=s.filter((function(e){return e&&!r[e.id]})),o.removed=a.filter((function(e){return e&&!n[e.id]})),o},_getAttributesDerivedBy:function(t){return this._derivedCache||(this._derivedCache={},e.Object.each(this.attributes,(function(t,i){t.derivedBy&&e.Lang.isArray(t.derivedBy)&&e.Array.each(t.derivedBy,(function(e){this._derivedCache[e]||(this._derivedCache[e]=[]),this._derivedCache[e].push(i)}),this)}),this)),this._derivedCache[t]},_getAttributeValuesDerivedBy:function(t,i){var s=this._getAttributesDerivedBy(i),a={};return s&&s.length&&e.Array.each(s,(function(e){a[e]=this.getValue(t,e)}),this),a},_queueEvent:function(t,i){var s;this._eventQueue||(this._eventQueue=[]),(s=this._eventQueue).push({type:t,data:i}),this._eventPending||(this._eventPending=!0,setTimeout(function(){var t={};this._eventPending=!1,delete this._eventQueue,e.Array.each(s,(function(e){var i=e.type,s=e.data,a=s.id;switch(i){case"modelsAdded":case"modelsRemoved":t[i]=t[i]||{},t[i][a]=s;break;case"valuesChanged":if(t.valuesChanged&&t.valuesChanged[a]&&t.valuesChanged[a][s.attrName]&&t.valuesChanged[a][s.attrName].newVal){t.valuesChanged[a][s.attrName].newVal=s.newVal,t.valuesChanged[a][s.attrName].derivedBy&&s.derivedBy&&(t.valuesChanged[a][s.attrName].derivedBy=t.valuesChanged[a][s.attrName].derivedBy.concat(s.derivedBy)),t.valuesChanged[a][s.attrName].chained&&!s.chained&&delete t.valuesChanged[a][s.attrName].chained;break}t.valuesChanged=t.valuesChanged||{},t.valuesChanged[a]=t.valuesChanged[a]||{},t.valuesChanged[a][s.attrName]=s}})),e.Object.each(t,(function(e,t){this._fireEvent(t,e)}),this)}.bind(this),0))},_fireEvent:function(e,t){this._subscribers.slice().forEach((function(i){i&&i.eventName===e&&(i.id?t[i.id]&&i.fn.call(void 0,t[i.id]):i.fn.call(void 0,t))}))},_chainEvents:function(t,i){var s,a,r=this.attributes[i];this._chainedEvents[t]=this._chainedEvents[t]||{},r.isModel?(this._chainedEvents[t][i]&&this._chainedEvents[t][i].detach(),a=this.getValue(t,i),this._chainedEvents[t][i]=a.on("valuesChanged",function(e){this._queueChainedEvent(t,i)}.bind(this))):(r.isListProxy||r.isCollection)&&(this._chainedEvents[t][i]&&e.Array.each(this._chainedEvents[t][i],(function(e){e.detach()})),this._chainedEvents[t][i]=[],s=this.getValue(t,i),e.Array.each(s.getList(),(function(e){e&&this._chainedEvents[t][i].push(e.on("valuesChanged",function(e){this._queueChainedEvent(t,i)}.bind(this)))}),this))},_queueChainedEvent:function(t,i){var s,a=this.getValue(t,i);this._queueEvent("valuesChanged",{id:t,attrName:i,prevVal:a,newVal:a,chained:!0}),s=this._getAttributeValuesDerivedBy(t,i),e.Object.size(s)&&e.Object.each(s,(function(e,s){this._queueEvent("valuesChanged",{id:t,attrName:s,newVal:e,derivedBy:[i],chained:!0})}),this)},_deleteUnsaved:function(t,i){this._unsavedModels[t]&&this._unsavedModels[t][i]&&(delete this._unsavedModels[t][i],0===e.Object.size(this._unsavedModels[t])&&delete this._unsavedModels[t])},_setUnsaved:function(e,t,i,s,r){this._unsavedModels[e]&&this._unsavedModels[e][t]?a(i,this._unsavedModels[e][t].lastSavedVal)&&this._deleteUnsaved(e,t):(this._unsavedModels[e]=this._unsavedModels[e]||{},this._unsavedModels[e][t]={lastSavedVal:s,lastSavedValRaw:r})},_validateAttributes:function(){var t,s;t=["setter","getter","validator","defaultValue","defaultFn","derivedBy","readOnly","writeOnce","isModel","serialize","deserialize"],s=["isListProxy","isCollection","pageFetch","contextFetch","rangeFetch"],e.Object.each(this.attributes,(function(a,r){e.Object.each(a,(function(n,o){a.isListProxy||a.isCollection?-1===e.Array.indexOf(s,o)&&i.warn("Unknown property on collection attribute.",{topic:this.name,prop:o,attr:r}):-1===e.Array.indexOf(t,o)&&i.warn("Unknown property on attribute.",{topic:this.name,prop:o,attr:r})}),this)}),this)},_setDefaultRemoteMethods:function(){this.remote=this.remote||{},this.remote.create||(this.remote.create=function(t){return i.error("`remote.create` was called without being implemented.",{topic:this.name,attrs:t}),e.Promise.reject()}),this.remote.read||(this.remote.read=function(t){Object.keys(this.attributes).some((function(e){var t=this.attributes[e];if(!("id"===e||t.readOnly||t.isListProxy||t.isCollection||t.defaultValue||t.defaultFn))return!0}),this),"object"!=typeof t&&(t={id:t});var i={id:t.id};return this.add(i),e.Promise.resolve(i)}),this.remote.update||(this.remote.update=function(t,s){return i.error("`remote.update` was called without being implemented.",{topic:this.name,id:t,attrs:s}),e.Promise.reject()}),this.remote.delete||(this.remote.delete=function(t){return i.error("`remote.delete` was called without being implemented.",{topic:this.name,id:t}),e.Promise.reject()})},remoteCreate:function(e){return this.remote.create.call(this,e)},remoteRead:function(e){return this.remote.read.call(this,e)},remoteUpdate:function(t){var i={},s=this;return this._unsavedModels[t]&&e.Object.each(this._unsavedModels[t],(function(e,s){i[s]={newVal:this.getValue(t,s),prevVal:e.lastSavedVal}}),this),e.Object.size(i)>0?this.remote.update.call(this,t,i).then((function(e){return s._unsavedModels={},e})):e.Promise.resolve()},remoteBatchUpdate:function(e,t){return this.remote.batchUpdate.call(this,e,t)},remoteDelete:function(e){var t=this;return this.remote.delete.call(this,e).then((function(){t.remove(e)}))},getListPageByContinuation:function(t,i){var s,a,r,n,o,h,d,u,l,c,f=this,v=f.appContext,g="-1",m=e.APIHelper.request.getRebootPhotoExtras();switch(f.name){case"photo-groups-models":s="group-pool-models",a="groups",r="flickr.photos.getGroups",n="groups.group",m+=","+e.APIHelper.request.getRebootGroupExtras();break;case"photo-sets-models":s="set-models",a="sets",r="flickr.photos.getSets",n="sets.set";break;case"photo-galleries-models":s="gallery-models",a="galleries",r="flickr.photos.getGalleries",n="galleries.gallery"}return r?f.exists(t)?(f.continuationKeys=f.continuationKeys||{},f.getMorePromises=f.getMorePromises||{},(h=f.continuationKeys[t]||"0")===g?e.Promise.resolve({newItems:[],loadedAll:!0}):("0"===h&&(i+=f.getValue(t,a).getList().length),o={photo_id:t,extras:m,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:h,per_page:i},u=t+"_"+h,(l=f.getMorePromises[u])?l:(c={apiResponse:v.callAPI(r,o,!0),contextRegistry:v.getModelRegistry(s),personRegistry:v.getModelRegistry("person-models")},"photo-groups-models"===f.name&&(c.groupRegistry=v.getModelRegistry("group-models")),f.getMorePromises[u]=new e.FlickrPromise(c).then((function(i){var s,r,o,h=[],l=i.apiResponse,c=i.contextRegistry,v=i.personRegistry,m=i.groupRegistry;return(r=n.split(".").reduce((function(t,i){return e.Lang.isObject(t)?t[i]:void 0}),l))&&(e.Array.each(r,(function(t){e.APIHelper.response.addContextToRegistry(t,c,v,m),h.push(c.proxy(t.id))})),h.length&&(o=f.getValue(t,a).getList().map((function(e){return e.getValue("id")})),(h=h.filter((function(e){return-1===o.indexOf(e.getValue("id"))}))).length&&f.getValue(t,a).appendToListMulti(h))),void 0===(d=l[a].continuation)?d=g:e.Lang.isNumber(d)&&(d+=""),s=d===g,f.continuationKeys[t]=d,delete f.getMorePromises[u],{newItems:h,loadedAll:s}}),(function(e){throw delete f.getMorePromises[u],e})),f.getMorePromises[u]))):e.Promise.reject("[api-helper] getListPageByContinuation was called for an ID that isn't in the registry: "+t):e.Promise.reject("[api-helper] getListPageByContinuation was called without an invalid registry type: "+f.name)},getBuriedValue:function(e,t){var i,s={};return(i=this.getValue(e,t))&&i.payload&&(s=i.payload),s},setBuriedValue:function(e,t,i,s){return this.setValue(e,t,{payload:i},s)}},e.mix(s.prototype,e.Localizable)}),"@VERSION@",{requires:["flickr-promise","model-proxy","list-proxy","moment","paged-collection","localizable"],optionalRequires:["hermes-core"]});YUI.add("timezone-helper",(function(t){"use strict";t.TimezoneHelper=function(e,i,s){s?(this.tz=s,this.dst=!1):(this.tz=e.getViewer().prefs.timezonePref.offset,this.dst=e.getViewer().prefs.timezonePref.dst),this.momentObject=t.moment(i,"X"),this.momentObject.utcOffset(this.tz),this.dst&&this.momentObject.isDST()&&this.momentObject.add(1,"hour")},t.TimezoneHelper.prototype.toFormat=function(t){return this.momentObject.format(t)}}),"@VERSION@",{requires:["moment"]});YUI.add("subscriptions-helper",(function(e,t){"use strict";var n=require("hermes-core/flog")(t);e.SubscriptionsHelper=function(){this.FLICKR_PRO_3_MONTH_PLAN_ID=1,this.FLICKR_PRO_1_YEAR_PLAN_ID=2,this.FLICKR_PRO_2_YEARS_PLAN_ID=3,this.FLICKR_PRO_MONTHLY_PLAN_ID=7,this.FLICKR_PRO_ANNUAL_PLAN_ID=8,this.FLICKR_PRO_ANNUAL_TRIAL=9,this.FLICKR_PRO_OLD_ANNUAL_TRIAL=10,this.FLICKR_PRO_3_MONTH_V2_PLAN_ID=11,this.FLICKR_PRO_2_YEAR_V2_PLAN_ID=12,this.FLICKR_PRO_1_MONTH_V2_APPLE_ID=13,this.FLICKR_PRO_1_YEAR_V2_APPLE_ID=14,this.FLICKR_PRO_1_MONTH_V2_GOOGLE_ID=15,this.FLICKR_PRO_1_YEAR_V2_GOOGLE_ID=16,this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID=17,this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID=18,this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID=19,this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID=20,this.FLICKR_PRO_ANNUAL_PRICE=71.99,this.FLICKR_PRO_MONTHLY_PRICE=8.25,this.FLICKR_PRO_3_MONTH_V2_PRICE=18.99,this.FLICKR_PRO_2_YEAR_V2_PRICE=117.99,this.FLICKR_PRO_WEEK_PRICE=1.99,this.FLICKR_PRO_ANNUAL_PRICE_24=80.99,this.FLICKR_PRO_MONTHLY_PRICE_24=9.49,this.FLICKR_PRO_WEEK_PRICE_24=2.37,this.ADOBE_PARTNERSHIP_COUPON="FlickrAdobe25",this.BT_MIG_5_1_ANNUAL_COUPON="BTMIG5135A",this.BT_MIG_3_1_ANNUAL_COUPON="BTMIG3125A",this.BT_MIG_3_2_ANNUAL_COUPON="BTMIG3225A",this.BT_MIG_5_2_30_COUPON="BTMIG5230",this.BT_MIG_5_2_20_COUPON="BTMIG5220",this.EXPLORE_EXPERIMENT_MONTHLY_COUPON="EXPLOREFLICKRPRO50",this.EXPLORE_EXPERIMENT_WEEKLY_TRIAL="FLICKR7DAYTRIAL",this.UTM_PRO_BADGE="pro-badge",this.UTM_HIDE_ADS="hide-ads",this.UTM_UPSELL_LINK="upsell-link",this.UTM_GLOBAL_NAV="global-nav",this.UTM_HIDE_ADS_GETTY_SEARCH="hide-ads-getty",this.UTM_EXPLORED_BANNER_DISCOUNT="explored_segment_discount",this.UTM_CHURNED_BANNER_PRO="churned_pro_banner",this.UTM_PROPSCORE2_BANNER_PRO="propscore2_banner",this.UTM_SAFETY_UPSELL="safety-upsell",this.UTM_PHOTOLIST_UPSELL="photolist-upsell",this.UTM_SECOND_LIFE_BANNER_DISCOUNT="second-life-comm-upsell",this.UTM_PRO_AWARENESS_CAMPAIGN="pro-awareness-campaign",this.subscriptionsIdByName={"pro-3month":this.FLICKR_PRO_3_MONTH_PLAN_ID,"pro-3month-v2":this.FLICKR_PRO_3_MONTH_V2_PLAN_ID,"pro-1year":this.FLICKR_PRO_1_YEAR_PLAN_ID,"pro-2year":this.FLICKR_PRO_2_YEARS_PLAN_ID,"pro-2year-v2":this.FLICKR_PRO_2_YEAR_V2_PLAN_ID,"pro-monthly":this.FLICKR_PRO_MONTHLY_PLAN_ID,"pro-annual":this.FLICKR_PRO_ANNUAL_PLAN_ID,"pro-trial":this.FLICKR_PRO_ANNUAL_TRIAL,"pro-2-year":this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID},this.subscriptionsIdByNameOnStripe={"pro-3month":this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID,"pro-3month-v2":this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID,"pro-1year":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-2year":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-2year-v2":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-monthly":this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID,"pro-annual":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-2-year":this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID},this.subscriptionStatusMap={initiated:1,active:2,closed:3,canceled:4,failed:5,refunded:6,pending:7,subscription_canceled:8,subscription_charged_successfully:9,subscription_charged_unsuccessfully:10,subscription_expired:11,subscription_went_past_due:12,change_initiated:13,closed_pending:14},this.subscriptionsIdHasAnnualPerk={1:!1,2:!0,3:!0,4:!0,6:!1,7:!1,8:!0,9:!0,10:!0,11:!1,12:!0,13:!1,14:!0,15:!1,16:!0,17:!1,18:!0,19:!1,20:!0},this.cardTypeMap={1:"visa",2:"master-card",3:"discover",4:"american-express",5:"JCB"},this.paymentVendorMap={braintree:10,oldpaypal:20,digitalriver:30,apple:40,google:50,stripe:60},this.countriesArray=[{countryCode:"US",countryName:"United States"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"AX",countryName:"Åland"},{countryCode:"AL",countryName:"Albania"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"AS",countryName:"American Samoa"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"AO",countryName:"Angola"},{countryCode:"AI",countryName:"Anguilla"},{countryCode:"AQ",countryName:"Antarctica"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AW",countryName:"Aruba"},{countryCode:"AU",countryName:"Australia"},{countryCode:"AT",countryName:"Austria"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"BM",countryName:"Bermuda"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"BQ",countryName:"Bonaire, Sint Eustatius and Saba"},{countryCode:"BA",countryName:"Bosnia and Herzegovina"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"BV",countryName:"Bouvet Island"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"IO",countryName:"British Indian Ocean Territory"},{countryCode:"BN",countryName:"Brunei Darussalam"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"KH",countryName:"Cambodia"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"CA",countryName:"Canada"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"KY",countryName:"Cayman Islands"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"TD",countryName:"Chad"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CN",countryName:"China"},{countryCode:"CX",countryName:"Christmas Island"},{countryCode:"CC",countryName:"Cocos (Keeling) Islands"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CG",countryName:"Congo (Brazzaville)"},{countryCode:"CD",countryName:"Congo (Kinshasa)"},{countryCode:"CK",countryName:"Cook Islands"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"CI",countryName:"Côte d'Ivoire"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"CW",countryName:"Curaçao"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"FO",countryName:"Faroe Islands"},{countryCode:"FJ",countryName:"Fiji"},{countryCode:"FI",countryName:"Finland"},{countryCode:"FR",countryName:"France"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"PF",countryName:"French Polynesia"},{countryCode:"TF",countryName:"French Southern Lands"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"GI",countryName:"Gibraltar"},{countryCode:"GR",countryName:"Greece"},{countryCode:"GL",countryName:"Greenland"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"GP",countryName:"Guadeloupe"},{countryCode:"GU",countryName:"Guam"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"GG",countryName:"Guernsey"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"HM",countryName:"Heard and McDonald Islands"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"IN",countryName:"India"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"IM",countryName:"Isle of Man"},{countryCode:"IL",countryName:"Israel"},{countryCode:"IT",countryName:"Italy"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"JP",countryName:"Japan"},{countryCode:"JE",countryName:"Jersey"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"KI",countryName:"Kiribati"},{countryCode:"KR",countryName:"Korea, South"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"LA",countryName:"Laos"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"LY",countryName:"Libya"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"MO",countryName:"Macau"},{countryCode:"MK",countryName:"Macedonia"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"ML",countryName:"Mali"},{countryCode:"MT",countryName:"Malta"},{countryCode:"MH",countryName:"Marshall Islands"},{countryCode:"MQ",countryName:"Martinique"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"YT",countryName:"Mayotte"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"FM",countryName:"Micronesia"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"ME",countryName:"Montenegro"},{countryCode:"MS",countryName:"Montserrat"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MM",countryName:"Myanmar"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"NR",countryName:"Nauru"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"AN",countryName:"Netherlands Antilles"},{countryCode:"NC",countryName:"New Caledonia"},{countryCode:"NZ",countryName:"New Zealand"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"NE",countryName:"Niger"},{countryCode:"NG",countryName:"Nigeria"},{countryCode:"NU",countryName:"Niue"},{countryCode:"NF",countryName:"Norfolk Island"},{countryCode:"MP",countryName:"Northern Mariana Islands"},{countryCode:"NO",countryName:"Norway"},{countryCode:"OM",countryName:"Oman"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"PW",countryName:"Palau"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"PA",countryName:"Panama"},{countryCode:"PG",countryName:"Papua New Guinea"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"PN",countryName:"Pitcairn"},{countryCode:"PL",countryName:"Poland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"RE",countryName:"Reunion"},{countryCode:"RO",countryName:"Romania"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BL",countryName:"Saint Barthélemy"},{countryCode:"SH",countryName:"Saint Helena"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"MF",countryName:"Saint Martin (French part)"},{countryCode:"PM",countryName:"Saint Pierre and Miquelon"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"WS",countryName:"Samoa"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"ST",countryName:"Sao Tome and Principe"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"RS",countryName:"Serbia"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"SX",countryName:"Sint Maarten (Dutch part)"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"SB",countryName:"Solomon Islands"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"GS",countryName:"South Georgia and South Sandwich Islands"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ES",countryName:"Spain"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"SJ",countryName:"Svalbard and Jan Mayen Islands"},{countryCode:"SZ",countryName:"Swaziland"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"TL",countryName:"Timor-Leste"},{countryCode:"TG",countryName:"Togo"},{countryCode:"TK",countryName:"Tokelau"},{countryCode:"TO",countryName:"Tonga"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"TC",countryName:"Turks and Caicos Islands"},{countryCode:"TV",countryName:"Tuvalu"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"UM",countryName:"United States Minor Outlying Islands"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"VU",countryName:"Vanuatu"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"VG",countryName:"Virgin Islands, British"},{countryCode:"VI",countryName:"Virgin Islands, U.S."},{countryCode:"WF",countryName:"Wallis and Futuna Islands"},{countryCode:"EH",countryName:"Western Sahara"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"}],this.usStatesArray=["AL","AK","AZ","AR","AE","AA","AP","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],this.canadaProvincesArray=["AB","BC","MB","NB","NL","NT","NS","NU","ON","PE","QC","SK","YT"],this.US_TERRITORIES_COUNTRIES_CODES=["PR","UM","GU","VI","AS","MP"],this.EU=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"])},e.SubscriptionsHelper.prototype.canPlanIdSeeAnnualPerks=function(e){return this.subscriptionsIdHasAnnualPerk[e]},e.SubscriptionsHelper.prototype.convertDesiredPlan=function(e){var t;if("pro-3month"===e||"pro-3month-v2"===e||"pro-1year"===e||"pro-2year"===e||"pro-2year-v2"===e)switch(e){case"pro-monthly":case"pro-3month":case"pro-3month-v2":t="pro-monthly";break;case"pro-1year":default:t="pro-annual";break;case"pro-2year":case"pro-2year-v2":t="pro-2-year"}else t=""===e?"pro-annual":e;return t},e.SubscriptionsHelper.prototype.getPlanIdWithPlanName=function(e,t){var n=this.FLICKR_PRO_ANNUAL_PLAN_ID,o=t?this.subscriptionsIdByNameOnStripe:this.subscriptionsIdByName;return void 0!==o[e]&&(n=o[e]),n},e.SubscriptionsHelper.prototype.getPlanNameWithPlanId=function(e,t){var n="",o=t?this.subscriptionsIdByNameOnStripe:this.subscriptionsIdByName;for(var r in this.subscriptionsIdByName)if(o[r]===e){n=r;break}return n},e.SubscriptionsHelper.prototype.canPurchaseAtLeastOnePlan=function(e){var t=[];return e&&(t=e.filter((function(e){return 1===e.canPurchase}))),t.length>0},e.SubscriptionsHelper.prototype.canPurchaseThisPlanId=function(e,t){var n=[];return e&&t&&(n=t.filter((function(t){return t.planId===e}))),n.length>0},e.SubscriptionsHelper.prototype.getNewProPlans=function(e){if(e)return e.filter((function(e){return"FlickrNewPro"===e.familyName}))},e.SubscriptionsHelper.prototype.getOldProPlans=function(e){if(e)return e.filter((function(e){return"FlickrPro"===e.familyName}))},e.SubscriptionsHelper.prototype.getPlanWithIdInPlansList=function(e){},e.SubscriptionsHelper.prototype.sanitizeCouponCode=function(e){var t=!1;if(e){if(t=e.trim(),e.length<=1)return!1;if(!t.match(/^[\w\-]+$/))return!1}return t},e.SubscriptionsHelper.prototype.convertLocaleToPaypalFormat=function(e){if(e){return{"de-DE":"de_DE","en-US":"en_US","es-US":"es_ES","fr-FR":"fr_FR","id-ID":"id_ID","it-IT":"it_IT","ko-KR":"ko_KR","pt-BR":"pt_PT","vi-VN":"en_US","zh-HK":"zh_HK"}[e]}},e.SubscriptionsHelper.prototype.getStripeLocale=function(e){var t="en";if(e){t={"de-DE":"de","en-US":"en","es-US":"es-419","fr-FR":"fr","id-ID":"id","it-IT":"it","ko-KR":"ko","pt-BR":"pt-BR","vi-VN":"vi","zh-HK":"zh"}[e]}return t},e.SubscriptionsHelper.prototype.getGooglePayLocale=function(e){var t="en";if(e){t={"de-DE":"de","en-US":"en","es-US":"es","fr-FR":"fr","id-ID":"id","it-IT":"it","ko-KR":"ko","pt-BR":"pt","vi-VN":"en","zh-HK":"zh"}[e]}return t},e.SubscriptionsHelper.prototype.getNiceCardType=function(e){return this.cardTypeMap[e]},e.SubscriptionsHelper.prototype.getPaymentVendorType=function(e){return this.paymentVendorMap[e]},e.SubscriptionsHelper.prototype.isPaymentVendorBraintree=function(e){return e===this.paymentVendorMap.braintree},e.SubscriptionsHelper.prototype.isPaymentVendorDigitalRiver=function(e){return e===this.paymentVendorMap.digitalriver},e.SubscriptionsHelper.prototype.isPaymentVendorStripe=function(e){return e===this.paymentVendorMap.stripe},e.SubscriptionsHelper.prototype.isPaymentVendorAppleOrGoogle=function(e){return e===this.paymentVendorMap.apple||e===this.paymentVendorMap.google},e.SubscriptionsHelper.prototype.isPaymentVendorApple=function(e){return e===this.paymentVendorMap.apple},e.SubscriptionsHelper.prototype.isPaymentVendorGoogle=function(e){return e===this.paymentVendorMap.google},e.SubscriptionsHelper.prototype.hasYearlyLegalNotice=function(e){return this.subscriptionsIdHasAnnualPerk[e]},e.SubscriptionsHelper.prototype.log=function(t,n){!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[flickr-add-payment-method] "+t,e.config.win.location.href,n||{})},e.SubscriptionsHelper.prototype.beaconTransactionStep=function(t,n){!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[PRO] "+t,e.config.win.location.href,n||{})},e.SubscriptionsHelper.prototype.doesPlanIdHaveTrial=function(e){return e===this.FLICKR_PRO_ANNUAL_PLAN_ID||e===this.FLICKR_PRO_1_YEAR_PLAN_ID||e===this.FLICKR_PRO_2_YEARS_PLAN_ID},e.SubscriptionsHelper.prototype.canPurchaseTrialPlan=function(t,n){if(t&&n){var o;return o=t.getValue("products"),e.Array.filter(o,function(e){return e.planId===this.FLICKR_PRO_ANNUAL_TRIAL&&1===e.canPurchase||e.planId===this.FLICKR_PRO_OLD_ANNUAL_TRIAL&&1===e.canPurchase}.bind(this)).length>0}},e.SubscriptionsHelper.prototype.getTrialLength=function(){return 45},e.SubscriptionsHelper.prototype.formatSubscriptionModels=function(t){if(!t)return[];var n=t.toJSON();return n&&n.subscriptions&&n.subscriptions instanceof Array&&0!==n.subscriptions.length?e.Array.map(n.subscriptions,this.formatSubscriptionModel.bind(this)):[]},e.SubscriptionsHelper.prototype.formatSubscriptionModel=function(t){var n,o,r,a,i=!1;return t.amountBilled&&("number"==typeof t.amountBilled?t.amountBilled=t.amountBilled.toFixed(2):"string"==typeof t.amountBilled?t.amountBilled=parseInt(t.amountBilled,10).toFixed(2):t.amountBilled="0.00"),n=t.amountBilled,o=t.pendingPrice?t.pendingPrice.toFixed(2):"0.00",(r=this.isPaymentVendorStripe(parseInt(t.vendorId,10)))&&t.futureChanges&&(i={type:parseInt(t.futureChanges.type,10),intlName:this.getPlanIntlName(parseInt(t.futureChanges.type,10)),startDate:1e3*parseInt(t.futureChanges.startDate,10),currency:t.futureChanges.currency,hasDiscount:t.futureChanges.hasDiscount,basePrice:t.futureChanges.basePrice,totalPrice:t.futureChanges.totalPrice}),a=parseInt(t.status,10),{type:t.type,canSeeAnnualPerks:this.canPlanIdSeeAnnualPerks(t.type),startDate:1e3*parseInt(t.startDate,10),nextBillingDate:a===this.subscriptionStatusMap.active||a===this.subscriptionStatusMap.pending?e.moment(1e3*parseInt(t.nextBillingDate,10)):0,id:t.id,intlName:this.getPlanIntlName(parseInt(t.type,10)),name:t.prettyName,duration:t.billingScheduleMonths,price:n,pendingPrice:o,status:a,isClosed:a===this.subscriptionStatusMap.closed,isPastDue:a===this.subscriptionStatusMap.subscription_went_past_due,effectiveEndDate:1e3*parseInt(t.effectiveEndDate,10),paymentVendorType:t.paymentVendorType||t.vendorId,paymentMethodType:t.paymentMethodType,isBraintreeSubscription:this.isPaymentVendorBraintree(parseInt(t.paymentVendorType||t.vendorId,10)),isDigitalRiverSubscription:this.isPaymentVendorDigitalRiver(parseInt(t.paymentVendorType||t.vendorId,10)),isStripeSubscription:r,isGoogleOrAppleSubscription:this.isPaymentVendorAppleOrGoogle(parseInt(t.paymentVendorType||t.vendorId),10),transactions:t.transactions,futureChanges:i,isPayPal:t.paymentMethodType&&["1","2","4"].includes(t.paymentMethodType),btMigrationSegment:t.btMigrationSegment||void 0}},e.SubscriptionsHelper.prototype.getEligibleSubscription=function(e,t){var n,o,r=e.getValue("pending"),a=e.getValue("active"),i=e.getValue("pastDue");return t&&(o=e.getValue("closed")),r&&r.length?n=r[0]:a&&a.length?n=a[0]:i&&i.length?n=i[0]:t&&o&&o[0]&&(n=o[0]),n},e.SubscriptionsHelper.prototype.getActiveAndPendingSubscriptions=function(t){var n;return n=e.Array.filter(this.formatSubscriptionModels(t),function(e){return e.status===this.subscriptionStatusMap.pending}.bind(this)),{activeSubs:e.Array.filter(this.formatSubscriptionModels(t),function(t){return t.status===this.subscriptionStatusMap.active||t.status===this.subscriptionStatusMap.closed&&void 0!==t.effectiveEndDate&&e.moment(t.effectiveEndDate).isAfter(e.moment())||t.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this)),pendingSubs:n}},e.SubscriptionsHelper.prototype.isUserOnActiveButClosedPro=function(t){var n=this.getActiveAndPendingSubscriptions(t);return e.Array.filter(n.activeSubs,function(e){return e.status!==this.subscriptionStatusMap.active}.bind(this)).length>=1&&n.pendingSubs&&0===n.pendingSubs.length},e.SubscriptionsHelper.prototype.isUserCurrentlyOnADigitalRiverSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1;if(t.activeSubs&&t.activeSubs.length>0){var o=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var r=t.pendingSubs[0];r&&(n=r.isDigitalRiverSubscription)}else n=o.isDigitalRiverSubscription}return n},e.SubscriptionsHelper.prototype.isUserCurrentlyOnABraintreeSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1,o=!1;if(t.activeSubs&&t.activeSubs.length>0){var r=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var a=t.pendingSubs[0];a&&(n=a.isBraintreeSubscription,o=a.nextBillingDate)}else r.isClosed||(n=r.isBraintreeSubscription,o=r.nextBillingDate)}return{isUserCurrentlyOnABraintreeSub:n,renewalDate:o}},e.SubscriptionsHelper.prototype.isUserCurrentlyOnAStripeSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1,o=!1;if(t.activeSubs&&t.activeSubs.length>0){var r=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var a=t.pendingSubs[0];a&&(n=a.isStripeSubscription,o=a.nextBillingDate)}else r.isClosed||(n=r.isStripeSubscription,o=r.nextBillingDate)}return{isStripeSubscription:n,renewalDate:o}},e.SubscriptionsHelper.prototype.isUserCurrentlyOnAIAPSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1;if(t.activeSubs&&t.activeSubs.length>0){var o=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var r=t.pendingSubs[0];r&&(n=r.isGoogleOrAppleSubscription)}else o.isClosed||(n=o.isGoogleOrAppleSubscription)}return n},e.SubscriptionsHelper.prototype.isUserPastDue=function(t){var n,o=this.getActiveAndPendingSubscriptions(t);return(n=e.Array.filter(o.activeSubs,function(e){return e.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this)))&&n.length>=1},e.SubscriptionsHelper.prototype.hasPurchasedTrialInThePast=function(t){var n=t.toJSON();return e.Array.filter(n,function(e){return e.planId===this.FLICKR_PRO_ANNUAL_TRIAL||e.planId===this.FLICKR_PRO_OLD_ANNUAL_TRIAL}.bind(this)).length>0},e.SubscriptionsHelper.prototype.isOnActiveTrial=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1;return t&&t.activeSubs&&t.activeSubs.length>0&&(n=t.activeSubs[0].type===this.FLICKR_PRO_ANNUAL_TRIAL||t.activeSubs[0].type===this.FLICKR_PRO_OLD_ANNUAL_TRIAL),n},e.SubscriptionsHelper.prototype.isOneTimePro=function(e){return e.toJSON().oneTimePro.isOneTimePro},e.SubscriptionsHelper.prototype.getShopperCurrencyAndLocale=function(t){var n="US",o="en_US",r="USD",a=!1;if(!t&&e.config.flickr.geo?(e.config.flickr.geo.countryCode&&(n=e.config.flickr.geo.countryCode),e.config.flickr.geo.eu&&(a=e.config.flickr.geo.eu)):t&&(n=t.countryCode||"US",a=t.eu||!1),a)"GB"===n?(o="en_IE",r="GBP"):(o="en_IE",r="EUR");else if(this.US_TERRITORIES_COUNTRIES_CODES.indexOf(n)>-1)o="en_US",r="USD";else switch(n){case"US":o="en_US",r="USD";break;case"CA":o="en_IE",r="CAD";break;default:o="en_IE",r="USD"}return{locale:o,currency:r}},e.SubscriptionsHelper.prototype.getPlanIntlName=function(e){switch(e){case this.FLICKR_PRO_MONTHLY_PLAN_ID:case this.FLICKR_PRO_1_MONTH_V2_APPLE_ID:case this.FLICKR_PRO_1_MONTH_V2_GOOGLE_ID:case this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID:return"checkout.FLICKR_MONTHLY_PRO_PLAN";case this.FLICKR_PRO_3_MONTH_PLAN_ID:case this.FLICKR_PRO_3_MONTH_V2_PLAN_ID:case this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID:return"checkout.FLICKR_3_MONTHS_PRO_PLAN";case this.FLICKR_PRO_1_YEAR_PLAN_ID:case this.FLICKR_PRO_ANNUAL_PLAN_ID:case this.FLICKR_PRO_1_YEAR_V2_APPLE_ID:case this.FLICKR_PRO_1_YEAR_V2_GOOGLE_ID:case this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID:return"checkout.FLICKR_ANNUAL_PRO_PLAN";case this.FLICKR_PRO_2_YEARS_PLAN_ID:case this.FLICKR_PRO_2_YEAR_V2_PLAN_ID:case this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID:return"checkout.FLICKR_2_YEAR_PRO_PLAN";default:return"common.FLICKR_PRO"}},e.SubscriptionsHelper.prototype.getPriceWithCurrency=function(e,t,n){var o=n.replace("_","-");let r="";return"USD"!==t||"en-US"!==n&&"es-US"!==n||(r="USD "),r+new Intl.NumberFormat(o,{style:"currency",currency:t}).format(e)},e.SubscriptionsHelper.prototype.doesCountryRequiresSignedInGifting=function(e){return!(!e||!e.countryCode||"VN"!==e.countryCode)},e.SubscriptionsHelper.prototype.isADeniedCountry=function(e){return!!(e&&e.countryCode&&["VE","CU","IR","IQ","KP","SY"].indexOf(e.countryCode)>-1)},e.SubscriptionsHelper.prototype.isProductPubliclyAvailable=function(e){return!(!e||e===this.FLICKR_PRO_2_YEAR_V2_PLAN_ID)},e.SubscriptionsHelper.prototype.parseEffectiveSubscriptionData=function(e,t){var n=!1,o=!1,r=!1,a=void 0,i=void 0;if(e&&t&&t.length){t.length>1&&t.sort((function(e,t){return parseInt(e.startDate,10)<parseInt(t.startDate)}));var u=parseInt(t[0].status,10),c=parseInt(t[0].effectiveEndDate,10),s=parseInt(t[0].nextBillingDate,10);n=u===this.subscriptionStatusMap.closed&&c>parseInt((new Date).getTime()/1e3,10),!!(r=u===this.subscriptionStatusMap.pending)&&this.isSubscriptionPendingAndPaidFor(t[0]),u===this.subscriptionStatusMap.active&&s>parseInt((new Date).getTime()/1e3,10),o=u===this.subscriptionStatusMap.subscription_went_past_due,i=parseInt(t[0].type,10),a=parseInt(t[0].status,10)}return{status:a,planType:i,isPro:e,isClosed:n,isPastDue:o,isPending:r}},e.SubscriptionsHelper.prototype.isOneTimePro=function(e){return!(!e||!e.getValue("isPro"))&&(e.getValue("proExpireDate")&&e.getValue("proExpireDate").isAfter())},e.SubscriptionsHelper.prototype.parseEffectiveSubscriptions=function(t){return t?e.Array.map(t,this.formatSubscriptionModel.bind(this)):[]},e.SubscriptionsHelper.prototype.isAMonthlySub=function(e){var t=[this.FLICKR_PRO_3_MONTH_PLAN_ID,this.FLICKR_PRO_MONTHLY_PLAN_ID,this.FLICKR_PRO_3_MONTH_V2_PLAN_ID,this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID,this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID];return!!((e=parseInt(e,10))&&t.indexOf(e)>-1)},e.SubscriptionsHelper.prototype.isSubscriptionPendingAndPaidFor=function(e){return!!e&&(parseInt(e.status,10)===this.subscriptionStatusMap.pending&&e.transactions&&e.transactions.length>0)},e.SubscriptionsHelper.prototype.getErrorMessageIntlKeyForStripeErrorCode=function(e){if(e){var t=!1;switch(e){case"incorrect_cvc":t="checkout.PLEASE_ENTER_CORRECT_VALID_CVV";break;case"processing_error":default:t="checkout.PROCESSING_ERROR";break;case"expired_card":t="checkout.YOUR_CARD_IS_EXPIRED";break;case"card_declined":t="checkout.YOUR_CARD_WAS_DECLINED"}return t}},e.SubscriptionsHelper.prototype.trackAddToCart=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.ADD_TO_CART,data:{sku:t.sku,name:t.name,category:"subscription",unitPrice:t.unitPrice,quantity:1,currency:t.currency}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.trackAddToCart")},e.SubscriptionsHelper.prototype.sendSuccessfulPurchaseEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.SUBSCRIPTION_PURCHASE_EVENT,data:{sku:parseInt(t.sku,10),nsid:t.nsid,flow:"purchase",currency:t.currency,totalPrice:t.totalPrice}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendSuccessfulPurchaseEvent")},e.SubscriptionsHelper.prototype.sendPurchaseFunnelEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.SUBSCRIPTION_PURCHASE_FUNNEL_EVENT,data:{nsid:t.nsid||"",sku:parseInt(t.sku,10)||0,step:t.step,currency:t.currency||"",signedIn:t.signedIn||!1,couponCode:t.couponCode||""}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendPurchaseFunnelEvent")},e.SubscriptionsHelper.prototype.sendCancellationFlowEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({
schema:e.Snowplough.SCHEMAS.SUBSCRIPTION_CANCEL_FLOW_EVENT,data:{nsid:t.nsid,currentSku:parseInt(t.currentSku,10),feedbackId:t.feedbackId?t.feedbackId:null,paymentVendorType:parseInt(t.paymentVendorType,10),cancellationStep:t.cancellationStep,cancellationReasonPicked:t.cancellationReasonPicked?parseInt(t.cancellationReasonPicked,10):null,cancellationReasonText:t.cancellationReasonText||null,bucket:t.bucket,eligibleForSurvey:t.eligibleForSurvey}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendCancellationFlowEvent")},e.SubscriptionsHelper.prototype.sendGiftPurchaseEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.GIFT,data:{step:t.step,recipientNsid:t.recipientNsid,gifterNsid:t.gifterNsid||"",gifterEmail:t.gifterEmail||"",price:t.price||0,duration:t.duration||"",error:t.error||"",giftId:t.giftId||0}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendGiftPurchaseEvent")},e.SubscriptionsHelper.prototype.sendFreeTrialEvent=function(t){if(e.Snowplough&&t){var o={category:"free_trial"};t.action&&(o.action=t.action),t.couponCode&&(o.label=t.couponCode),t.planId&&(o.value=t.planId),e.Snowplough.sendStructuredEvent(o)}else n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendFreeTrialEvent")},e.SubscriptionsHelper.prototype.getProLandingPageUrl=function(e,t){var n="/account/upgrade/pro";switch(t=t||{},e){case this.UTM_PRO_BADGE:n+="?utm_campaign=web&utm_source=desktop&utm_content=badge"+(t&&t.utm_medium?"&utm_medium="+t.utm_medium:"");break;case this.UTM_HIDE_ADS:n+="?utm_campaign=web&utm_source=desktop&utm_medium=ads_upsell&utm_content=upgrade";break;case this.UTM_UPSELL_LINK:n+="?utm_campaign=web&utm_source=desktop&utm_content=upgrade"+(t&&t.utm_medium?"&utm_medium="+encodeURIComponent(t.utm_medium):"");break;case this.UTM_GLOBAL_NAV:n+="?utm_campaign=web&utm_source=desktop&utm_medium=gn"+(t&&t.utm_content?"&utm_content="+encodeURIComponent(t.utm_content):"");break;case this.UTM_HIDE_ADS_GETTY_SEARCH:n+="?utm_campaign=getty-search&utm_source=desktop&utm_medium=ads_upsell&utm_content=upgrade";break;case this.UTM_EXPLORED_BANNER_DISCOUNT:n+="/pro-monthly?coupon=2KZNQDGG&utm_campaign=explored_banner_discount&utm_source="+encodeURIComponent(t.utm_source)+"&utm_content=banner";break;case this.UTM_CHURNED_BANNER_PRO:n+=t.planType+t.couponCode+"&utm_campaign=cap-banner&utm_source=Flickr&utm_medium=blue-banner&utm_content=text-link";break;case this.UTM_SAFETY_UPSELL:n+=`?utm_campaign=safetyLevel&utm_source=${t.source||"desktop"}&utm_medium=${t.medium}&utm_content=upgrade`;break;case this.UTM_PHOTOLIST_UPSELL:n+=`?utm_campaign=photolist&utm_source=${t.source||"desktop"}&utm_medium=grid&utm_content=upgrade`;break;case this.UTM_PROPSCORE2_BANNER_PRO:n+=`?utm_campaign=propscore2&utm_source=${t.source||"desktop"}&utm_medium=banner&utm_content=upgrade`;break;case this.UTM_SECOND_LIFE_BANNER_DISCOUNT:n+="?coupon=SLPRO20&utm_campaign=second-life-birthday&utm_source=Flickr&utm_medium=house_ads&utm_content=blue-banner";break;case this.UTM_PRO_AWARENESS_CAMPAIGN:n+="?utm_campaign=eoy-pro-spotlight&utm_source=Flickr&utm_medium=house_ads&utm_content=blue-banner"}return n},e.SubscriptionsHelper.prototype.getMostRecentSubscription=function(e){return e&&e.length>1&&(e=e.sort((function(e,t){return parseInt(e.dateCreate,10)<parseInt(t.dateCreate,10)?1:parseInt(e.dateCreate,10)>parseInt(t.dateCreate,10)?-1:0}))),e[0]}}),"@VERSION@",{requires:["moment","timezone-helper","array-extras"],optionalRequires:["hermes-core"],optional:[]});